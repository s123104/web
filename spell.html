<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>ğŸ’€ è©­ç•°å’’èªç”¢ç”Ÿå™¨ 3.0 ğŸ’«</title>
  <style>
    body {
      background: #0a0a0a;
      color: #eee;
      font-family: 'Courier New', monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px;
    }
    h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      text-shadow: 0 0 8px #0f0, 0 0 16px #0f0;
    }
    textarea {
      width: 80%;
      height: 120px;
      background: #111;
      color: #0f0;
      border: 1px solid #0f0;
      padding: 10px;
      margin: 15px 0;
      font-size: 1rem;
      resize: vertical;
    }
    .controls {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
    }
    .controls label { font-size: 0.9rem; }
    .controls input[type=range] { width: 120px; }
    button {
      background: #0f0;
      color: #111;
      border: none;
      padding: 8px 16px;
      cursor: pointer;
      font-size: 1rem;
      transition: opacity .2s;
    }
    button:hover { opacity: 0.8; }
    #result {
      white-space: pre-wrap;
      text-align: left;
      width: 80%;
      font-size: 1.1rem;
      line-height: 1.6;
      background: #111;
      padding: 20px;
      border: 1px dashed #0f0;
      animation: flicker 3s infinite;
    }
    @keyframes flicker {
      0%,18%,22%,25%,53%,57%,100% {opacity:1;}
      20%,24%,55% {opacity:0.4;}
    }
  </style>
</head>
<body>
  <h1>ğŸ’€ è©­ç•°å’’èªç”¢ç”Ÿå™¨ 3.0 ğŸ’«</h1>
  <textarea id="input" placeholder="åœ¨é€™è£¡è¼¸å…¥ä¸­æ–‡æˆ–è‹±æ–‡æ–‡å­—â€¦"></textarea>

  <div class="controls">
    <label for="intensity">å¼·åº¦:</label>
    <input type="range" id="intensity" min="1" max="5" value="3">
    <button id="generate">ç”Ÿæˆè©­ç•°å’’èª</button>
    <button id="copy">è¤‡è£½å’’èª</button>
  </div>

  <div id="result">å’’èªçµæœæœƒè·‘é€™è£¡ï½</div>

  <script>
    // å‰ç¶´ã€ä¸­ç¶´ã€å¾Œç¶´ã€ç¬¦è™Ÿåº«
    const prefixes = ['Î©-load','Î‘ÏÏ‡Î®','CÅ“ur','Geist','æ¢¦å¢ƒ','ì‹œìŠ¤í…œ','sueÃ±os','rÃªve','corazÃ³n','fall','Ïˆ','Î»','æš—å½±','è™šæ— '];
    const infixes = ['::','->','=>','â¤','â‡'];
    const suffixes = ['åŒåŒ–','çµ‚çµ','è£‚ç¸«','å´©æ½°','æ»…çµ•','è™›ç©º','åå™¬'];
    const symbols = ['â–²','â˜…','âœ¦','â˜ ï¸','â˜¢ï¸','âš¡','âœº'];
    // èªè¨€å°æ‡‰è¡¨ï¼ˆLibreTranslate æ”¯æ´ï¼‰
    const langMap = [
      { name: 'English', code: 'en' },
      { name: 'EspaÃ±ol', code: 'es' },
      { name: 'FranÃ§ais', code: 'fr' },
      { name: 'Deutsch', code: 'de' },
      { name: 'í•œêµ­ì–´', code: 'ko' },
      { name: 'æ—¥æœ¬èª', code: 'ja' },
      { name: 'ä¸­æ–‡', code: 'zh' }
    ];

    function rnd(arr) { return arr[Math.floor(Math.random()*arr.length)]; }
    function shuffle(a) {
      for (let i=a.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [a[i],a[j]]=[a[j],a[i]];
      }
    }

    // å‘¼å« LibreTranslate å…¬é–‹ API
    async function translate(text, target) {
      const res = await fetch('https://libretranslate.de/translate', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({
          q:text,
          source:'auto',
          target,
          format:'text'
        })
      });
      const j = await res.json();
      return j.translatedText;
    }

    document.getElementById('generate').addEventListener('click', async () => {
      const txt = document.getElementById('input').value.trim();
      if (!txt) {
        return document.getElementById('result').textContent = 'é åŒ—ï¼Œå…ˆè¼¸å…¥ä¸€é»æ–‡å­—å•¦â€¦ğŸ˜’';
      }
      const intensity = +document.getElementById('intensity').value;
      const words = txt.split(/\s+/);
      let promises = [];

      words.forEach(w => {
        for (let i=0;i<intensity;i++){
          const p = rnd(prefixes);
          const inf = rnd(infixes);
          const s = rnd(suffixes);
          const sym = rnd(symbols);
          const langObj = rnd(langMap);
          promises.push(
            translate(w, langObj.code)
              .then(trans => `${p}${inf}("${trans}") â¡ï¸ { ${s} in ${langObj.name} ${sym} }`)
              .catch(() => `${p}${inf}("${w}") â¡ï¸ { ${s} in ${langObj.name} ${sym} }`)
          );
        }
      });

      let spells = await Promise.all(promises);
      shuffle(spells);
      document.getElementById('result').textContent = spells.join('\n');
    });

    document.getElementById('copy').addEventListener('click', () => {
      const txt = document.getElementById('result').textContent;
      if (!txt) return;
      navigator.clipboard.writeText(txt)
        .then(() => alert('é åŒ—è¤‡è£½å¥½äº†ï¼Œå»åš‡äººå§ğŸ¤£'))
        .catch(() => alert('è¤‡è£½å¤±æ•—ï¼Œè‡ªå·±æ‰‹å‹•æ‹‰ğŸ˜¤'));
    });
  </script>
</body>
</html>