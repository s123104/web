<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>ğŸ“± é¢ç©æ›ç®—å·¥å…· - ç§»å‹•ç‰ˆ</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+TC:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#eff6ff',
              100: '#dbeafe', 
              200: '#bfdbfe',
              300: '#93c5fd',
              400: '#60a5fa',
              500: '#2B76F9', // Maintained from original if specific
              600: '#2563eb',
              700: '#1d4ed8',
              800: '#1e40af',
              900: '#1e3a8a'
            },
            secondary: {
              50: '#f8fafc',
              100: '#f1f5f9',
              200: '#e2e8f0',
              300: '#cbd5e1',
              400: '#94A3B8',
              500: '#64748b',
              600: '#475569',
              700: '#334155',
              800: '#1e293b',
              900: '#0f172a'
            },
            accent: {
              highlight: '#FEF7C3', // yellow-ish for input highlight
              success: '#10b981',
              warning: '#f59e0b',
              error: '#ef4444'
            }
          },
          fontFamily: {
            sans: ['Inter', 'Noto Sans TC', 'sans-serif']
          },
          spacing: {
            '18': '4.5rem',
            '22': '5.5rem',
            '30': '7.5rem'
          }
        }
      }
    }
  </script>
  
  <style>
    /* Mobile-First è§¸æ§å„ªåŒ–æ¨£å¼ */
    
    /* è§¸æ§å‹å¥½çš„è¼¸å…¥æ¡† */
    .input-mobile {
      @apply h-14 px-4 py-3 text-lg rounded-xl border-2 border-secondary-200;
      @apply bg-white shadow-sm transition-all duration-300 ease-in-out;
      @apply focus:border-primary-500 focus:ring-4 focus:ring-primary-500/20;
      @apply hover:border-secondary-300;
      min-height: 3.5rem;
      touch-action: manipulation;
    }
    
    .input-highlighted {
      @apply bg-accent-highlight border-primary-400; /* Uses accent.highlight color */
      @apply ring-4 ring-primary-200/50;
    }
    
    .input-calculating {
      @apply border-primary-300 bg-primary-50/30;
    }
    
    /* è¼¸å…¥æ¡†å®¹å™¨ */
    .input-container {
      @apply relative mb-3 touch-none;
    }
    
    /* å·¦å´æ¨™ç±¤èˆ‡åœ–æ¨™ */
    .input-label {
      @apply flex items-center mb-2 text-base font-medium text-secondary-700;
    }
    
    .input-icon {
      @apply w-5 h-5 text-primary-500 mr-2 flex-shrink-0;
    }
    
    /* å³å´å–®ä½å¾Œç¶´ */
    .input-suffix {
      @apply absolute right-3 top-1/2 transform -translate-y-1/2;
      @apply text-secondary-500 font-medium pointer-events-none text-base;
    }
    
    /* Loading Spinner */
    .input-spinner {
      @apply absolute right-10 top-1/2 transform -translate-y-1/2;
      @apply text-primary-500 opacity-0 transition-opacity duration-200;
    }
    
    .input-spinner.visible {
      @apply opacity-100;
    }
    
    /* ç²˜åº•æ“ä½œåˆ— */
    .sticky-actions {
      @apply fixed bottom-0 left-0 right-0 z-40;
      @apply bg-white border-t border-secondary-200 shadow-lg;
      @apply px-4 py-3 safe-area-inset-bottom;
    }
    
    /* å¤§è§¸æ§æŒ‰éˆ• */
    .btn-mobile {
      @apply h-12 px-6 text-base font-semibold rounded-xl;
      @apply transition-all duration-200 ease-out;
      @apply active:scale-95 focus:outline-none focus:ring-4;
      min-height: 3rem;
      touch-action: manipulation;
    }
    
    .btn-primary-mobile {
      @apply bg-gradient-to-r from-primary-500 to-primary-600;
      @apply text-white shadow-lg;
      @apply hover:from-primary-600 hover:to-primary-700;
      @apply focus:ring-primary-500/30;
    }
    
    .btn-secondary-mobile {
      @apply bg-secondary-400 text-white;
      @apply hover:bg-secondary-500;
      @apply focus:ring-secondary-400/30;
    }
    
    /* å½©è›‹æŒ‰éˆ• - ç§»å‹•ç‰ˆå„ªåŒ– */
    .easter-egg-mobile {
      @apply fixed top-4 right-4 z-50;
      @apply w-8 h-8 rounded-full;
      @apply bg-gradient-to-r from-pink-400 to-purple-500;
      @apply shadow-md opacity-60;
      @apply flex items-center justify-center;
      @apply transition-all duration-300 ease-out;
      @apply active:scale-90;
      touch-action: manipulation;
    }
    
    .easter-egg-mobile:active {
      @apply opacity-100 scale-110;
    }
    
    /* å…¨è¢å¹• Modal */
    .modal-fullscreen {
      @apply fixed inset-0 z-[100] flex items-center justify-center;
      @apply bg-black/50 backdrop-blur-sm;
      @apply opacity-0 pointer-events-none;
      @apply transition-all duration-300 ease-out;
    }
    
    .modal-fullscreen.active {
      @apply opacity-100 pointer-events-auto;
    }
    
    .modal-content-mobile {
      @apply bg-white rounded-2xl p-6 mx-4;
      @apply max-w-sm w-full max-h-[80vh] overflow-y-auto;
      @apply transform scale-95 transition-all duration-300 ease-out;
      @apply shadow-2xl;
    }
    
    .modal-fullscreen.active .modal-content-mobile {
      @apply scale-100;
    }
    
    /* éŸ¿æ‡‰å¼ç¶²æ ¼ */
    .grid-mobile {
      @apply grid gap-3;
      @apply grid-cols-1;
    }
    
    /* æ©«å‘æ™‚å…©æ¬„ */
    @media (orientation: landscape) and (max-height: 600px) {
      .grid-mobile {
        @apply grid-cols-2 gap-2;
      }
      
      .input-container {
        @apply mb-2;
      }
      
      .input-mobile {
        @apply h-12 text-base;
        min-height: 3rem;
      }
    }
    
    /* å¹³æ¿ä»¥ä¸Šè¢å¹•å„ªåŒ– */
    @media (min-width: 768px) {
      .grid-mobile {
        @apply grid-cols-2 gap-4;
      }
      
      .sticky-actions {
        @apply relative border-t-0 shadow-none px-0 py-0;
        @apply bg-transparent;
      }
    }
    
    @media (min-width: 1024px) {
      .grid-mobile {
        @apply grid-cols-4; /* Adjusted for 8 items, 4 per row on large screens might be too wide, but following original logic. Consider 3 or 2 if needed. */
      }
    }
    
    /* é€šçŸ¥ Toast - ç§»å‹•ç‰ˆ */
    .toast-mobile {
      @apply fixed top-4 left-4 right-4 z-50;
      @apply bg-white border border-secondary-200 rounded-xl shadow-xl;
      @apply p-4 transform -translate-y-full opacity-0;
      @apply transition-all duration-300 ease-out;
    }
    
    .toast-mobile.visible {
      @apply translate-y-0 opacity-100;
    }
    
    /* ç„¡éšœç¤™ç„¦é»å¢å¼· */
    .focus-visible {
      @apply focus:outline-none;
    }
    
    /* å®‰å…¨å€åŸŸé©é… */
    .safe-area-inset-bottom {
      padding-bottom: env(safe-area-inset-bottom);
    }
    
    /* é˜²æ­¢ç¸®æ”¾ */
    .no-zoom {
      touch-action: manipulation;
    }
    
    /* æ»¾å‹•å„ªåŒ– */
    .scroll-smooth {
      scroll-behavior: smooth;
    }
    
    /* ä¸»å…§å®¹å€åŸŸ - ç‚ºç²˜åº•æŒ‰éˆ•é ç•™ç©ºé–“ */
    .main-content {
      @apply pb-20; /* Default padding for sticky actions */
    }
    
    @media (min-width: 768px) {
      .main-content {
        @apply pb-8; /* Reduced padding when actions are not sticky */
      }
    }
  </style>
</head>

<body class="min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 font-sans no-zoom scroll-smooth">
  
  <header class="bg-white shadow-sm border-b border-secondary-100 sticky top-0 z-30">
    <div class="px-4 py-3">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-2">
          <div class="w-8 h-8 bg-gradient-to-r from-primary-500 to-primary-600 rounded-lg flex items-center justify-center">
            <i class="fas fa-ruler-combined text-white text-sm"></i>
          </div>
          <div>
            <h1 class="text-lg font-bold text-secondary-800">é¢ç©æ›ç®—</h1>
            <p class="text-xs text-secondary-500">ç²¾æº–å¿«é€Ÿè½‰æ›</p>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="main-content px-4 py-4">
    
    <div class="bg-primary-50 border border-primary-200 rounded-xl p-4 mb-4 shadow">
      <div class="flex items-start space-x-2">
        <i class="fas fa-info-circle text-primary-500 mt-0.5 text-sm"></i>
        <div class="text-sm">
          <p class="font-medium text-primary-800 mb-1">å¿«é€Ÿä½¿ç”¨</p>
          <p class="text-primary-700">åœ¨ä¸‹æ–¹ä»»ä¸€æ¬„ä½è¼¸å…¥æ•¸å€¼ï¼Œç³»çµ±å°‡è‡ªå‹•ç‚ºæ‚¨æ›ç®—å…¶ä»–å–®ä½ã€‚</p>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-2xl shadow-sm border border-secondary-100 p-4 mb-4">
      <form id="converter-form">
        
        <div class="grid-mobile" id="input-grid">
          
          <div class="input-container">
            <label for="sqm" class="input-label">
              <i class="fas fa-square input-icon"></i>
              å¹³æ–¹å…¬å°º
            </label>
            <div class="relative">
              <input 
                type="number" 
                id="sqm" 
                class="input-mobile w-full pr-16 focus-visible" 
                placeholder="0"
                step="any"
                inputmode="decimal"
                aria-label="å¹³æ–¹å…¬å°ºæ•¸å€¼è¼¸å…¥"
                autocomplete="off"
              >
              <span class="input-suffix">ã¡</span>
              <i class="fas fa-spinner fa-pulse input-spinner" id="spinner-sqm"></i>
            </div>
          </div>

          <div class="input-container">
            <label for="ping" class="input-label">
              <i class="fas fa-home input-icon"></i>
              åª
            </label>
            <div class="relative">
              <input 
                type="number" 
                id="ping" 
                class="input-mobile w-full pr-16 focus-visible" 
                placeholder="0"
                step="any"
                inputmode="decimal"
                aria-label="åªæ•¸å€¼è¼¸å…¥"
                autocomplete="off"
              >
              <span class="input-suffix">åª</span>
              <i class="fas fa-spinner fa-pulse input-spinner" id="spinner-ping"></i>
            </div>
          </div>

          <div class="input-container">
            <label for="hectare" class="input-label">
              <i class="fas fa-map input-icon"></i>
              å…¬é ƒ
            </label>
            <div class="relative">
              <input 
                type="number" 
                id="hectare" 
                class="input-mobile w-full pr-16 focus-visible" 
                placeholder="0"
                step="any"
                inputmode="decimal"
                aria-label="å…¬é ƒæ•¸å€¼è¼¸å…¥"
                autocomplete="off"
              >
              <span class="input-suffix">ha</span>
              <i class="fas fa-spinner fa-pulse input-spinner" id="spinner-hectare"></i>
            </div>
          </div>

          <div class="input-container">
            <label for="jia" class="input-label">
              <i class="fas fa-seedling input-icon"></i>
              ç”²
            </label>
            <div class="relative">
              <input 
                type="number" 
                id="jia" 
                class="input-mobile w-full pr-16 focus-visible" 
                placeholder="0"
                step="any"
                inputmode="decimal"
                aria-label="ç”²æ•¸å€¼è¼¸å…¥"
                autocomplete="off"
              >
              <span class="input-suffix">ç”²</span>
              <i class="fas fa-spinner fa-pulse input-spinner" id="spinner-jia"></i>
            </div>
          </div>

          <div class="input-container">
            <label for="fen" class="input-label">
              <i class="fas fa-leaf input-icon"></i>
              åˆ†
            </label>
            <div class="relative">
              <input 
                type="number" 
                id="fen" 
                class="input-mobile w-full pr-16 focus-visible" 
                placeholder="0"
                step="any"
                inputmode="decimal"
                aria-label="åˆ†æ•¸å€¼è¼¸å…¥"
                autocomplete="off"
              >
              <span class="input-suffix">åˆ†</span>
              <i class="fas fa-spinner fa-pulse input-spinner" id="spinner-fen"></i>
            </div>
          </div>

          <div class="input-container">
            <label for="are" class="input-label">
              <i class="fas fa-chart-area input-icon"></i>
              å…¬ç•
            </label>
            <div class="relative">
              <input 
                type="number" 
                id="are" 
                class="input-mobile w-full pr-16 focus-visible" 
                placeholder="0"
                step="any"
                inputmode="decimal"
                aria-label="å…¬ç•æ•¸å€¼è¼¸å…¥"
                autocomplete="off"
              >
              <span class="input-suffix">a</span>
              <i class="fas fa-spinner fa-pulse input-spinner" id="spinner-are"></i>
            </div>
          </div>

          <div class="input-container">
            <label for="acre" class="input-label">
              <i class="fas fa-flag input-icon"></i>
              è‹±ç•
            </label>
            <div class="relative">
              <input 
                type="number" 
                id="acre" 
                class="input-mobile w-full pr-16 focus-visible" 
                placeholder="0"
                step="any"
                inputmode="decimal"
                aria-label="è‹±ç•æ•¸å€¼è¼¸å…¥"
                autocomplete="off"
              >
              <span class="input-suffix">acre</span>
              <i class="fas fa-spinner fa-pulse input-spinner" id="spinner-acre"></i>
            </div>
          </div>

          <div class="input-container">
            <label for="mu" class="input-label">
              <i class="fas fa-landmark input-icon"></i>
              å¸‚ç•
            </label>
            <div class="relative">
              <input 
                type="number" 
                id="mu" 
                class="input-mobile w-full pr-16 focus-visible" 
                placeholder="0"
                step="any"
                inputmode="decimal"
                aria-label="å¸‚ç•æ•¸å€¼è¼¸å…¥"
                autocomplete="off"
              >
              <span class="input-suffix">å¸‚ç•</span>
              <i class="fas fa-spinner fa-pulse input-spinner" id="spinner-mu"></i>
            </div>
          </div>
        </div>
      </form>
    </div>

    <div class="bg-white rounded-xl border border-secondary-100 p-4 shadow">
      <details class="group">
        <summary class="cursor-pointer select-none">
          <div class="flex items-center justify-between">
            <h3 class="text-base font-semibold text-secondary-800 flex items-center">
              <i class="fas fa-book-open text-primary-500 mr-2"></i>
              ä½¿ç”¨èªªæ˜èˆ‡æ›ç®—å…¬å¼
            </h3>
            <i class="fas fa-chevron-down text-secondary-400 transform transition-transform duration-200 group-open:rotate-180"></i>
          </div>
        </summary>
        
        <div class="mt-4 pt-4 border-t border-secondary-100 space-y-4">
          <div class="bg-blue-50 border border-blue-200 rounded-xl p-4 shadow-sm">
            <h4 class="text-md font-semibold text-blue-800 mb-2 flex items-center">
              <i class="fas fa-lightbulb text-blue-600 mr-2"></i>å¿«é€Ÿä¸Šæ‰‹
            </h4>
            <ol class="text-sm text-blue-700 space-y-1.5 list-decimal list-inside pl-1">
              <li>åœ¨ä¸Šæ–¹ä»»ä¸€é¢ç©å–®ä½æ¬„ä½ä¸­è¼¸å…¥æ•¸å€¼ã€‚</li>
              <li>ç³»çµ±å°‡å³æ™‚è‡ªå‹•ç‚ºæ‚¨æ›ç®—ä¸¦æ›´æ–°æ‰€æœ‰å…¶ä»–å–®ä½æ¬„ä½ã€‚</li>
              <li>æ‚¨ç›®å‰æ­£åœ¨è¼¸å…¥æˆ–æœ€å¾Œä¿®æ”¹çš„æ¬„ä½æœƒä»¥<span class="font-semibold text-yellow-700 bg-yellow-200 px-1.5 py-0.5 rounded-md">é»ƒè‰²</span>æ¨™ç¤ºã€‚</li>
            </ol>
          </div>
        
          <div class="bg-green-50 border border-green-200 rounded-xl p-4 shadow-sm">
            <h4 class="text-md font-semibold text-green-800 mb-3 flex items-center">
              <i class="fas fa-calculator text-green-600 mr-2"></i>å¸¸ç”¨é¢ç©å–®ä½æ›ç®—åƒè€ƒ
            </h4>
            <div class="text-sm text-green-700 space-y-2">
              <div>
                <p class="font-medium text-green-800">å¹³æ–¹å…¬å°º (ã¡) & åª:</p>
                <ul class="list-disc list-inside pl-4 space-y-1 mt-1">
                  <li>1 å¹³æ–¹å…¬å°º (ã¡) = 0.3025 åª</li>
                  <li>1 åª = 3.3058 å¹³æ–¹å…¬å°º (ã¡)</li>
                </ul>
              </div>
        
              <div class="pt-2 mt-2 border-t border-green-100">
                <p class="font-medium text-green-800">å…¬é ƒ (ha):</p>
                <ul class="list-disc list-inside pl-4 space-y-1 mt-1">
                  <li>1 å…¬é ƒ = 10,000 å¹³æ–¹å…¬å°º (ã¡)</li>
                  <li>1 å…¬é ƒ = 3,025 åª</li>
                  <li>1 å…¬é ƒ = 100 å…¬ç• (a)</li>
                  <li>1 å…¬é ƒ = 1.0310 ç”²</li>
                </ul>
              </div>
              
              <div class="pt-2 mt-2 border-t border-green-100">
                <p class="font-medium text-green-800">ç”²:</p>
                <ul class="list-disc list-inside pl-4 space-y-1 mt-1">
                  <li>1 ç”² (åƒè€ƒ) = 0.9699 å…¬é ƒ (ha)</li>
                  <li>1 ç”² (åƒè€ƒ) = 2,934 åª</li>
                  <li class="text-green-900 font-semibold">1 ç”² (æœ¬å·¥å…·å®šç¾©) = 3305.785 å¹³æ–¹å…¬å°º (ã¡)</li>
                </ul>
              </div>
        
              <div class="pt-2 mt-2 border-t border-green-100">
                <p class="font-medium text-green-800">åˆ†:</p>
                <ul class="list-disc list-inside pl-4 space-y-1 mt-1">
                  <li>1 åˆ† (åƒè€ƒ) = 0.0970 å…¬é ƒ (ha)</li>
                  <li>1 åˆ† (åƒè€ƒ) = 293.4 åª</li>
                  <li class="text-green-900 font-semibold">1 åˆ† (æœ¬å·¥å…·å®šç¾©) = 330.578 å¹³æ–¹å…¬å°º (ã¡)</li>
                </ul>
              </div>
        
              <div class="pt-2 mt-2 border-t border-green-100">
                <p class="font-medium text-green-800">å…¬ç• (a):</p>
                <ul class="list-disc list-inside pl-4 space-y-1 mt-1">
                  <li>1 å…¬ç• = 100 å¹³æ–¹å…¬å°º (ã¡)</li>
                  <li>1 å…¬ç• = 30.25 åª</li>
                </ul>
              </div>
        
              <div class="pt-2 mt-2 border-t border-green-100">
                <p class="font-medium text-green-800">è‹±ç• (acre):</p>
                <ul class="list-disc list-inside pl-4 space-y-1 mt-1">
                  <li>1 è‹±ç• â‰ˆ 4046.856 å¹³æ–¹å…¬å°º (ã¡)</li>
                  <li>1 è‹±ç• â‰ˆ 1224.17 åª</li>
                </ul>
              </div>
        
              <div class="pt-2 mt-2 border-t border-green-100">
                <p class="font-medium text-green-800">å¸‚ç•:</p>
                <ul class="list-disc list-inside pl-4 space-y-1 mt-1">
                  <li>1 å¸‚ç• â‰ˆ 666.667 å¹³æ–¹å…¬å°º (ã¡)</li> <li>1 å¸‚ç• â‰ˆ 201.67 åª</li>
                </ul>
              </div>
            </div>
            <p class="text-xs text-green-600 mt-4 pt-3 border-t border-green-200">
              <i class="fas fa-info-circle mr-1"></i> ä¸Šè¿°æ›ç®—è¡¨éƒ¨åˆ†æ•¸å€¼ (æ¨™ç¤ºç‚º"åƒè€ƒ") å¯èƒ½å› æ¨™æº–æˆ–åœ°å€è€Œç•°ã€‚æœ¬å·¥å…·çš„è¨ˆç®—ä¾æ“š
              <a href="javascript:alert('æœ¬å·¥å…·ä½¿ç”¨ä¹‹æ›ç®—ä¿‚æ•¸ (ä»¥1å–®ä½è½‰æ›ç‚ºå¹³æ–¹å…¬å°ºç‚ºåŸºæº–):\n--------------------------------------------------\nå¹³æ–¹å…¬å°º (ã¡): 1\nåª: 1 / 0.3025 â‰ˆ 3.305785123966942\nå…¬é ƒ (ha): 10000\nç”²: 3305.785\nåˆ†: 330.578\nå…¬ç• (a): 100\nè‹±ç• (acre): 4046.8564224\nå¸‚ç•: 666.6667\n--------------------------------------------------');" class="font-semibold underline hover:text-green-700">æŒ‡å®šçš„è½‰æ›ä¿‚æ•¸</a>ã€‚
            </p>
          </div>
          
          <div class="bg-red-50 border border-red-200 rounded-xl p-4 shadow-sm">
            <p class="text-sm text-red-700 flex items-start">
              <i class="fas fa-exclamation-triangle mr-2 mt-0.5 flex-shrink-0"></i>
              <span>æœ¬æŸ¥è©¢ç³»çµ±æ›ç®—çµæœåƒ…ä¾›åƒè€ƒï¼Œå¯¦éš›åœ°æ”¿è³‡æ–™è«‹ä»¥å„åœ°æ”¿äº‹å‹™æ‰€ç™»è¨˜ç‚ºæº–ã€‚</span>
            </p>
          </div>
        </div>
      </details>
    </div>

  </main>

  <div class="sticky-actions">
    <div class="flex gap-3">
      <button 
        type="button" 
        id="clear-btn"
        class="btn-mobile btn-secondary-mobile flex-1 focus-visible"
        aria-label="æ¸…é™¤æ‰€æœ‰è¼¸å…¥æ•¸å€¼"
      >
        <i class="fas fa-eraser mr-2"></i>
        æ¸…é™¤
      </button>
      
      <button 
        type="button" 
        id="copy-btn"
        class="btn-mobile btn-primary-mobile flex-1 focus-visible hidden"
        aria-label="è¤‡è£½æ›ç®—çµæœ"
      >
        <i class="fas fa-copy mr-2"></i>
        è¤‡è£½çµæœ
      </button>
    </div>
  </div>

  <div class="easter-egg-mobile" id="easter-egg">
    <i class="fas fa-magic text-white text-xs"></i>
  </div>

  <div class="modal-fullscreen" id="easter-modal">
    <div class="modal-content-mobile">
      <div class="text-center">
        <div class="w-12 h-12 bg-gradient-to-r from-pink-400 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-3">
          <i class="fas fa-rocket text-white text-lg"></i>
        </div>
        <h3 class="text-lg font-bold text-secondary-800 mb-2">ğŸ‰ ç™¼ç¾éš±è—åŠŸèƒ½ï¼</h3>
        <p class="text-secondary-600 text-sm mb-4">ä½ æ‰¾åˆ°äº†æˆ‘å€‘çš„å°ç§˜å¯†ï¼é€™è£¡æœ‰å€‹ç‰¹åˆ¥çš„é¢ç©çŸ¥è­˜ï¼š</p>
        
        <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-3 mb-4">
          <h4 class="font-semibold text-secondary-800 mb-2 text-sm">ğŸ’¡ æœ‰è¶£çš„é¢ç©æ¯”è¼ƒ</h4>
          <p class="text-xs text-secondary-700">
            å°åŒ—101å¤§æ¨“çš„åœŸåœ°é¢ç©ç´„ç‚º <span class="font-bold text-primary-600">3,056 åª</span>ï¼Œ
            ç›¸ç•¶æ–¼ <span class="font-bold text-primary-600">10,100 ã¡</span>ï¼
          </p>
        </div>
        
        <div class="flex gap-2">
          <button class="btn-mobile btn-primary-mobile text-sm flex-1" onclick="generateRandomConversion()">
            <i class="fas fa-dice mr-1"></i>
            éš¨æ©Ÿæ›ç®—
          </button>
          <button class="btn-mobile btn-secondary-mobile text-sm flex-1" onclick="closeEasterEgg()">
            <i class="fas fa-times mr-1"></i>
            é—œé–‰
          </button>
        </div>
      </div>
    </div>
  </div>

  <div id="toast" class="toast-mobile">
    <div class="flex items-center space-x-3">
      <div class="flex-shrink-0">
        <i id="toast-icon" class="fas fa-check-circle text-accent-success"></i>
      </div>
      <div class="flex-1">
        <p id="toast-message" class="text-sm font-medium text-secondary-800"></p>
      </div>
      <button onclick="hideToast()" class="flex-shrink-0 text-secondary-400">
        <i class="fas fa-times text-sm"></i>
      </button>
    </div>
  </div>

  <script>
    // ===== æ ¸å¿ƒè®Šæ•¸èˆ‡è¨­å®š =====
    
    // æ›ç®—ä¿‚æ•¸ (ä»¥å¹³æ–¹å…¬å°ºç‚ºåŸºæº–å–®ä½: 1 [unit] = X [sqm])
    const CONVERSION_FACTORS = {
      sqm: 1,                         // 1 å¹³æ–¹å…¬å°º = 1 ã¡
      ping: 1 / 0.3025,               // 1 åª = (1 / 0.3025) ã¡ â‰ˆ 3.305785123966942 ã¡ (derived from 1 ã¡ = 0.3025 åª)
      hectare: 10000,                 // 1 å…¬é ƒ = 10000 ã¡
      jia: 3305.785,                  // 1 ç”² = 3305.785 ã¡
      fen: 330.578,                   // 1 åˆ† = 330.578 ã¡
      are: 100,                       // 1 å…¬ç• = 100 ã¡
      acre: 4046.8564224,             // 1 è‹±ç• = 4046.8564224 ã¡
      mu: 666.6667                    // 1 å¸‚ç• = 666.6667 ã¡ 
    };
    
    // é˜²æŠ–è¨­å®š
    const DEBOUNCE_DELAY = 300; // 300ms é˜²æŠ–å»¶é²
    
    // å…¨åŸŸç‹€æ…‹
    let currentActiveInput = null;
    let lastCalculatedValues = {};
    let debounceTimers = {};
    
    // ===== DOM å…ƒç´ å¼•ç”¨ =====
    const clearBtn = document.getElementById('clear-btn');
    const copyBtn = document.getElementById('copy-btn');
    const easterEgg = document.getElementById('easter-egg');
    const easterModal = document.getElementById('easter-modal');
    
    // æ‰€æœ‰è¼¸å…¥æ¬„ä½å’Œå°æ‡‰çš„ Spinner
    const inputs = {
      sqm: document.getElementById('sqm'),
      ping: document.getElementById('ping'),
      hectare: document.getElementById('hectare'),
      jia: document.getElementById('jia'),
      fen: document.getElementById('fen'),
      are: document.getElementById('are'),
      acre: document.getElementById('acre'),
      mu: document.getElementById('mu')
    };
    
    const spinners = {
      sqm: document.getElementById('spinner-sqm'),
      ping: document.getElementById('spinner-ping'),
      hectare: document.getElementById('spinner-hectare'),
      jia: document.getElementById('spinner-jia'),
      fen: document.getElementById('spinner-fen'),
      are: document.getElementById('spinner-are'),
      acre: document.getElementById('spinner-acre'),
      mu: document.getElementById('spinner-mu')
    };

    // ===== é˜²æŠ–å³æ™‚è¨ˆç®—é‚è¼¯ =====
    
    /**
     * é˜²æŠ–å‡½æ•¸
     * @param {Function} func - è¦åŸ·è¡Œçš„å‡½æ•¸
     * @param {number} delay - å»¶é²æ™‚é–“ (ms)
     * @param {string} key - å”¯ä¸€éµå€¼ç”¨æ–¼ç®¡ç†å¤šå€‹è¨ˆæ™‚å™¨
     */
    function debounce(func, delay, key) {
      return function(...args) {
        if (debounceTimers[key]) {
          clearTimeout(debounceTimers[key]);
        }
        debounceTimers[key] = setTimeout(() => {
          func.apply(this, args);
          delete debounceTimers[key];
        }, delay);
      };
    }
    
    /**
     * é¡¯ç¤ºè¨ˆç®—ä¸­ç‹€æ…‹
     * @param {string} sourceUnit - ä¾†æºå–®ä½
     */
    function showCalculating(sourceUnit) {
      spinners[sourceUnit].classList.add('visible');
      inputs[sourceUnit].classList.add('input-calculating');
    }
    
    /**
     * éš±è—è¨ˆç®—ä¸­ç‹€æ…‹
     * @param {string} sourceUnit - ä¾†æºå–®ä½
     */
    function hideCalculating(sourceUnit) {
      spinners[sourceUnit].classList.remove('visible');
      inputs[sourceUnit].classList.remove('input-calculating');
    }
    
    /**
     * åŸ·è¡Œé¢ç©å–®ä½æ›ç®—è¨ˆç®—
     * @param {string} sourceUnit - ä¾†æºå–®ä½éµå€¼
     * @param {number} sourceValue - ä¾†æºæ•¸å€¼
     */
    function calculateConversions(sourceUnit, sourceValue) {
      showCalculating(sourceUnit);
      
      if (sourceValue === null || sourceValue === undefined || sourceValue <= 0 || isNaN(sourceValue)) {
        // If input is cleared or invalid, clear all other fields silently except the source
        Object.keys(inputs).forEach(unit => {
            if (unit !== sourceUnit) {
                inputs[unit].removeEventListener('input', inputHandlers[unit]);
                inputs[unit].value = '';
                inputs[unit].addEventListener('input', inputHandlers[unit]);
            }
        });
        lastCalculatedValues = {};
        copyBtn.classList.add('hidden');
        hideCalculating(sourceUnit);
        return;
      }
      
      // Short delay to allow UI to update spinner, then calculate
      setTimeout(() => {
        try {
          const sqmValue = sourceValue * CONVERSION_FACTORS[sourceUnit];
          
          const results = {};
          Object.keys(CONVERSION_FACTORS).forEach(unit => {
            if (unit === sourceUnit) {
              results[unit] = sourceValue; 
            } else {
              results[unit] = sqmValue / CONVERSION_FACTORS[unit];
            }
          });
          
          Object.keys(results).forEach(unit => {
            if (unit !== sourceUnit) {
              // Display with a fixed number of decimal places
              const valToSet = parseFloat(results[unit].toFixed(6));
              inputs[unit].removeEventListener('input', inputHandlers[unit]);
              inputs[unit].value = (valToSet === 0 && results[unit] > 0) ? results[unit].toExponential(6) : (isNaN(valToSet) ? '' : valToSet);
              inputs[unit].addEventListener('input', inputHandlers[unit]);
            }
          });
          
          lastCalculatedValues = results;
          copyBtn.classList.remove('hidden');
          hideCalculating(sourceUnit);
          
        } catch (error) {
          console.error('è¨ˆç®—éŒ¯èª¤:', error);
          hideCalculating(sourceUnit);
          showToast('è¨ˆç®—å‡ºç¾éŒ¯èª¤ï¼Œè«‹é‡è©¦', 'error');
        }
      }, 50); // Reduced calculation simulation delay
    }
    
    /**
     * æ¸…é™¤æ‰€æœ‰è¼¸å…¥æ¬„ä½ä¸¦é‡ç½®ç‹€æ…‹
     */
    function clearAllInputs() {
      Object.values(inputs).forEach(input => {
        input.value = '';
        input.classList.remove('input-highlighted', 'input-calculating');
      });
      
      Object.keys(debounceTimers).forEach(key => {
        clearTimeout(debounceTimers[key]);
        delete debounceTimers[key];
      });
      
      Object.values(spinners).forEach(spinner => spinner.classList.remove('visible'));
      
      currentActiveInput = null;
      lastCalculatedValues = {};
      copyBtn.classList.add('hidden');
      
      showToast('å·²æ¸…é™¤æ‰€æœ‰æ•¸å€¼', 'info');
      if (inputs.sqm) inputs.sqm.focus(); // Focus on the first input after clearing
    }
    
    /**
     * è¤‡è£½æ›ç®—çµæœåˆ°å‰ªè²¼ç°¿
     */
    async function copyResults() {
      if (Object.keys(lastCalculatedValues).length === 0 || !currentActiveInput) {
        showToast('æ²’æœ‰å¯è¤‡è£½çš„çµæœæˆ–æœªé€²è¡Œè¨ˆç®—', 'warning');
        return;
      }
      
      const unitNames = {
        sqm: 'å¹³æ–¹å…¬å°º', ping: 'åª', hectare: 'å…¬é ƒ', jia: 'ç”²',
        fen: 'åˆ†', are: 'å…¬ç•', acre: 'è‹±ç•', mu: 'å¸‚ç•'
      };
      
      let resultText = `ä»¥ ${inputs[currentActiveInput].value} ${unitNames[currentActiveInput]} ç‚ºåŸºæº–çš„æ›ç®—çµæœ:\n`;
      resultText += Object.entries(lastCalculatedValues)
        .map(([unit, value]) => {
          const formattedValue = parseFloat(value.toFixed(6));
          return `${unitNames[unit]}: ${formattedValue}`;
        })
        .join('\n');
      
      try {
        await navigator.clipboard.writeText(resultText);
        showToast('çµæœå·²è¤‡è£½ï¼', 'success');
      } catch (err) {
        console.error('è¤‡è£½å¤±æ•—:', err);
        showToast('è¤‡è£½å¤±æ•—ï¼Œç€è¦½å™¨å¯èƒ½ä¸æ”¯æ´æˆ–æœªæˆäºˆæ¬Šé™', 'error');
      }
    }

    // ===== äº‹ä»¶è™•ç†å™¨è¨­å®š =====
    const inputHandlers = {};
    
    function setActiveInput(activeUnit) {
      Object.values(inputs).forEach(input => input.classList.remove('input-highlighted'));
      inputs[activeUnit].classList.add('input-highlighted');
      currentActiveInput = activeUnit;
    }
    
    Object.entries(inputs).forEach(([unit, inputElement]) => {
      const debouncedCalculate = debounce(calculateConversions, DEBOUNCE_DELAY, unit);
      
      const handler = (e) => {
        const valueStr = e.target.value;
        setActiveInput(unit);

        if (valueStr === '' || valueStr === null) {
            // If field is cleared, clear others via calculateConversions with a non-positive value
            debouncedCalculate(unit, 0); // Or null, depending on how calculateConversions handles it
            return;
        }

        const value = parseFloat(valueStr);
        
        if (!isNaN(value) && value >= 0) { // Allow 0 for clearing other fields or calculating from 0
          // Clear other fields immediately for responsiveness before debounced calculation
          Object.entries(inputs).forEach(([otherUnit, otherInput]) => {
            if (otherUnit !== unit) {
              otherInput.removeEventListener('input', inputHandlers[otherUnit]);
              otherInput.value = ''; // Clear visually
              otherInput.addEventListener('input', inputHandlers[otherUnit]);
            }
          });
          debouncedCalculate(unit, value);
        } else if (isNaN(value)) { // Handle non-numeric input if necessary, e.g. clear others
            Object.entries(inputs).forEach(([otherUnit, otherInput]) => {
                if (otherUnit !== unit) {
                    otherInput.removeEventListener('input', inputHandlers[otherUnit]);
                    otherInput.value = '';
                    otherInput.addEventListener('input', inputHandlers[otherUnit]);
                }
            });
            copyBtn.classList.add('hidden'); // Hide copy if input is invalid
        }
      };
      
      inputHandlers[unit] = handler;
      inputElement.addEventListener('input', handler);
      inputElement.addEventListener('focus', () => setActiveInput(unit));
      // Removed touchend listener for focus as it can interfere with native behavior. Standard focus should work.
    });
    
    clearBtn.addEventListener('click', clearAllInputs);
    copyBtn.addEventListener('click', copyResults);

    // ===== ç§»å‹•ç‰ˆé€šçŸ¥ç³»çµ± =====
    function showToast(message, type = 'info') {
      const toast = document.getElementById('toast');
      const iconEl = document.getElementById('toast-icon'); // Renamed to avoid conflict
      const messageEl = document.getElementById('toast-message');
      
      const styles = {
        success: { iconClass: 'fa-check-circle', colorClass: 'text-accent-success' },
        error: { iconClass: 'fa-exclamation-circle', colorClass: 'text-accent-error' },
        warning: { iconClass: 'fa-exclamation-triangle', colorClass: 'text-accent-warning' },
        info: { iconClass: 'fa-info-circle', colorClass: 'text-primary-500' }
      };
      
      const style = styles[type] || styles.info;
      iconEl.className = `fas ${style.iconClass} ${style.colorClass}`;
      messageEl.textContent = message;
      
      toast.classList.add('visible');
      setTimeout(() => hideToast(), 3000);
    }
    
    function hideToast() {
      document.getElementById('toast').classList.remove('visible');
    }

    // ===== å½©è›‹åŠŸèƒ½ =====
    let easterEggClicks = 0;
    let easterEggTimeout;
    
    easterEgg.addEventListener('click', (e) => {
      e.preventDefault();
      easterEggClicks++;
      clearTimeout(easterEggTimeout);
      if (easterEggClicks >= 3) {
        showEasterEgg();
        easterEggClicks = 0;
      } else {
        easterEggTimeout = setTimeout(() => easterEggClicks = 0, 1000);
      }
    });
    
    let keySequence = '';
    document.addEventListener('keydown', (e) => {
      if (document.activeElement && ['input', 'textarea'].includes(document.activeElement.tagName.toLowerCase())) return;
      keySequence += e.key.toLowerCase();
      if (keySequence.length > 4) keySequence = keySequence.slice(-4);
      if (keySequence === 'area') {
        showEasterEgg();
        keySequence = '';
      }
      if (e.key === 'Escape' && easterModal.classList.contains('active')) closeEasterEgg();
    });
    
    function showEasterEgg() {
      easterModal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }
    
    function closeEasterEgg() {
      easterModal.classList.remove('active');
      document.body.style.overflow = '';
    }
    
    function generateRandomConversion() {
      const unitsArray = Object.keys(inputs);
      const randomUnit = unitsArray[Math.floor(Math.random() * unitsArray.length)];
      const randomValue = parseFloat((Math.random() * (1000 - 1) + 1).toFixed(4)); // Random value between 1 and 1000
      
      clearAllInputs(); // Clear first
      
      inputs[randomUnit].value = randomValue;
      setActiveInput(randomUnit); // Set active before triggering calculation
      
      // Manually trigger the calculation for the specific input
      // This bypasses debounce for immediate effect in the easter egg
      calculateConversions(randomUnit, randomValue); 
      
      closeEasterEgg();
      showToast(`éš¨æ©Ÿæ›ç®—: ${randomValue} ${inputs[randomUnit].labels[0].innerText.trim()}`, 'success');
    }
    
    easterModal.addEventListener('click', (e) => {
      if (e.target === easterModal) closeEasterEgg();
    });

    // ===== ç§»å‹•è£ç½®å„ªåŒ– =====
    let lastTouchEndPreventDoubleZoom = 0;
    document.addEventListener('touchend', function (event) {
      const now = Date.now();
      if (now - lastTouchEndPreventDoubleZoom <= 300) {
        event.preventDefault();
      }
      lastTouchEndPreventDoubleZoom = now;
    }, { passive: false }); // passive:false for preventDefault
    
    document.addEventListener('touchmove', function(e) {
      if (e.touches.length > 1 && document.body.classList.contains('no-zoom')) { // Only if no-zoom is active
        e.preventDefault();
      }
    }, { passive: false });
    
    window.addEventListener('orientationchange', () => {
      setTimeout(() => window.scrollTo(0,0) , 200); // Delay scroll to allow layout reflow
    });
    
    document.addEventListener('visibilitychange', () => {
      if (document.hidden) {
        Object.keys(debounceTimers).forEach(key => {
          clearTimeout(debounceTimers[key]);
          delete debounceTimers[key];
        });
      }
    });

    // ===== åˆå§‹åŒ– =====
    document.addEventListener('DOMContentLoaded', () => {
      if (inputs.sqm) {
        inputs.sqm.focus();
        setActiveInput('sqm'); // Set sqm as active input by default
      }
      
      setTimeout(() => showToast('è¼¸å…¥æ•¸å€¼å³å¯è‡ªå‹•æ›ç®—é¢ç©', 'info'), 1000);
      
      if ('ontouchstart' in window || navigator.maxTouchPoints > 0) {
        document.body.classList.add('touch-device');
      }
    });
    
  </script>

</body>
</html>
