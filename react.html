<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <title>前端學習平台 - 多選篩選 + 單行搜尋示例</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Google 字體 -->
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <!-- Font Awesome 圖示 -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      :root {
        --primary: #4361ee;
        --primary-light: #4895ef;
        --primary-dark: #3a0ca3;
        --success: #4cc9f0;
        --warning: #f8961e;
        --danger: #f94144;
        --gray-100: #f8f9fa;
        --gray-200: #e9ecef;
        --gray-300: #dee2e6;
        --gray-400: #ced4da;
        --gray-500: #adb5bd;
        --gray-600: #6c757d;
        --gray-700: #495057;
        --gray-800: #343a40;
        --gray-900: #212529;
        --card-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        --header-height: 140px; /* 方便主內容上方距離計算 */
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Noto Sans TC", sans-serif;
      }

      body {
        background: var(--gray-100);
        color: var(--gray-800);
        line-height: 1.6;
        overflow-x: hidden;
      }

      /* ===== Header ===== */
      header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 1500;
      }
      .header-top {
        background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        padding: 0.8rem 2rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
      }
      .logo {
        display: flex;
        align-items: center;
        gap: 0.6rem;
        color: #fff;
        font-size: 1.3rem;
        font-weight: 700;
        text-decoration: none;
        transition: transform 0.3s;
      }
      .logo:hover {
        transform: translateY(-2px);
      }
      .logo i {
        font-size: 1.4rem;
        color: var(--success);
        animation: float 3s ease-in-out infinite; /* 小浮動 */
      }

      /* 桌機導覽 */
      .nav-links {
        display: flex;
        gap: 1.8rem;
      }
      .nav-links a {
        color: rgba(255, 255, 255, 0.9);
        text-decoration: none;
        font-size: 0.95rem;
        font-weight: 500;
        position: relative;
        padding: 0.2rem 0;
        transition: color 0.3s;
      }
      .nav-links a:hover {
        color: #fff;
      }

      /* 漢堡按鈕(手機) */
      .hamburger {
        width: 30px;
        height: 22px;
        display: none;
        position: relative;
        cursor: pointer;
      }
      .hamburger span {
        position: absolute;
        width: 100%;
        height: 3px;
        background: #fff;
        left: 0;
        transition: all 0.3s;
        border-radius: 2px;
      }
      .hamburger span:nth-child(1) {
        top: 0;
      }
      .hamburger span:nth-child(2) {
        top: 50%;
        transform: translateY(-50%);
      }
      .hamburger span:nth-child(3) {
        bottom: 0;
      }
      .hamburger.active span:nth-child(1) {
        transform: rotate(45deg);
        top: 10px;
      }
      .hamburger.active span:nth-child(2) {
        opacity: 0;
        transform: translateX(-20px);
      }
      .hamburger.active span:nth-child(3) {
        transform: rotate(-45deg);
        bottom: 10px;
      }

      /* 手機導覽 */
      .mobile-nav {
        display: none;
        background: linear-gradient(to right, var(--primary-dark), var(--primary));
        flex-direction: column;
        gap: 0.8rem;
        padding: 1rem 2rem;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }
      .mobile-nav a {
        color: #fff;
        text-decoration: none;
        font-size: 1rem;
        font-weight: 500;
        padding: 0.5rem 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }
      .mobile-nav.show {
        display: flex;
      }

      /* 單行搜尋列 + 篩選按鈕 */
      .filter-bar {
        display: flex;
        align-items: center;
        justify-content: flex-end;
        background: #fff;
        padding: 0.8rem 2rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.04);
        gap: 0.8rem;
      }
      .filter-bar button {
        background: var(--primary);
        color: #fff;
        border: none;
        border-radius: 6px;
        padding: 0.5rem 1rem;
        font-size: 0.9rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        gap: 0.4rem;
      }
      .filter-bar button:hover {
        background: var(--primary-dark);
        transform: translateY(-2px);
      }
      .filter-bar button:active {
        transform: translateY(0);
      }
      .filter-bar input {
        border: 1px solid var(--gray-300);
        border-radius: 6px;
        padding: 0.5rem 0.8rem;
        font-size: 0.9rem;
        outline: none;
        transition: all 0.3s;
        width: 240px; /* 預設寬度 */
      }
      .filter-bar input:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.15);
      }

      /* ===== 左側多選篩選面板 ===== */
      .filter-panel {
        position: fixed;
        top: var(--header-height);
        left: 0;
        width: 250px;
        height: calc(100vh - var(--header-height));
        background: #fff;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
        padding: 1rem;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
        z-index: 1400;
      }
      .filter-panel.show {
        transform: translateX(0);
      }
      .filter-panel-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 1rem;
      }
      .filter-panel-header h4 {
        font-size: 1rem;
        color: var(--primary-dark);
      }
      .close-filter {
        background: none;
        border: none;
        color: var(--gray-600);
        font-size: 1.2rem;
        cursor: pointer;
      }
      .filter-panel section {
        margin-bottom: 1.5rem;
      }
      .filter-panel section h5 {
        font-size: 0.95rem;
        color: var(--gray-700);
        margin-bottom: 0.5rem;
        border-bottom: 1px solid var(--gray-300);
        padding-bottom: 0.3rem;
      }
      .category-list,
      .level-list {
        display: flex;
        flex-direction: column;
        gap: 0.4rem;
      }
      .checkbox-item {
        display: flex;
        align-items: center;
        gap: 0.4rem;
      }
      .checkbox-item input[type="checkbox"] {
        cursor: pointer;
      }
      .checkbox-item label {
        font-size: 0.85rem;
        color: var(--gray-700);
        cursor: pointer;
      }
      .apply-filter {
        width: 100%;
        background: var(--primary);
        color: #fff;
        border: none;
        border-radius: 6px;
        padding: 0.6rem;
        font-size: 0.9rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s;
      }
      .apply-filter:hover {
        background: var(--primary-dark);
      }

      /* Main 內容 */
      main {
        max-width: 1300px;
        margin: 0 auto;
        padding: 2rem;
        margin-top: calc(var(--header-height) + 2rem);
      }
      .section-header {
        margin-bottom: 2rem;
      }
      .section-title {
        font-size: 1.8rem;
        margin-bottom: 0.8rem;
        color: var(--primary-dark);
        position: relative;
        display: inline-block;
      }
      .section-title::after {
        content: "";
        position: absolute;
        bottom: -6px;
        left: 0;
        width: 70px;
        height: 4px;
        background: linear-gradient(to right, var(--primary), var(--success));
        border-radius: 2px;
      }
      .section-overview {
        font-size: 1rem;
        color: var(--gray-700);
        margin-bottom: 1.5rem;
        background: #fff;
        border-left: 4px solid var(--primary);
        padding: 1rem 1.2rem;
        border-radius: 6px;
        box-shadow: var(--card-shadow);
        line-height: 1.6;
      }

      /* 卡片容器 */
      .card-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1.5rem;
      }
      .card {
        background-color: #fff;
        border-radius: 12px;
        box-shadow: var(--card-shadow);
        padding: 1.5rem;
        display: flex;
        flex-direction: column;
        transition: all 0.3s;
        position: relative;
        overflow: hidden;
        height: 100%;
      }
      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }
      .card-header {
        display: flex;
        align-items: center;
        gap: 0.8rem;
        margin-bottom: 1rem;
      }
      .card-icon {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(67, 97, 238, 0.1);
        font-size: 1.2rem;
        border-radius: 10px;
      }
      .card-header h3 {
        font-size: 1.1rem;
        color: var(--primary-dark);
        flex: 1;
        transition: color 0.3s;
      }
      .card:hover .card-header h3 {
        color: var(--primary);
      }
      .level-tag {
        font-size: 0.7rem;
        color: #fff;
        border-radius: 30px;
        padding: 0.2rem 0.7rem;
        font-weight: 500;
        text-transform: uppercase;
      }
      .level-tag.beginner {
        background: linear-gradient(to right, #4cc9f0, #4895ef);
      }
      .level-tag.intermediate {
        background: linear-gradient(to right, #f8961e, #f3722c);
      }
      .level-tag.advanced {
        background: linear-gradient(to right, #f72585, #b5179e);
      }

      .desc {
        font-size: 0.95rem;
        color: var(--gray-700);
        margin-bottom: 1rem;
        line-height: 1.6;
      }

      /* 進度條 */
      .progress-section {
        margin-bottom: 1rem;
      }
      .progress-label {
        font-size: 0.85rem;
        color: var(--gray-700);
        font-weight: 500;
        margin-bottom: 0.4rem;
      }
      .progress-bar {
        width: 100%;
        background-color: var(--gray-200);
        height: 8px;
        border-radius: 4px;
        overflow: hidden;
      }
      .progress-bar-fill {
        height: 100%;
        background: linear-gradient(to right, var(--primary), var(--primary-light));
        width: 0;
        transition: width 1s;
        border-radius: 4px;
      }

      /* 關鍵字 */
      .keyword-list {
        margin: auto 0 1rem 0;
        display: flex;
        flex-wrap: wrap;
        gap: 0.4rem;
      }
      .keyword-pill {
        background: var(--gray-100);
        color: var(--gray-700);
        border-radius: 30px;
        font-size: 0.75rem;
        padding: 0.25rem 0.7rem;
        cursor: pointer;
        border: 1px solid var(--gray-200);
        transition: all 0.3s;
      }
      .keyword-pill:hover {
        background: var(--primary-light);
        color: #fff;
        transform: translateY(-2px);
      }

      /* 按鈕區 */
      .btn-area {
        display: flex;
        gap: 0.7rem;
        margin-top: auto;
      }
      .btn {
        background-color: #fff;
        color: var(--primary);
        border: 1px solid var(--primary);
        border-radius: 6px;
        padding: 0.5rem 1rem;
        font-size: 0.85rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s;
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.4rem;
      }
      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(67, 97, 238, 0.2);
      }
      .btn:active {
        transform: translateY(0);
      }

      /* Toast */
      .toast-container {
        position: fixed;
        top: 100px;
        right: 20px;
        display: flex;
        flex-direction: column;
        gap: 0.8rem;
        z-index: 3000;
      }
      .toast {
        background-color: #fff;
        color: var(--gray-800);
        padding: 0.8rem 1rem;
        border-radius: 8px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
        font-size: 0.9rem;
        display: flex;
        align-items: center;
        gap: 0.7rem;
        min-width: 280px;
        border-left: 4px solid var(--primary);
        animation: fadeIn 0.3s forwards; /* 進入 */
      }
      @keyframes fadeIn {
        from { opacity: 0; transform: translateX(10px); }
        to { opacity: 1; transform: translateX(0); }
      }

      /* Modal */
      .modal-backdrop {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: rgba(0, 0, 0, 0.5);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 4000;
        backdrop-filter: blur(5px);
        opacity: 0;
        transition: opacity 0.3s;
      }
      .modal-backdrop.show {
        opacity: 1;
      }
      .modal-content {
        background: #fff;
        border-radius: 12px;
        width: 90%;
        max-width: 800px;
        max-height: 85vh;
        overflow-y: auto;
        box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
        transform: translateY(30px);
        transition: all 0.4s;
      }
      .modal-backdrop.show .modal-content {
        transform: translateY(0);
      }
      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1.5rem;
        border-bottom: 1px solid var(--gray-200);
        background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        color: #fff;
        border-radius: 12px 12px 0 0;
      }
      .modal-header h4 {
        font-size: 1.2rem;
        font-weight: 600;
      }
      .close-btn {
        background: rgba(255, 255, 255, 0.2);
        border: none;
        width: 30px;
        height: 30px;
        font-size: 1.2rem;
        cursor: pointer;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #fff;
        transition: all 0.3s;
      }
      .close-btn:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: rotate(90deg);
      }
      .modal-body {
        padding: 1.5rem;
      }
      .info-block {
        background: var(--gray-100);
        border-left: 4px solid var(--primary);
        border-radius: 6px;
        padding: 1rem;
        margin-bottom: 1.5rem;
      }
      .prompt-block {
        background: #fff;
        border: 1px solid var(--gray-300);
        border-radius: 6px;
        padding: 1rem;
        margin-bottom: 1rem;
      }
      .copy-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.4rem;
        background-color: var(--gray-100);
        color: var(--gray-700);
        border: 1px solid var(--gray-300);
        padding: 0.3rem 0.7rem;
        border-radius: 4px;
        font-size: 0.8rem;
        cursor: pointer;
        transition: all 0.3s;
      }
      .copy-btn:hover {
        background-color: var(--primary);
        color: #fff;
        border-color: var(--primary);
      }
      .field-block {
        background: #fff;
        border: 1px solid var(--gray-300);
        border-radius: 6px;
        padding: 1rem;
        margin-bottom: 1.5rem;
      }
      .field-block label {
        display: block;
        font-size: 0.9rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: var(--gray-800);
      }
      .field-block textarea {
        width: 100%;
        min-height: 80px;
        border: 1px solid var(--gray-300);
        border-radius: 6px;
        padding: 0.7rem;
        font-size: 0.9rem;
        resize: vertical;
        transition: all 0.3s;
      }
      .field-block textarea:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.15);
        outline: none;
      }

      /* Footer */
      footer {
        text-align: center;
        font-size: 0.85rem;
        color: var(--gray-600);
        margin-top: 4rem;
        padding: 2rem 0;
        background: var(--gray-100);
        border-top: 1px solid var(--gray-200);
      }
      .footer-content {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 2rem;
      }
      .footer-links {
        display: flex;
        justify-content: center;
        gap: 1.5rem;
        margin-bottom: 1rem;
      }
      .footer-links a {
        color: var(--gray-700);
        text-decoration: none;
        transition: color 0.3s;
      }
      .footer-links a:hover {
        color: var(--primary);
      }
      .social-links {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin: 1rem 0;
      }
      .social-icon {
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #fff;
        color: var(--primary);
        border-radius: 50%;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        transition: all 0.3s;
      }
      .social-icon:hover {
        background: var(--primary);
        color: #fff;
        transform: translateY(-3px);
      }

      /* RWD */
      @media (max-width: 768px) {
        .nav-links {
          display: none;
        }
        .hamburger {
          display: block;
        }
        .filter-bar {
          padding: 0.8rem 1rem;
        }
        .filter-bar input {
          width: 160px;
        }
        main {
          margin-top: calc(var(--header-height) + 1rem);
          padding: 1rem;
        }
      }
      @media (max-width: 576px) {
        .filter-bar {
          padding: 0.8rem;
        }
        .filter-bar input {
          width: 120px; /* 更小 */
        }
      }
    </style>
  </head>
  <body>
    <!-- 左側篩選面板 -->
    <div class="filter-panel" id="filterPanel">
      <div class="filter-panel-header">
        <h4>篩選</h4>
        <button class="close-filter" id="closeFilterBtn">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <!-- 多選：分類 -->
      <section>
        <h5>分類 (可多選)</h5>
        <div class="category-list" id="categoryList"></div>
      </section>
      <!-- 多選：等級 -->
      <section>
        <h5>等級 (可多選)</h5>
        <div class="level-list">
          <div class="checkbox-item">
            <input type="checkbox" id="level-beginner" value="beginner" />
            <label for="level-beginner">初階</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="level-intermediate" value="intermediate" />
            <label for="level-intermediate">中階</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="level-advanced" value="advanced" />
            <label for="level-advanced">高階</label>
          </div>
        </div>
      </section>
      <button class="apply-filter" id="applyFilterBtn">套用篩選</button>
    </div>

    <header>
      <!-- 頂部：LOGO、桌機導航、漢堡(手機) -->
      <div class="header-top">
        <a href="#" class="logo">
          <i class="fas fa-code"></i>
          <span>前端學習平台</span>
        </a>
        <!-- 桌機導覽 -->
        <nav class="nav-links" id="desktopNav">
          <a href="#learning"><i class="fas fa-road"></i> 學習路徑</a>
          <a href="#practical"><i class="fas fa-laptop-code"></i> 實戰應用</a>
          <a href="#functionality"><i class="fas fa-puzzle-piece"></i> 功能實現</a>
          <a href="#integrated"><i class="fas fa-project-diagram"></i> 綜合應用</a>
        </nav>
        <!-- 漢堡(手機) -->
        <div class="hamburger" id="hamburgerBtn">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
      <!-- 手機導覽 -->
      <nav class="mobile-nav" id="mobileNav">
        <a href="#learning"><i class="fas fa-road"></i> 學習路徑</a>
        <a href="#practical"><i class="fas fa-laptop-code"></i> 實戰應用</a>
        <a href="#functionality"><i class="fas fa-puzzle-piece"></i> 功能實現</a>
        <a href="#integrated"><i class="fas fa-project-diagram"></i> 綜合應用</a>
      </nav>

      <!-- 單行 搜尋 + 篩選按鈕 -->
      <div class="filter-bar">
        <button id="toggleFilterBtn">
          <i class="fas fa-filter"></i> 篩選
        </button>
        <input
          type="text"
          id="searchInput"
          placeholder="搜尋標題、描述或關鍵字..."
        />
        <button id="searchBtn">
          <i class="fas fa-search"></i> 搜尋
        </button>
      </div>
    </header>

    <main>
      <!-- 學習路徑 -->
      <section id="learning">
        <div class="section-header">
          <h2 class="section-title">學習路徑 (Learning)</h2>
        </div>
        <div id="learning-overview" class="section-overview"></div>
        <div class="card-grid" id="learning-container"></div>
      </section>

      <!-- 實戰應用 -->
      <section id="practical">
        <div class="section-header">
          <h2 class="section-title">實戰應用 (Practical)</h2>
        </div>
        <div id="practical-overview" class="section-overview"></div>
        <div class="card-grid" id="practical-container"></div>
      </section>

      <!-- 功能實現 -->
      <section id="functionality">
        <div class="section-header">
          <h2 class="section-title">功能實現 (Functionality)</h2>
        </div>
        <div id="functionality-overview" class="section-overview"></div>
        <div class="card-grid" id="functionality-container"></div>
      </section>

      <!-- 綜合應用 -->
      <section id="integrated">
        <div class="section-header">
          <h2 class="section-title">綜合應用 (Integrated)</h2>
        </div>
        <div id="integrated-overview" class="section-overview"></div>
        <div class="card-grid" id="integrated-container"></div>
      </section>
    </main>

    <!-- Toast -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Modal 詳細內容 -->
    <div class="modal-backdrop" id="modalBackdrop">
      <div class="modal-content">
        <div class="modal-header">
          <h4 id="modalTitle">詳細內容</h4>
          <button class="close-btn" id="closeModal"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body" id="modalBody"></div>
      </div>
    </div>

    <footer>
      <div class="footer-content">
        <div class="footer-links">
          <a href="#">關於我們</a>
          <a href="#">服務條款</a>
          <a href="#">隱私政策</a>
        </div>
        <div class="social-links">
          <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
          <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
          <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
        </div>
        <p>&copy; 2025 前端學習平台 - 多選篩選 + 單行搜尋示例 All rights reserved.</p>
      </div>
    </footer>

    <script>
      // 手機漢堡
      const hamburgerBtn = document.getElementById("hamburgerBtn");
      const mobileNav = document.getElementById("mobileNav");
      hamburgerBtn.addEventListener("click", () => {
        hamburgerBtn.classList.toggle("active");
        mobileNav.classList.toggle("show");
      });

      // 左側篩選面板
      const filterPanel = document.getElementById("filterPanel");
      const toggleFilterBtn = document.getElementById("toggleFilterBtn");
      const closeFilterBtn = document.getElementById("closeFilterBtn");
      const applyFilterBtn = document.getElementById("applyFilterBtn");

      toggleFilterBtn.addEventListener("click", () => {
        filterPanel.classList.add("show");
      });
      closeFilterBtn.addEventListener("click", () => {
        filterPanel.classList.remove("show");
      });
      applyFilterBtn.addEventListener("click", () => {
        filterPanel.classList.remove("show");
        handleSearchAndFilter();
      });

      // Toast
      function showToast(msg) {
        const container = document.getElementById("toastContainer");
        const toast = document.createElement("div");
        toast.className = "toast";
        toast.textContent = msg;
        container.appendChild(toast);
        setTimeout(() => {
          container.removeChild(toast);
        }, 3000);
      }

      // Modal
      const modalBackdrop = document.getElementById("modalBackdrop");
      const closeModalBtn = document.getElementById("closeModal");
      const modalTitle = document.getElementById("modalTitle");
      const modalBody = document.getElementById("modalBody");

      function openModal(item) {
        modalTitle.textContent = `#${item.number} ${item.title}`;
        modalBody.innerHTML = "";

        // info-block
        const infoDiv = document.createElement("div");
        infoDiv.className = "info-block";

        if (item.description) {
          const p = document.createElement("p");
          p.innerHTML = `<strong>描述：</strong>${item.description}`;
          infoDiv.appendChild(p);
        }
        if (item.category) {
          const p = document.createElement("p");
          p.innerHTML = `<strong>分類：</strong>${item.category}`;
          infoDiv.appendChild(p);
        }
        if (item.level) {
          const p = document.createElement("p");
          p.innerHTML = `<strong>等級：</strong>${levelToZh(item.level)}`;
          infoDiv.appendChild(p);
        }
        if (Array.isArray(item.keywords)) {
          const p = document.createElement("p");
          p.innerHTML = `<strong>關鍵字：</strong>${item.keywords.join(", ")}`;
          infoDiv.appendChild(p);
        }
        if (item.suggestedTimeline) {
          const p = document.createElement("p");
          p.innerHTML = `<strong>建議時程：</strong>${item.suggestedTimeline}`;
          infoDiv.appendChild(p);
        }
        if (item.lastUpdated) {
          const p = document.createElement("p");
          p.innerHTML = `<strong>最後更新：</strong>${item.lastUpdated}`;
          infoDiv.appendChild(p);
        }
        if (item.applicationScenarios) {
          const p = document.createElement("p");
          p.innerHTML = `<strong>應用場景：</strong>${item.applicationScenarios.join("、")}`;
          infoDiv.appendChild(p);
        }

        modalBody.appendChild(infoDiv);

        // prompt
        if (item.prompt) {
          const promptBlock = document.createElement("div");
          promptBlock.className = "prompt-block";
          promptBlock.innerHTML = `
            <strong>Prompt：</strong><br>
            <p style="margin-top:0.3rem;">${item.prompt}</p>
          `;
          modalBody.appendChild(promptBlock);

          // 複製按鈕(帶狀態變化)
          const copyBtn = document.createElement("button");
          copyBtn.className = "copy-btn";
          copyBtn.textContent = "複製 Prompt";
          copyBtn.addEventListener("click", () => {
            navigator.clipboard.writeText(item.prompt)
              .then(() => {
                showToast("已複製 Prompt");
                copyBtn.textContent = "已複製";
                copyBtn.style.backgroundColor = "var(--primary)";
                copyBtn.style.color = "#fff";
                copyBtn.style.borderColor = "var(--primary)";
                setTimeout(() => {
                  copyBtn.textContent = "複製 Prompt";
                  copyBtn.removeAttribute("style");
                }, 2000);
              })
              .catch((err) => console.error("複製失敗:", err));
          });
          modalBody.appendChild(copyBtn);
        }

        // requiredInfo
        if (Array.isArray(item.requiredInfo) && item.requiredInfo.length > 0) {
          item.requiredInfo.forEach((field) => {
            const fb = document.createElement("div");
            fb.className = "field-block";
            fb.innerHTML = `
              <label>[${field}]</label>
              <textarea placeholder="請輸入 ${field}..."></textarea>
            `;
            modalBody.appendChild(fb);
          });
        }

        modalBackdrop.style.display = "flex";
        modalBackdrop.classList.add("show");
      }

      function closeModal() {
        modalBackdrop.classList.remove("show");
        modalBackdrop.style.display = "none";
      }
      closeModalBtn.addEventListener("click", closeModal);
      modalBackdrop.addEventListener("click", (e) => {
        if (e.target === modalBackdrop) {
          closeModal();
        }
      });

      // 等級轉中文
      function levelToZh(lv) {
        switch (lv) {
          case "beginner":
            return "初階";
          case "intermediate":
            return "中階";
          case "advanced":
            return "高階";
          default:
            return lv;
        }
      }

      // 分類對應到 JSON 中所有可能出現的 category，並給中文解釋
      const categories = [
        { value: "HTML", label: "HTML (網頁結構)" },
        { value: "CSS", label: "CSS (樣式設計)" },
        { value: "JavaScript", label: "JavaScript (程式邏輯)" },
        { value: "React", label: "React (前端框架)" },
        { value: "Vue", label: "Vue (前端框架)" },
        { value: "Tools", label: "Tools (開發工具)" },
        { value: "Backend", label: "Backend (後端)" },
        { value: "DevOps", label: "DevOps (自動化流程)" },
        { value: "Performance", label: "Performance (效能優化)" },
        { value: "Testing", label: "Testing (測試)" },
        { value: "AI", label: "AI (人工智慧)" },
        { value: "Web Development", label: "Web Development (網頁開發)" },
        { value: "E-commerce", label: "E-commerce (電商)" },
        { value: "Education", label: "Education (教育平台)" },
        { value: "Social Media", label: "Social Media (社交媒體)" },
        { value: "Productivity", label: "Productivity (效率工具)" },
        { value: "Booking", label: "Booking (預約/票務)" },
        { value: "Business", label: "Business (企業應用)" },
        { value: "Customer Support", label: "Customer Support (客服)" },
        { value: "Communication", label: "Communication (通訊)" },
        { value: "Community", label: "Community (社群/論壇)" },
        { value: "Travel", label: "Travel (旅遊)" },
        { value: "Data Visualization", label: "Data Visualization (數據視覺化)" },
        { value: "Content Management", label: "Content Management (內容管理)" },
        { value: "Survey", label: "Survey (投票/調查)" },
        { value: "Healthcare", label: "Healthcare (醫療)" },
        { value: "Portfolio", label: "Portfolio (作品集)" },
        { value: "No-Code", label: "No-Code (零程式設計)" },
        { value: "IoT", label: "IoT (物聯網)" },
        { value: "Full Stack", label: "Full Stack (全端)" },
        { value: "Architecture", label: "Architecture (架構)" },
        { value: "Build Tools", label: "Build Tools (構建工具)" },
        { value: "State Management", label: "State Management (狀態管理)" },
        { value: "Visualization", label: "Visualization (可視化/3D)" },
        { value: "Payment", label: "Payment (支付/結帳)" },
        { value: "Desktop", label: "Desktop (桌面應用)" },
        { value: "Multimedia", label: "Multimedia (多媒體)" },
      ];

      // 動態填入 categoryList
      const categoryListEl = document.getElementById("categoryList");
      categories.forEach((cat) => {
        const div = document.createElement("div");
        div.className = "checkbox-item";
        const inputId = `cat-${cat.value.replace(/\s/g, "")}`;
        div.innerHTML = `
          <input type="checkbox" id="${inputId}" value="${cat.value}" />
          <label for="${inputId}">${cat.label}</label>
        `;
        categoryListEl.appendChild(div);
      });

      // 解析"第X週"
      function parseTimeline(str) {
        if (!str) return 0;
        const match = str.match(/第\s*(\d+)\s*週/);
        if (!match) return 0;
        const w = parseInt(match[1], 10);
        let ratio = (w / 12) * 100;
        if (ratio > 100) ratio = 100;
        return ratio;
      }

      // ICON map (對應 category)
      const categoryIconMap = {
        HTML: { icon: "fab fa-html5", color: "#e34f26" },
        CSS: { icon: "fab fa-css3-alt", color: "#2965f1" },
        JavaScript: { icon: "fab fa-js", color: "#f7df1e" },
        React: { icon: "fab fa-react", color: "#61dafb" },
        Vue: { icon: "fab fa-vuejs", color: "#41b883" },
        Tools: { icon: "fas fa-tools", color: "#7c7c7c" },
        Backend: { icon: "fas fa-server", color: "#6b6b6b" },
        DevOps: { icon: "fas fa-cogs", color: "#bc67e2" },
        Performance: { icon: "fas fa-tachometer-alt", color: "#ff5722" },
        Testing: { icon: "fas fa-vial", color: "#8e44ad" },
        AI: { icon: "fas fa-robot", color: "#ff8c00" },
        "Web Development": { icon: "fas fa-globe", color: "#3498db" },
        "E-commerce": { icon: "fas fa-shopping-cart", color: "#28a745" },
        Education: { icon: "fas fa-book-reader", color: "#607d8b" },
        "Social Media": { icon: "fas fa-users", color: "#9c27b0" },
        Productivity: { icon: "fas fa-tasks", color: "#795548" },
        Booking: { icon: "fas fa-calendar-check", color: "#f44336" },
        Business: { icon: "fas fa-briefcase", color: "#1E90FF" },
        "Customer Support": { icon: "fas fa-headset", color: "#32CD32" },
        Communication: { icon: "fas fa-comments", color: "#ffa500" },
        Community: { icon: "fas fa-users-cog", color: "#ff9800" },
        Travel: { icon: "fas fa-map-marked-alt", color: "#228B22" },
        "Data Visualization": { icon: "fas fa-chart-bar", color: "#20b2aa" },
        "Content Management": { icon: "fas fa-pen-nib", color: "#696969" },
        Survey: { icon: "fas fa-poll", color: "#1E90FF" },
        Healthcare: { icon: "fas fa-notes-medical", color: "#4169E1" },
        Portfolio: { icon: "fas fa-address-card", color: "#800080" },
        "No-Code": { icon: "fas fa-magic", color: "#7f7f7f" },
        IoT: { icon: "fas fa-microchip", color: "#20B2AA" },
        "Full Stack": { icon: "fas fa-layer-group", color: "#2e6cff" },
        Architecture: { icon: "fas fa-sitemap", color: "#37474f" },
        "Build Tools": { icon: "fas fa-hammer", color: "#888" },
        "State Management": { icon: "fas fa-exchange-alt", color: "#f3722c" },
        Visualization: { icon: "fas fa-cube", color: "#ff5722" },
        Payment: { icon: "fas fa-credit-card", color: "#32CD32" },
        Desktop: { icon: "fas fa-desktop", color: "#696969" },
        Multimedia: { icon: "fas fa-play-circle", color: "#FF4500" },
        default: { icon: "fas fa-layer-group", color: "#4361ee" }
      };

      // 建立卡片
      function createCard(item) {
        const card = document.createElement("div");
        card.className = "card";

        const header = document.createElement("div");
        header.className = "card-header";

        // icon
        const catObj = categoryIconMap[item.category] || categoryIconMap.default;
        const iconEl = document.createElement("i");
        iconEl.className = catObj.icon;
        iconEl.style.color = catObj.color;
        iconEl.style.fontSize = "1.2rem";
        iconEl.style.minWidth = "40px";
        header.appendChild(iconEl);

        // title
        const h3 = document.createElement("h3");
        h3.textContent = `${item.number}. ${item.title}`;
        header.appendChild(h3);

        // level-tag
        if (item.level) {
          const lvSpan = document.createElement("span");
          lvSpan.classList.add("level-tag", item.level);
          lvSpan.textContent = levelToZh(item.level);
          header.appendChild(lvSpan);
        }
        card.appendChild(header);

        // desc
        const desc = document.createElement("div");
        desc.className = "desc";
        desc.textContent = item.description || "";
        card.appendChild(desc);

        // progress
        if (item.suggestedTimeline) {
          const progSec = document.createElement("div");
          progSec.className = "progress-section";

          const label = document.createElement("div");
          label.className = "progress-label";
          label.textContent = item.suggestedTimeline;
          progSec.appendChild(label);

          const bar = document.createElement("div");
          bar.className = "progress-bar";
          const fill = document.createElement("div");
          fill.className = "progress-bar-fill";
          fill.style.width = parseTimeline(item.suggestedTimeline) + "%";
          bar.appendChild(fill);
          progSec.appendChild(bar);

          card.appendChild(progSec);
        }

        // keywords
        if (Array.isArray(item.keywords) && item.keywords.length > 0) {
          const kwList = document.createElement("div");
          kwList.className = "keyword-list";
          item.keywords.forEach((kw) => {
            const pill = document.createElement("span");
            pill.className = "keyword-pill";
            pill.textContent = kw;
            pill.addEventListener("click", () => {
              document.getElementById("searchInput").value = kw;
              handleSearchAndFilter();
            });
            kwList.appendChild(pill);
          });
          card.appendChild(kwList);
        }

        // btn-area
        const btnArea = document.createElement("div");
        btnArea.className = "btn-area";

        const detailBtn = document.createElement("button");
        detailBtn.className = "btn";
        detailBtn.textContent = "檢視詳情";
        detailBtn.addEventListener("click", () => openModal(item));
        btnArea.appendChild(detailBtn);

        if (item.prompt) {
          const copyBtn = document.createElement("button");
          copyBtn.className = "btn";
          copyBtn.textContent = "複製 Prompt";
          copyBtn.addEventListener("click", () => {
            navigator.clipboard.writeText(item.prompt)
              .then(() => {
                showToast("已複製 Prompt");
                // 狀態變色
                copyBtn.textContent = "已複製";
                copyBtn.style.backgroundColor = "var(--primary)";
                copyBtn.style.color = "#fff";
                copyBtn.style.borderColor = "var(--primary)";
                setTimeout(() => {
                  copyBtn.textContent = "複製 Prompt";
                  copyBtn.removeAttribute("style");
                }, 2000);
              })
              .catch((err) => console.error("複製失敗:", err));
          });
          btnArea.appendChild(copyBtn);
        }

        card.appendChild(btnArea);
        return card;
      }

      // 渲染
      function renderCards(containerId, items) {
        const container = document.getElementById(containerId);
        container.innerHTML = "";
        items.forEach((obj) => {
          const cardElem = createCard(obj);
          container.appendChild(cardElem);
        });
      }

      // 搜尋 & 篩選
      let dataLearning = [];
      let dataPractical = [];
      let dataFunctionality = [];
      let dataIntegrated = [];

      function handleSearchAndFilter() {
        const searchVal = document.getElementById("searchInput").value.trim().toLowerCase();

        // 收集多選 category
        const checkedCat = Array.from(
          document.querySelectorAll(".category-list input[type='checkbox']:checked")
        ).map((cb) => cb.value);

        // 收集多選 level
        const checkedLvl = Array.from(
          document.querySelectorAll(".level-list input[type='checkbox']:checked")
        ).map((cb) => cb.value);

        const matchFn = (item) => {
          // 關鍵字
          if (searchVal) {
            const text = (item.title || "") + (item.description || "") + (item.keywords || []) + (item.category || "");
            if (!text.toLowerCase().includes(searchVal)) return false;
          }
          // 分類多選
          if (checkedCat.length > 0 && !checkedCat.includes(item.category)) {
            return false;
          }
          // 等級多選
          if (checkedLvl.length > 0 && !checkedLvl.includes(item.level)) {
            return false;
          }
          return true;
        };

        renderCards("learning-container", dataLearning.filter(matchFn));
        renderCards("practical-container", dataPractical.filter(matchFn));
        renderCards("functionality-container", dataFunctionality.filter(matchFn));
        renderCards("integrated-container", dataIntegrated.filter(matchFn));
      }

      document.addEventListener("DOMContentLoaded", () => {
        // 搜尋事件
        document.getElementById("searchBtn").addEventListener("click", handleSearchAndFilter);
        document.getElementById("searchInput").addEventListener("keyup", (e) => {
          if (e.key === "Enter") handleSearchAndFilter();
        });

        // 載入 JSON
        fetch("react_prompt.json")
          .then((res) => res.json())
          .then((data) => {
            // learning
            const l = data.learning || {};
            document.getElementById("learning-overview").textContent = l.overview || "";
            dataLearning = l.items || [];

            // practical
            const p = data.practicalApplication || {};
            document.getElementById("practical-overview").textContent = p.overview || "";
            dataPractical = p.items || [];

            // functionality
            const f = data.functionality || {};
            document.getElementById("functionality-overview").textContent = f.overview || "";
            dataFunctionality = f.items || [];

            // integrated
            const i = data.integratedExample || {};
            document.getElementById("integrated-overview").textContent = i.overview || "";
            dataIntegrated = i.items || [];

            // 初始顯示
            renderCards("learning-container", dataLearning);
            renderCards("practical-container", dataPractical);
            renderCards("functionality-container", dataFunctionality);
            renderCards("integrated-container", dataIntegrated);
          })
          .catch((err) => {
            console.error("載入 react_prompt.json 發生錯誤：", err);
          });
      });
    </script>
  </body>
</html>