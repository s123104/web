<!DOCTYPE html>

<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>建築師專業聯盟 - 名片網站</title>

<!-- Tailwind CSS CDN -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Font Awesome Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+TC:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<!-- Tailwind Configuration -->
<script>
    tailwind.config = {
        theme: {
            extend: {
                fontFamily: {
                    'sans': ['Inter', 'Noto Sans TC', 'sans-serif'],
                    'tc': ['Noto Sans TC', 'sans-serif']
                },
                colors: {
                    'primary': {
                        50: '#f0f9ff',
                        100: '#e0f2fe',
                        200: '#bae6fd',
                        300: '#7dd3fc',
                        400: '#38bdf8',
                        500: '#0ea5e9',
                        600: '#0284c7',
                        700: '#0369a1',
                        800: '#075985',
                        900: '#0c4a6e'
                    },
                    'secondary': {
                        50: '#fefce8',
                        100: '#fef9c3',
                        200: '#fef08a',
                        300: '#fde047',
                        400: '#facc15',
                        500: '#eab308',
                        600: '#ca8a04',
                        700: '#a16207',
                        800: '#854d0e',
                        900: '#713f12'
                    },
                    'neutral': {
                        50: '#f8fafc',
                        100: '#f1f5f9',
                        200: '#e2e8f0',
                        300: '#cbd5e1',
                        400: '#94a3b8',
                        500: '#64748b',
                        600: '#475569',
                        700: '#334155',
                        800: '#1e293b',
                        900: '#0f172a'
                    },
                    'accent': {
                        gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'
                    }
                },
                spacing: {
                    '18': '4.5rem',
                    '22': '5.5rem',
                    '26': '6.5rem',
                    '30': '7.5rem'
                },
                backdropBlur: {
                    'xs': '2px'
                },
                animation: {
                    'fade-in-up': 'fadeInUp 0.8s ease-out forwards',
                    'pulse-slow': 'pulse 3s infinite',
                    'bounce-gentle': 'bounceGentle 2s ease-in-out infinite'
                },
                keyframes: {
                    fadeInUp: {
                        '0%': { opacity: '0', transform: 'translateY(30px)' },
                        '100%': { opacity: '1', transform: 'translateY(0)' }
                    },
                    bounceGentle: {
                        '0%, 100%': { transform: 'translateY(0)' },
                        '50%': { transform: 'translateY(-5px)' }
                    }
                }
            }
        }
    }
</script>

<style>
    /* 補強細節樣式 */
    .glass-morphism {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .card-shadow {
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    .hover-lift {
        transition: all 0.3s ease;
    }
    
    .hover-lift:hover {
        transform: translateY(-8px);
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    }
    
    .text-shadow {
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    /* 動態背景 */
    .dynamic-bg {
        background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
        background-size: 400% 400%;
        animation: gradientBG 15s ease infinite;
    }
    
    @keyframes gradientBG {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }
    
    /* 隱藏彩蛋按鈕樣式 */
    .easter-egg-btn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 50px;
        height: 50px;
        background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
        border-radius: 50%;
        opacity: 0.3;
        transition: all 0.3s ease;
        z-index: 1000;
    }
    
    .easter-egg-btn:hover {
        opacity: 0.8;
        transform: scale(1.1);
    }
    
    /* 深色模式支援 */
    .dark {
        background-color: #1f2937;
        color: #f9fafb;
    }
    
    .dark .bg-white {
        background-color: #374151;
    }
    
    .dark .text-neutral-800 {
        color: #f9fafb;
    }
    
    .dark .text-neutral-600 {
        color: #d1d5db;
    }
    
    .dark .text-neutral-500 {
        color: #9ca3af;
    }
    
    .dark .bg-neutral-50 {
        background-color: #1f2937;
    }
    
    .dark .bg-neutral-100 {
        background-color: #4b5563;
    }
    
    .dark .card-shadow {
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
    }
    
    /* 搜索框樣式增強 */
    .search-highlight {
        background: linear-gradient(135deg, #fef3c7, #fde047);
        color: #92400e;
        padding: 2px 4px;
        border-radius: 4px;
        font-weight: 500;
    }
    
    /* 載入動畫 */
    .loading-spinner {
        border: 3px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top: 3px solid #ffffff;
        width: 20px;
        height: 20px;
        animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    /* 響應式微調 */
    @media (max-width: 768px) {
        .business-card {
            min-height: auto;
        }
        
        .easter-egg-btn {
            bottom: 80px;
            right: 15px;
            width: 45px;
            height: 45px;
        }
    }
</style>

</head>
<body class="font-tc bg-neutral-50 min-h-screen">

<!-- 驗證畫面 -->
<div id="auth-screen" class="fixed inset-0 dynamic-bg flex items-center justify-center z-50">
    <div class="glass-morphism rounded-2xl p-8 max-w-md w-full mx-4 text-center">
        <div class="mb-6">
            <i class="fas fa-shield-alt text-4xl text-white mb-4"></i>
            <h2 class="text-2xl font-bold text-white mb-2">專業驗證</h2>
            <p class="text-white opacity-90">請輸入訪問密碼以查看專業名片</p>
        </div>
        <input type="password" id="auth-input" placeholder="請輸入密碼" 
               class="w-full px-4 py-3 rounded-lg border-none outline-none bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-70 backdrop-blur-sm">
        <button id="auth-btn" class="w-full mt-4 px-6 py-3 bg-white bg-opacity-20 text-white rounded-lg font-medium hover:bg-opacity-30 transition-all duration-200">
            進入系統
        </button>
        <p class="text-xs text-white opacity-70 mt-4">請輸入正確的訪問密碼</p>
    </div>
</div>

<!-- 主要內容區域 -->
<div id="main-content" class="hidden">
    <!-- Header 區域 -->
    <header class="gradient-bg text-white py-12 relative overflow-hidden">
        <div class="absolute inset-0 bg-black bg-opacity-20"></div>
        <div class="container mx-auto px-4 relative z-10">
            <div class="text-center">
                <h1 class="text-4xl md:text-6xl font-bold mb-4 text-shadow animate-fade-in-up">
                    建築師專業聯盟
                </h1>
                <p class="text-xl md:text-2xl opacity-90 animate-fade-in-up animation-delay-200">
                    Professional Architect Alliance
                </p>
                <div class="mt-8 animate-fade-in-up animation-delay-400">
                    <span class="inline-block px-6 py-2 bg-white bg-opacity-20 rounded-full text-sm font-medium backdrop-blur-sm">
                        室內裝修專業技術人員
                    </span>
                </div>
            </div>
        </div>
        <!-- 裝飾性幾何圖形 -->
        <div class="absolute top-10 right-10 w-20 h-20 border-2 border-white opacity-20 rotate-45 animate-pulse-slow"></div>
        <div class="absolute bottom-10 left-10 w-16 h-16 border-2 border-white opacity-20 rotate-12 animate-bounce-gentle"></div>
    </header>

    <!-- 名片展示區域 -->
    <main class="container mx-auto px-4 py-16">
        <div class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-bold text-neutral-800 mb-4">專業團隊名片</h2>
            <p class="text-lg text-neutral-600 max-w-2xl mx-auto">
                匯聚建築界菁英，提供最專業的室內裝修技術諮詢與服務
            </p>
        </div>

        <!-- 名片網格 -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            
            <!-- 林正仁 建築師 -->
            <div class="business-card bg-white rounded-2xl card-shadow hover-lift p-6 opacity-0" data-card="1">
                <div class="text-center mb-6">
                    <div class="w-20 h-20 bg-primary-500 rounded-full mx-auto mb-4 flex items-center justify-center">
                        <i class="fas fa-drafting-compass text-2xl text-white"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-neutral-800 mb-1">林正仁</h3>
                    <p class="text-primary-600 font-medium">建築師</p>
                    <p class="text-sm text-neutral-500">林正仁建築師事務所</p>
                </div>
                
                <div class="space-y-3 mb-6">
                    <div class="flex items-center text-sm text-neutral-600">
                        <i class="fas fa-chalkboard-teacher w-4 mr-3 text-primary-500"></i>
                        <span>內政部講師 - 建築防火材料應用</span>
                    </div>
                    <div class="flex items-center text-sm text-neutral-600">
                        <i class="fas fa-award w-4 mr-3 text-primary-500"></i>
                        <span>智慧建築標章審查委員</span>
                    </div>
                    <div class="flex items-center text-sm text-neutral-600">
                        <i class="fas fa-gavel w-4 mr-3 text-primary-500"></i>
                        <span>商務仲裁協會仲裁人</span>
                    </div>
                </div>
                
                <div class="flex space-x-2">
                    <button class="flex-1 px-4 py-2 bg-primary-500 text-white rounded-lg text-sm font-medium hover:bg-primary-600 transition-colors duration-200">
                        <i class="fas fa-envelope mr-2"></i>聯絡
                    </button>
                    <button class="px-4 py-2 bg-neutral-100 text-neutral-600 rounded-lg text-sm hover:bg-neutral-200 transition-colors duration-200" 
                            onclick="saveContact('林正仁', '建築師', '', '', '')">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="px-4 py-2 bg-purple-500 text-white rounded-lg text-sm hover:bg-purple-600 transition-colors duration-200"
                            onclick="shareContact('林正仁', '')">
                        <i class="fas fa-share"></i>
                    </button>
                </div>
            </div>

            <!-- 曾文卿 建築師 -->
            <div class="business-card bg-white rounded-2xl card-shadow hover-lift p-6 opacity-0" data-card="2">
                <div class="text-center mb-6">
                    <div class="w-20 h-20 bg-secondary-500 rounded-full mx-auto mb-4 flex items-center justify-center">
                        <i class="fas fa-city text-2xl text-white"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-neutral-800 mb-1">曾文卿</h3>
                    <p class="text-secondary-600 font-medium">建築師｜都市計畫技師</p>
                    <p class="text-sm text-neutral-500">劍道二段｜公務人員高考三級</p>
                </div>
                
                <div class="space-y-3 mb-6">
                    <div class="flex items-center text-sm text-neutral-600">
                        <i class="fab fa-line w-4 mr-3 text-green-500"></i>
                        <span>LINE ID: 980105abc</span>
                    </div>
                    <div class="flex items-center text-sm text-neutral-600">
                        <i class="fas fa-building w-4 mr-3 text-secondary-500"></i>
                        <span>國土管理署副工程司</span>
                    </div>
                    <div class="flex items-center text-sm text-neutral-600">
                        <i class="fas fa-quote-left w-4 mr-3 text-secondary-500"></i>
                        <span class="italic">人要衣裝，技術要專業，都市計畫也要有武德</span>
                    </div>
                </div>
                
                <div class="flex space-x-2">
                    <button class="flex-1 px-4 py-2 bg-green-500 text-white rounded-lg text-sm font-medium hover:bg-green-600 transition-colors duration-200"
                            onclick="openLine('980105abc')">
                        <i class="fab fa-line mr-2"></i>LINE
                    </button>
                    <button class="px-4 py-2 bg-neutral-100 text-neutral-600 rounded-lg text-sm hover:bg-neutral-200 transition-colors duration-200" 
                            onclick="saveContact('曾文卿', '建築師｜都市計畫技師', '', '980105abc', '')">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="px-4 py-2 bg-purple-500 text-white rounded-lg text-sm hover:bg-purple-600 transition-colors duration-200"
                            onclick="shareContact('曾文卿', '980105abc')">
                        <i class="fas fa-share"></i>
                    </button>
                </div>
            </div>

            <!-- 詹鈞皓 老師 -->
            <div class="business-card bg-white rounded-2xl card-shadow hover-lift p-6 opacity-0" data-card="3">
                <div class="text-center mb-6">
                    <div class="w-20 h-20 bg-green-500 rounded-full mx-auto mb-4 flex items-center justify-center">
                        <i class="fas fa-user-tie text-2xl text-white"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-neutral-800 mb-1">詹鈞皓</h3>
                    <p class="text-green-600 font-medium">主講人</p>
                    <p class="text-sm text-neutral-500">室內裝修工程管理訓練課程</p>
                </div>
                
                <div class="space-y-3 mb-6">
                    <div class="flex items-center text-sm text-neutral-600">
                        <i class="fas fa-phone w-4 mr-3 text-green-500"></i>
                        <span>0937-727-088</span>
                    </div>
                    <div class="flex items-center text-sm text-neutral-600">
                        <i class="fab fa-line w-4 mr-3 text-green-500"></i>
                        <span>LINE ID: dam119</span>
                    </div>
                    <div class="flex items-center text-sm text-neutral-600">
                        <i class="fas fa-lightbulb w-4 mr-3 text-green-500"></i>
                        <span>電氣、給排水衛生設備專家</span>
                    </div>
                </div>
                
                <div class="flex space-x-2">
                    <button class="px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors duration-200"
                            onclick="makeCall('0937727088')">
                        <i class="fas fa-phone mr-2"></i>電話
                    </button>
                    <button class="px-4 py-2 bg-green-500 text-white rounded-lg text-sm font-medium hover:bg-green-600 transition-colors duration-200"
                            onclick="openLine('dam119')">
                        <i class="fab fa-line mr-2"></i>LINE
                    </button>
                    <button class="px-4 py-2 bg-neutral-100 text-neutral-600 rounded-lg text-sm hover:bg-neutral-200 transition-colors duration-200" 
                            onclick="saveContact('詹鈞皓', '主講人', '0937-727-088', 'dam119', '')">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="px-4 py-2 bg-purple-500 text-white rounded-lg text-sm hover:bg-purple-600 transition-colors duration-200"
                            onclick="shareContact('詹鈞皓', 'dam119')">
                        <i class="fas fa-share"></i>
                    </button>
                </div>
            </div>

            <!-- 張顯通 建築師 -->
            <div class="business-card bg-white rounded-2xl card-shadow hover-lift p-6 opacity-0" data-card="4">
                <div class="text-center mb-6">
                    <div class="w-20 h-20 bg-purple-500 rounded-full mx-auto mb-4 flex items-center justify-center">
                        <i class="fas fa-palette text-2xl text-white"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-neutral-800 mb-1">張顯通</h3>
                    <p class="text-purple-600 font-medium">建築師</p>
                    <p class="text-sm text-neutral-500">築晴室內裝修設計工程 藝術總監</p>
                </div>
                
                <div class="space-y-3 mb-6">
                    <div class="flex items-center text-sm text-neutral-600">
                        <i class="fas fa-phone w-4 mr-3 text-purple-500"></i>
                        <span>0932-670461</span>
                    </div>
                    <div class="flex items-center text-sm text-neutral-600">
                        <i class="fas fa-envelope w-4 mr-3 text-purple-500"></i>
                        <span>mrtoun@gmail.com</span>
                    </div>
                    <div class="flex items-center text-sm text-neutral-600">
                        <i class="fab fa-line w-4 mr-3 text-green-500"></i>
                        <span>LINE ID: mrtoun</span>
                    </div>
                    <div class="flex items-center text-sm text-neutral-600">
                        <i class="fas fa-graduation-cap w-4 mr-3 text-purple-500"></i>
                        <span>成大建築碩士｜文化大學講師</span>
                    </div>
                </div>
                
                <div class="flex space-x-2">
                    <button class="px-3 py-2 bg-blue-500 text-white rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors duration-200"
                            onclick="makeCall('0932670461')">
                        <i class="fas fa-phone"></i>
                    </button>
                    <button class="px-3 py-2 bg-red-500 text-white rounded-lg text-sm font-medium hover:bg-red-600 transition-colors duration-200"
                            onclick="sendEmail('mrtoun@gmail.com')">
                        <i class="fas fa-envelope"></i>
                    </button>
                    <button class="px-3 py-2 bg-green-500 text-white rounded-lg text-sm font-medium hover:bg-green-600 transition-colors duration-200"
                            onclick="openLine('mrtoun')">
                        <i class="fab fa-line"></i>
                    </button>
                    <button class="px-3 py-2 bg-neutral-100 text-neutral-600 rounded-lg text-sm hover:bg-neutral-200 transition-colors duration-200" 
                            onclick="saveContact('張顯通', '建築師', '0932-670461', 'mrtoun', 'mrtoun@gmail.com')">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="px-3 py-2 bg-purple-500 text-white rounded-lg text-sm hover:bg-purple-600 transition-colors duration-200"
                            onclick="shareContact('張顯通', 'mrtoun')">
                        <i class="fas fa-share"></i>
                    </button>
                </div>
            </div>

            <!-- 林大森 博士/建築師 -->
            <div class="business-card bg-white rounded-2xl card-shadow hover-lift p-6 opacity-0" data-card="5">
                <div class="text-center mb-6">
                    <div class="w-20 h-20 bg-indigo-500 rounded-full mx-auto mb-4 flex items-center justify-center">
                        <i class="fas fa-user-graduate text-2xl text-white"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-neutral-800 mb-1">林大森</h3>
                    <p class="text-indigo-600 font-medium">博士 / 建築師</p>
                    <p class="text-sm text-neutral-500">台灣省建築師公會理事長</p>
                </div>
                
                <div class="space-y-3 mb-6">
                    <div class="flex items-center text-sm text-neutral-600">
                        <i class="fas fa-phone w-4 mr-3 text-indigo-500"></i>
                        <span>0910-455229</span>
                    </div>
                    <div class="flex items-center text-sm text-neutral-600">
                        <i class="fas fa-envelope w-4 mr-3 text-indigo-500"></i>
                        <span>morlydr@gmail.com</span>
                    </div>
                    <div class="flex items-center text-sm text-neutral-600">
                        <i class="fab fa-line w-4 mr-3 text-green-500"></i>
                        <span>LINE ID: morlydr</span>
                    </div>
                    <div class="flex items-center text-sm text-neutral-600">
                        <i class="fas fa-leaf w-4 mr-3 text-indigo-500"></i>
                        <span>綠建築與智慧建築評定委員</span>
                    </div>
                </div>
                
                <div class="flex space-x-2">
                    <button class="px-3 py-2 bg-blue-500 text-white rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors duration-200"
                            onclick="makeCall('0910455229')">
                        <i class="fas fa-phone"></i>
                    </button>
                    <button class="px-3 py-2 bg-red-500 text-white rounded-lg text-sm font-medium hover:bg-red-600 transition-colors duration-200"
                            onclick="sendEmail('morlydr@gmail.com')">
                        <i class="fas fa-envelope"></i>
                    </button>
                    <button class="px-3 py-2 bg-green-500 text-white rounded-lg text-sm font-medium hover:bg-green-600 transition-colors duration-200"
                            onclick="openLine('morlydr')">
                        <i class="fab fa-line"></i>
                    </button>
                    <button class="px-3 py-2 bg-neutral-100 text-neutral-600 rounded-lg text-sm hover:bg-neutral-200 transition-colors duration-200" 
                            onclick="saveContact('林大森', '博士/建築師', '0910-455229', 'morlydr', 'morlydr@gmail.com')">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="px-3 py-2 bg-purple-500 text-white rounded-lg text-sm hover:bg-purple-600 transition-colors duration-200"
                            onclick="shareContact('林大森', 'morlydr')">
                        <i class="fas fa-share"></i>
                    </button>
                </div>
            </div>

        </div>
    </main>

    <!-- Footer 區域 -->
    <footer class="bg-neutral-800 text-white py-12">
        <div class="container mx-auto px-4 text-center">
            <div class="mb-6">
                <h3 class="text-2xl font-bold mb-2">建築師專業聯盟</h3>
                <p class="text-neutral-400">專業室內裝修技術諮詢服務</p>
            </div>
            <div class="flex justify-center space-x-6 mb-6">
                <a href="#" class="text-neutral-400 hover:text-white transition-colors duration-200">
                    <i class="fab fa-facebook text-xl"></i>
                </a>
                <a href="#" class="text-neutral-400 hover:text-white transition-colors duration-200">
                    <i class="fab fa-instagram text-xl"></i>
                </a>
                <a href="#" class="text-neutral-400 hover:text-white transition-colors duration-200">
                    <i class="fab fa-linkedin text-xl"></i>
                </a>
            </div>
            <p class="text-sm text-neutral-500">
                © 2025 建築師專業聯盟. All rights reserved.
            </p>
        </div>
    </footer>
</div>

<!-- 隱藏彩蛋按鈕 -->
<button id="easter-egg" class="easter-egg-btn" title="Hidden Easter Egg">
    <i class="fas fa-star text-white"></i>
</button>

<!-- 彩蛋Modal -->
<div id="easter-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 text-center">
        <div class="text-6xl mb-4">🎉</div>
        <h3 class="text-2xl font-bold text-neutral-800 mb-4">恭喜發現彩蛋！</h3>
        <p class="text-neutral-600 mb-6">您已發現隱藏的建築師彩蛋！這代表您擁有優秀的觀察力，正是建築師所需要的特質。</p>
        <div class="text-4xl mb-4">🏗️ 📐 🏡</div>
        <button id="close-modal" class="px-6 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition-colors duration-200">
            關閉
        </button>
    </div>
</div>

<script>
    // 網址參數驗證功能
    function checkURLAccess() {
        const urlParams = new URLSearchParams(window.location.search);
        const viewParam = urlParams.get('view');
        
        if (viewParam === 'renovation-training') {
            document.getElementById('auth-screen').style.display = 'none';
            document.getElementById('main-content').classList.remove('hidden');
            initCardAnimations();
        } else {
            document.getElementById('auth-screen').style.display = 'flex';
        }
    }

    // 驗證輸入處理
    document.getElementById('auth-btn').addEventListener('click', function() {
        const password = document.getElementById('auth-input').value;
        if (password.toLowerCase() === 'renovation-training' || password === '裝修訓練') {
            // 更新URL
            const newUrl = window.location.origin + window.location.pathname + '?view=renovation-training';
            window.history.pushState({}, '', newUrl);
            
            document.getElementById('auth-screen').style.display = 'none';
            document.getElementById('main-content').classList.remove('hidden');
            initCardAnimations();
        } else {
            const input = document.getElementById('auth-input');
            input.style.borderColor = '#ef4444';
            input.style.animation = 'shake 0.5s';
            setTimeout(() => {
                input.style.borderColor = '';
                input.style.animation = '';
            }, 500);
        }
    });

    // Enter鍵支援
    document.getElementById('auth-input').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            document.getElementById('auth-btn').click();
        }
    });

    // 名片動畫初始化
    function initCardAnimations() {
        const cards = document.querySelectorAll('.business-card');
        
        // 使用 Intersection Observer 實現進場動畫
        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry, index) => {
                if (entry.isIntersecting) {
                    setTimeout(() => {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }, index * 200);
                }
            });
        }, {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        });

        cards.forEach((card, index) => {
            card.style.transform = 'translateY(30px)';
            card.style.transition = 'all 0.8s ease-out';
            observer.observe(card);
        });
    }

    // 快速功能函數
    function makeCall(phone) {
        const cleanPhone = phone.replace(/[-\s]/g, '');
        window.open(`tel:${cleanPhone}`, '_self');
    }

    function sendEmail(email) {
        window.open(`mailto:${email}`, '_self');
    }

    function openLine(lineId) {
        // 2025年最新LINE連結方法
        const lineDirectUrl = `https://line.me/ti/p/~${lineId}`;
        
        // 檢測設備類型
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        if (isMobile) {
            // 手機/平板：直接開啟LINE連結
            window.open(lineDirectUrl, '_self');
        } else {
            // 電腦：顯示QR Code或提示用手機開啟
            showLineModal(lineId, lineDirectUrl);
        }
    }

    function showLineModal(lineId, lineUrl) {
        // 創建LINE QR Code模態窗口
        const modal = document.createElement('div');
        modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
        modal.innerHTML = `
            <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 text-center">
                <div class="mb-4">
                    <i class="fab fa-line text-4xl text-green-500 mb-4"></i>
                    <h3 class="text-2xl font-bold text-neutral-800 mb-2">加入LINE好友</h3>
                    <p class="text-neutral-600 mb-4">請使用手機掃描QR Code或複製連結</p>
                </div>
                <div class="mb-6 p-4 bg-neutral-100 rounded-lg">
                    <div id="qr-code-${lineId}" class="mb-4"></div>
                    <p class="text-sm text-neutral-600">LINE ID: ${lineId}</p>
                </div>
                <div class="flex space-x-2 mb-4">
                    <button onclick="copyToClipboard('${lineUrl}')" class="flex-1 px-4 py-2 bg-green-500 text-white rounded-lg font-medium hover:bg-green-600 transition-colors duration-200">
                        <i class="fas fa-copy mr-2"></i>複製連結
                    </button>
                    <button onclick="window.open('${lineUrl}', '_blank')" class="flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors duration-200">
                        <i class="fas fa-external-link-alt mr-2"></i>開啟連結
                    </button>
                </div>
                <button onclick="this.parentElement.parentElement.remove()" class="px-6 py-2 bg-neutral-200 text-neutral-600 rounded-lg font-medium hover:bg-neutral-300 transition-colors duration-200">
                    關閉
                </button>
            </div>
        `;
        
        document.body.appendChild(modal);
        
        // 生成QR Code (使用第三方API)
        const qrContainer = document.getElementById(`qr-code-${lineId}`);
        const qrImg = document.createElement('img');
        qrImg.src = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(lineUrl)}`;
        qrImg.alt = 'LINE QR Code';
        qrImg.className = 'mx-auto';
        qrContainer.appendChild(qrImg);
        
        // 點擊背景關閉
        modal.addEventListener('click', function(e) {
            if (e.target === this) {
                this.remove();
            }
        });
    }

    function copyToClipboard(text) {
        navigator.clipboard.writeText(text).then(() => {
            showNotification('LINE連結已複製到剪貼簿！');
        }).catch(() => {
            // 備用方法
            const textArea = document.createElement('textarea');
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
            showNotification('LINE連結已複製到剪貼簿！');
        });
    }

    // 分享聯絡人功能
    function shareContact(name, lineId) {
        const shareData = {
            title: `${name} - 建築師專業聯盟`,
            text: `快來認識專業建築師 ${name}！`,
            url: lineId ? `https://line.me/ti/p/~${lineId}` : window.location.href
        };

        if (navigator.share) {
            // 使用Web Share API（手機瀏覽器支援）
            navigator.share(shareData).catch(() => {
                showShareModal(shareData);
            });
        } else {
            // 備用方案：顯示分享選項
            showShareModal(shareData);
        }
    }

    function showShareModal(shareData) {
        const modal = document.createElement('div');
        modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
        modal.innerHTML = `
            <div class="bg-white rounded-2xl p-6 max-w-sm w-full mx-4">
                <h3 class="text-xl font-bold text-neutral-800 mb-4 text-center">分享聯絡人</h3>
                <div class="space-y-3">
                    <button onclick="shareToLine('${shareData.url}', '${shareData.text}')" 
                            class="w-full px-4 py-3 bg-green-500 text-white rounded-lg font-medium hover:bg-green-600 transition-colors flex items-center justify-center">
                        <i class="fab fa-line mr-2"></i>分享到 LINE
                    </button>
                    <button onclick="shareToFacebook('${shareData.url}')" 
                            class="w-full px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center">
                        <i class="fab fa-facebook mr-2"></i>分享到 Facebook
                    </button>
                    <button onclick="copyToClipboard('${shareData.url}')" 
                            class="w-full px-4 py-3 bg-neutral-100 text-neutral-600 rounded-lg font-medium hover:bg-neutral-200 transition-colors flex items-center justify-center">
                        <i class="fas fa-copy mr-2"></i>複製連結
                    </button>
                </div>
                <button onclick="this.parentElement.parentElement.remove()" 
                        class="w-full mt-4 px-4 py-2 bg-neutral-200 text-neutral-600 rounded-lg font-medium hover:bg-neutral-300 transition-colors">
                    關閉
                </button>
            </div>
        `;
        
        document.body.appendChild(modal);
        
        // 點擊背景關閉
        modal.addEventListener('click', function(e) {
            if (e.target === this) {
                this.remove();
            }
        });
    }

    function shareToLine(url, text) {
        const lineShareUrl = `https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`;
        window.open(lineShareUrl, '_blank');
    }

    function shareToFacebook(url) {
        const fbShareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
        window.open(fbShareUrl, '_blank');
    }

    // 快速聯絡功能增強
    function quickContact(name, methods) {
        const modal = document.createElement('div');
        modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
        
        let methodsHtml = '';
        methods.forEach(method => {
            methodsHtml += `
                <button onclick="${method.action}" 
                        class="w-full px-4 py-3 ${method.color} text-white rounded-lg font-medium hover:opacity-90 transition-all duration-200 flex items-center justify-center mb-2">
                    <i class="${method.icon} mr-2"></i>${method.text}
                </button>
            `;
        });
        
        modal.innerHTML = `
            <div class="bg-white rounded-2xl p-6 max-w-sm w-full mx-4">
                <h3 class="text-xl font-bold text-neutral-800 mb-4 text-center">聯絡 ${name}</h3>
                <div class="space-y-2">
                    ${methodsHtml}
                </div>
                <button onclick="this.parentElement.parentElement.remove()" 
                        class="w-full mt-4 px-4 py-2 bg-neutral-200 text-neutral-600 rounded-lg font-medium hover:bg-neutral-300 transition-colors">
                    關閉
                </button>
            </div>
        `;
        
        document.body.appendChild(modal);
    }

    function saveContact(name, title, phone, lineId, email) {
        // 創建 vCard 格式
        let vCard = `BEGIN:VCARD\nVERSION:3.0\n`;
        vCard += `FN:${name}\n`;
        vCard += `N:${name};;;;\n`;
        vCard += `ORG:建築師專業聯盟\n`;
        vCard += `TITLE:${title}\n`;
        
        if (phone) {
            const cleanPhone = phone.replace(/[-\s]/g, '');
            vCard += `TEL;TYPE=CELL:${cleanPhone}\n`;
        }
        if (email) {
            vCard += `EMAIL;TYPE=WORK:${email}\n`;
        }
        if (lineId) {
            vCard += `URL;TYPE=LINE:https://line.me/ti/p/~${lineId}\n`;
            vCard += `NOTE:LINE ID: ${lineId}\\n專業領域: ${title}\\n服務項目: 建築物室內裝修專業技術諮詢\n`;
        } else {
            vCard += `NOTE:專業領域: ${title}\\n服務項目: 建築物室內裝修專業技術諮詢\n`;
        }
        
        // 添加地址（如果有的話）
        if (name === '張顯通') {
            vCard += `ADR;TYPE=WORK:;;台中市西屯區中康街215巷18號1樓;台中市;台中市;407;台灣\n`;
        }
        
        vCard += `END:VCARD`;

        // 創建下載連結（依照名字命名）
        const blob = new Blob([vCard], { type: 'text/vcard;charset=utf-8' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `${name}_聯絡人.vcf`;
        a.style.display = 'none';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        window.URL.revokeObjectURL(url);
        
        // 顯示成功提示
        showNotification(`${name} 的聯絡人資訊已下載！`);
    }

    function showNotification(message, type = 'success') {
        const notification = document.createElement('div');
        const bgColor = type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : 'bg-blue-500';
        const icon = type === 'success' ? 'fas fa-check-circle' : type === 'error' ? 'fas fa-exclamation-circle' : 'fas fa-info-circle';
        
        notification.className = `fixed top-4 right-4 ${bgColor} text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 flex items-center`;
        notification.innerHTML = `
            <i class="${icon} mr-2"></i>
            <span>${message}</span>
            <button onclick="this.parentElement.remove()" class="ml-4 text-white hover:text-gray-200">
                <i class="fas fa-times"></i>
            </button>
        `;
        
        document.body.appendChild(notification);
        
        // 自動消失
        setTimeout(() => {
            if (notification.parentElement) {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentElement) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }
        }, 4000);
    }

    // 添加全域搜尋功能
    function addSearchFunctionality() {
        const searchContainer = document.createElement('div');
        searchContainer.className = 'container mx-auto px-4 mb-8';
        searchContainer.innerHTML = `
            <div class="max-w-md mx-auto">
                <div class="relative">
                    <input type="text" id="search-input" placeholder="搜尋建築師姓名或專業..." 
                           class="w-full px-4 py-3 pl-10 pr-4 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                    <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400"></i>
                </div>
            </div>
        `;
        
        const mainContent = document.querySelector('main .text-center');
        mainContent.parentNode.insertBefore(searchContainer, mainContent.nextSibling);
        
        // 搜尋功能
        const searchInput = document.getElementById('search-input');
        searchInput.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            const cards = document.querySelectorAll('.business-card');
            
            cards.forEach(card => {
                const name = card.querySelector('h3').textContent.toLowerCase();
                const title = card.querySelector('.text-primary-600, .text-secondary-600, .text-green-600, .text-purple-600, .text-indigo-600').textContent.toLowerCase();
                
                if (name.includes(searchTerm) || title.includes(searchTerm)) {
                    card.parentElement.style.display = 'block';
                    card.style.transform = 'scale(1)';
                } else {
                    card.parentElement.style.display = searchTerm ? 'none' : 'block';
                }
            });
        });
    }

    // 彩蛋功能
    let easterEggClicks = 0;
    const easterEggBtn = document.getElementById('easter-egg');
    const easterModal = document.getElementById('easter-modal');
    const closeModal = document.getElementById('close-modal');

    easterEggBtn.addEventListener('click', function() {
        easterEggClicks++;
        if (easterEggClicks >= 3) {
            easterModal.classList.remove('hidden');
            // 重置點擊計數
            easterEggClicks = 0;
            
            // 添加慶祝動畫
            this.style.animation = 'bounceGentle 0.5s ease-in-out 3';
        } else {
            // 提示需要點擊更多次
            this.style.transform = 'scale(1.2)';
            setTimeout(() => {
                this.style.transform = 'scale(1)';
            }, 150);
        }
    });

    closeModal.addEventListener('click', function() {
        easterModal.classList.add('hidden');
    });

    // 鍵盤彩蛋 (Ctrl + Shift + A)
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.shiftKey && e.key === 'A') {
            easterModal.classList.remove('hidden');
        }
    });

    // 點擊模態背景關閉
    easterModal.addEventListener('click', function(e) {
        if (e.target === this) {
            this.classList.add('hidden');
        }
    });

    // 添加震動動畫
    const style = document.createElement('style');
    style.textContent = `
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    `;
    document.head.appendChild(style);

    // 初始化頁面
    document.addEventListener('DOMContentLoaded', function() {
        checkURLAccess();
        
        // 延遲添加搜索功能，確保主內容已載入
        setTimeout(() => {
            if (!document.getElementById('auth-screen').style.display || 
                document.getElementById('auth-screen').style.display === 'none') {
                addSearchFunctionality();
                addFloatingActionButton();
            }
        }, 1000);
    });

    // 添加浮動功能按鈕
    function addFloatingActionButton() {
        const fab = document.createElement('div');
        fab.className = 'fixed bottom-20 left-4 z-40';
        fab.innerHTML = `
            <button id="fab-main" class="w-14 h-14 bg-primary-500 text-white rounded-full shadow-lg hover:bg-primary-600 transition-all duration-200 flex items-center justify-center">
                <i class="fas fa-plus"></i>
            </button>
            <div id="fab-menu" class="hidden absolute bottom-16 left-0 space-y-2">
                <button onclick="shareWebsite()" class="w-12 h-12 bg-green-500 text-white rounded-full shadow-lg hover:bg-green-600 transition-all duration-200 flex items-center justify-center">
                    <i class="fas fa-share-alt"></i>
                </button>
                <button onclick="downloadAllContacts()" class="w-12 h-12 bg-blue-500 text-white rounded-full shadow-lg hover:bg-blue-600 transition-all duration-200 flex items-center justify-center">
                    <i class="fas fa-download"></i>
                </button>
                <button onclick="toggleDarkMode()" class="w-12 h-12 bg-purple-500 text-white rounded-full shadow-lg hover:bg-purple-600 transition-all duration-200 flex items-center justify-center">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        `;
        
        document.body.appendChild(fab);
        
        // FAB 點擊事件
        document.getElementById('fab-main').addEventListener('click', function() {
            const menu = document.getElementById('fab-menu');
            menu.classList.toggle('hidden');
        });
    }

    // 分享整個網站
    function shareWebsite() {
        const shareData = {
            title: '建築師專業聯盟 - 名片網站',
            text: '專業建築師團隊，提供室內裝修技術諮詢服務',
            url: window.location.href
        };

        if (navigator.share) {
            navigator.share(shareData);
        } else {
            showShareModal(shareData);
        }
    }

    // 下載所有聯絡人
    function downloadAllContacts() {
        const contacts = [
            { name: '林正仁', title: '建築師', phone: '', lineId: '', email: '' },
            { name: '曾文卿', title: '建築師｜都市計畫技師', phone: '', lineId: '980105abc', email: '' },
            { name: '詹鈞皓', title: '主講人', phone: '0937-727-088', lineId: 'dam119', email: '' },
            { name: '張顯通', title: '建築師', phone: '0932-670461', lineId: 'mrtoun', email: 'mrtoun@gmail.com' },
            { name: '林大森', title: '博士/建築師', phone: '0910-455229', lineId: 'morlydr', email: 'morlydr@gmail.com' }
        ];

        let allVCards = '';
        contacts.forEach(contact => {
            let vCard = `BEGIN:VCARD\nVERSION:3.0\n`;
            vCard += `FN:${contact.name}\n`;
            vCard += `N:${contact.name};;;;\n`;
            vCard += `ORG:建築師專業聯盟\n`;
            vCard += `TITLE:${contact.title}\n`;
            
            if (contact.phone) {
                vCard += `TEL;TYPE=CELL:${contact.phone.replace(/[-\s]/g, '')}\n`;
            }
            if (contact.email) {
                vCard += `EMAIL;TYPE=WORK:${contact.email}\n`;
            }
            if (contact.lineId) {
                vCard += `URL;TYPE=LINE:https://line.me/ti/p/~${contact.lineId}\n`;
                vCard += `NOTE:LINE ID: ${contact.lineId}\\n專業領域: ${contact.title}\\n服務項目: 建築物室內裝修專業技術諮詢\n`;
            }
            
            vCard += `END:VCARD\n`;
            allVCards += vCard;
        });

        const blob = new Blob([allVCards], { type: 'text/vcard;charset=utf-8' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = '建築師專業聯盟_全部聯絡人.vcf';
        a.style.display = 'none';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        window.URL.revokeObjectURL(url);
        
        showNotification('所有聯絡人已打包下載！');
    }

    // 深色模式切換
    function toggleDarkMode() {
        document.body.classList.toggle('dark');
        const isDark = document.body.classList.contains('dark');
        localStorage.setItem('darkMode', isDark);
        showNotification(isDark ? '已切換至深色模式' : '已切換至淺色模式');
    }

    // 載入檢查深色模式偏好
    if (localStorage.getItem('darkMode') === 'true') {
        document.body.classList.add('dark');
    }

    // 響應式卡片高度調整
    function adjustCardHeights() {
        const cards = document.querySelectorAll('.business-card');
        if (window.innerWidth >= 768) { // 只在桌面版調整高度
            let maxHeight = 0;
            
            // 重置高度
            cards.forEach(card => {
                card.style.height = 'auto';
            });
            
            // 找出最大高度
            cards.forEach(card => {
                maxHeight = Math.max(maxHeight, card.offsetHeight);
            });
            
            // 設定統一高度
            cards.forEach(card => {
                card.style.height = maxHeight + 'px';
            });
        } else {
            // 手機版重置高度
            cards.forEach(card => {
                card.style.height = 'auto';
            });
        }
    }

    // 視窗大小改變時調整
    window.addEventListener('resize', adjustCardHeights);
    
    // 內容載入後調整
    setTimeout(adjustCardHeights, 1500);

    // 添加鍵盤快捷鍵
    document.addEventListener('keydown', function(e) {
        // Ctrl + K 開啟搜索
        if (e.ctrlKey && e.key === 'k') {
            e.preventDefault();
            const searchInput = document.getElementById('search-input');
            if (searchInput) {
                searchInput.focus();
            }
        }
        
        // Ctrl + D 切換深色模式
        if (e.ctrlKey && e.key === 'd') {
            e.preventDefault();
            toggleDarkMode();
        }
        
        // Escape 關閉所有模態窗口
        if (e.key === 'Escape') {
            const modals = document.querySelectorAll('.fixed.inset-0');
            modals.forEach(modal => {
                if (!modal.id || modal.id !== 'auth-screen') {
                    modal.remove();
                }
            });
        }
    });

    // 性能優化：延遲載入非關鍵功能
    window.addEventListener('load', function() {
        // 預載入常用功能
        if ('serviceWorker' in navigator) {
            // 可以在此處註冊 Service Worker
        }
        
        // 預載入 QR Code API
        const qrTestImg = new Image();
        qrTestImg.src = 'https://api.qrserver.com/v1/create-qr-code/?size=1x1&data=test';
    });
</script>

</body>
</html>