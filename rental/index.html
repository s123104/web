<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>üè† Â∞àÊ•≠ÁßüÂ±ãÁúãÊàøÂÖ®ËÉΩÂ∑•ÂÖ∑ - 2025ÊúÄÊñ∞Áâà</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome Icons - Êõ¥Êñ∞ÁâàÊú¨ -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Noto+Sans+TC:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Tailwind Config -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Inter", "Noto Sans TC", "system-ui", "sans-serif"],
            },
            colors: {
              primary: {
                50: "#f0fdf4",
                100: "#dcfce7",
                200: "#bbf7d0",
                300: "#86efac",
                400: "#4ade80",
                500: "#22c55e",
                600: "#16a34a",
                700: "#15803d",
                800: "#166534",
                900: "#14532d",
              },
              secondary: {
                50: "#eff6ff",
                100: "#dbeafe",
                200: "#bfdbfe",
                300: "#93c5fd",
                400: "#60a5fa",
                500: "#3b82f6",
                600: "#2563eb",
                700: "#1d4ed8",
                800: "#1e40af",
                900: "#1e3a8a",
              },
              accent: {
                50: "#fdf4ff",
                100: "#fae8ff",
                200: "#f5d0fe",
                300: "#f0abfc",
                400: "#e879f9",
                500: "#d946ef",
                600: "#c026d3",
                700: "#a21caf",
                800: "#86198f",
                900: "#701a75",
              },
            },
            animation: {
              "fade-in": "fadeIn 0.6s ease-out",
              "slide-up": "slideUp 0.8s ease-out",
              "scale-in": "scaleIn 0.5s ease-out",
              "bounce-soft": "bounceSoft 2s infinite",
              "pulse-slow": "pulse 3s infinite",
              float: "float 6s ease-in-out infinite",
              wiggle: "wiggle 1s ease-in-out infinite",
              heartbeat: "heartbeat 1.5s ease-in-out infinite",
              sparkle: "sparkle 1s ease-in-out infinite",
              "gradient-x": "gradient-x 3s ease infinite",
            },
            keyframes: {
              fadeIn: {
                "0%": { opacity: "0", transform: "translateY(20px)" },
                "100%": { opacity: "1", transform: "translateY(0)" },
              },
              slideUp: {
                "0%": { opacity: "0", transform: "translateY(40px)" },
                "100%": { opacity: "1", transform: "translateY(0)" },
              },
              scaleIn: {
                "0%": { opacity: "0", transform: "scale(0.9)" },
                "100%": { opacity: "1", transform: "scale(1)" },
              },
              bounceSoft: {
                "0%, 100%": { transform: "translateY(0)" },
                "50%": { transform: "translateY(-8px)" },
              },
              float: {
                "0%, 100%": { transform: "translateY(0px)" },
                "50%": { transform: "translateY(-10px)" },
              },
              wiggle: {
                "0%, 100%": { transform: "rotate(-3deg)" },
                "50%": { transform: "rotate(3deg)" },
              },
              heartbeat: {
                "0%, 100%": { transform: "scale(1)" },
                "50%": { transform: "scale(1.1)" },
              },
              sparkle: {
                "0%, 100%": { transform: "scale(1) rotate(0deg)" },
                "50%": { transform: "scale(1.2) rotate(180deg)" },
              },
              "gradient-x": {
                "0%, 100%": { backgroundPosition: "0% 50%" },
                "50%": { backgroundPosition: "100% 50%" },
              },
            },
          },
        },
      };
    </script>

    <style>
      /* Áèæ‰ª£ÂåñÁéªÁíÉÊì¨ÊÖãÊïàÊûú */
      .modern-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px) saturate(180%);
        border: 1px solid rgba(255, 255, 255, 0.125);
        border-radius: 20px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
      }

      .modern-input {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border: 1.5px solid rgba(0, 0, 0, 0.06);
        border-radius: 16px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .modern-input:focus-within {
        border-color: rgba(34, 197, 94, 0.5);
        box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.1),
          0 4px 20px rgba(0, 0, 0, 0.08);
        transform: translateY(-2px);
      }

      /* Áèæ‰ª£ÂåñÊåâÈàïÊ®£Âºè */
      .modern-btn {
        position: relative;
        overflow: hidden;
        border-radius: 16px;
        font-weight: 600;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        backdrop-filter: blur(10px);
        border: none;
        cursor: pointer;
        touch-action: manipulation;
        min-height: 44px;
      }

      .modern-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      .modern-btn:active {
        transform: translateY(0);
      }

      .modern-btn-primary {
        background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
        color: white;
        box-shadow: 0 4px 15px rgba(34, 197, 94, 0.3);
      }

      .modern-btn-primary:hover {
        background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
        box-shadow: 0 8px 25px rgba(34, 197, 94, 0.4);
      }

      .modern-btn-secondary {
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        color: #374151;
        border: 1px solid rgba(0, 0, 0, 0.06);
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
      }

      .modern-btn-secondary:hover {
        background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      }

      .modern-btn-accent {
        background: linear-gradient(135deg, #d946ef 0%, #c026d3 100%);
        color: white;
        box-shadow: 0 4px 15px rgba(217, 70, 239, 0.3);
      }

      .modern-btn-accent:hover {
        background: linear-gradient(135deg, #c026d3 0%, #a21caf 100%);
        box-shadow: 0 8px 25px rgba(217, 70, 239, 0.4);
      }

      .modern-btn-info {
        background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        color: white;
        box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
      }

      .modern-btn-info:hover {
        background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
        box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
      }

      /* Á≤æÁ∑ªÊ®ôÈ†≠Ê®£Âºè */
      .premium-header {
        background: linear-gradient(
          135deg,
          rgba(34, 197, 94, 0.1) 0%,
          rgba(59, 130, 246, 0.1) 50%,
          rgba(217, 70, 239, 0.1) 100%
        );
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(20px);
      }

      .author-badge {
        background: linear-gradient(135deg, #000 0%, #3a3a3a 100%);
        color: white;
        border-radius: 25px;
        padding: 8px 16px;
        font-size: 14px;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }

      .author-badge:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        background: linear-gradient(135deg, #1a1a1a 0%, #4a4a4a 100%);
      }

      /* Ë©ïÂàÜÁ≥ªÁµ±Ê®£Âºè */
      .score-circle {
        position: relative;
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: conic-gradient(
          from 0deg,
          #ef4444 0% 20%,
          #f97316 20% 40%,
          #eab308 40% 60%,
          #84cc16 60% 80%,
          #22c55e 80% 100%
        );
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .score-inner {
        width: 64px;
        height: 64px;
        border-radius: 50%;
        background: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 18px;
      }

      /* Ê™¢Êü•Ê∏ÖÂñÆÊ®£Âºè - ÂÑ™ÂåñËß∏Êéß */
      .checklist-item {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border-radius: 12px;
        border: 2px solid transparent;
        min-height: 52px;
        touch-action: manipulation;
      }

      .checklist-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      }

      .checklist-item.checked {
        background: linear-gradient(
          135deg,
          rgba(34, 197, 94, 0.1) 0%,
          rgba(22, 163, 74, 0.05) 100%
        );
        border-color: rgba(34, 197, 94, 0.3);
      }

      .checklist-checkbox {
        appearance: none;
        width: 28px;
        height: 28px;
        border: 2px solid #e5e7eb;
        border-radius: 8px;
        background: white;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        touch-action: manipulation;
      }

      .checklist-checkbox:checked {
        background: linear-gradient(135deg, #22c55e, #16a34a);
        border-color: #16a34a;
        transform: scale(1.1);
      }

      .checklist-checkbox:checked::after {
        content: "‚úì";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: white;
        font-weight: bold;
        font-size: 16px;
      }

      /* ÈÄ≤Â∫¶Ê¢ùÊ®£Âºè */
      .progress-bar {
        background: linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%);
        border-radius: 12px;
        overflow: hidden;
        position: relative;
      }

      .progress-fill {
        background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
        height: 100%;
        border-radius: 12px;
        transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }

      .progress-fill::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background-image: linear-gradient(
          45deg,
          rgba(255, 255, 255, 0.2) 25%,
          transparent 25%,
          transparent 50%,
          rgba(255, 255, 255, 0.2) 50%,
          rgba(255, 255, 255, 0.2) 75%,
          transparent 75%,
          transparent
        );
        background-size: 20px 20px;
        animation: shimmer 2s linear infinite;
      }

      @keyframes shimmer {
        0% {
          background-position: -20px 0;
        }
        100% {
          background-position: 20px 0;
        }
      }

      /* ÈÄöÁü•Á≥ªÁµ± */
      .notification-container {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translate(-50%, -120%);
        z-index: 9999;
        opacity: 0;
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .notification-container.show {
        transform: translate(-50%, 0);
        opacity: 1;
      }

      .notification-container.hide {
        transform: translate(-50%, -120%);
        opacity: 0;
      }

      /* Ê®ôÁ±§Ê®£Âºè */
      .tag {
        display: inline-block;
        background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
        color: white;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        margin: 2px;
      }

      .tag.green {
        background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
      }

      .tag.blue {
        background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      }

      .tag.red {
        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      }

      /* ÂàÜ‰∫´ÊåâÈàïÊ®£Âºè */
      .share-btn {
        position: fixed;
        bottom: 30px;
        right: 30px;
        z-index: 1000;
        background: linear-gradient(135deg, #ff6b81 0%, #e056fd 100%);
        border-radius: 50%;
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 24px;
        box-shadow: 0 8px 25px rgba(255, 107, 129, 0.4);
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .share-btn:hover {
        transform: translateY(-3px) scale(1.1);
        box-shadow: 0 12px 30px rgba(255, 107, 129, 0.5);
      }

      /* Êº∏Â±§ËÉåÊôØ */
      .gradient-mesh {
        background: radial-gradient(
            at 40% 20%,
            hsla(28, 100%, 74%, 0.1) 0px,
            transparent 50%
          ),
          radial-gradient(
            at 80% 0%,
            hsla(189, 100%, 56%, 0.1) 0px,
            transparent 50%
          ),
          radial-gradient(
            at 0% 50%,
            hsla(355, 100%, 93%, 0.1) 0px,
            transparent 50%
          ),
          radial-gradient(
            at 80% 50%,
            hsla(340, 100%, 76%, 0.1) 0px,
            transparent 50%
          ),
          radial-gradient(
            at 0% 100%,
            hsla(22, 100%, 77%, 0.1) 0px,
            transparent 50%
          ),
          radial-gradient(
            at 80% 100%,
            hsla(242, 100%, 70%, 0.1) 0px,
            transparent 50%
          ),
          linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
      }

      /* Ëá™ÂÆöÁæ©ÊªæÂãïÊ¢ù */
      ::-webkit-scrollbar {
        width: 8px;
      }

      ::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.05);
        border-radius: 10px;
      }

      ::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, #22c55e, #16a34a);
        border-radius: 10px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(135deg, #16a34a, #15803d);
      }

      /* ËÅØÁµ°ÊñπÂºèÊåâÈàïÊ®£Âºè */
      .contact-type-btn {
        position: relative;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .contact-type-btn.selected {
        border-color: #3b82f6;
        background-color: rgba(59, 130, 246, 0.1);
        box-shadow: 0 2px 4px rgba(59, 130, 246, 0.2);
      }

      .contact-type-btn.selected .w-6 {
        transform: scale(1.1);
      }

      .contact-type-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      /* ÂÑ™ÂåñÊâãÊ©üÁâàÊ†ºÁ∑ö‰ΩàÂ±Ä */
      @media (max-width: 768px) {
        .grid.grid-cols-2.lg\\:grid-cols-5 {
          grid-template-columns: repeat(2, 1fr);
        }

        .col-span-2.lg\\:col-span-1 {
          grid-column: span 2;
        }

        /* ÂÑ™ÂåñÊâãÊ©üÁâàÈñìË∑ù */
        .gap-4 {
          gap: 12px;
        }

        .p-4.md\\:p-6 {
          padding: 16px !important;
        }

        /* ÊâãÊ©üÁâàÂ≠óÈ´îË™øÊï¥ */
        .text-sm.md\\:text-base {
          font-size: 0.875rem;
        }

        .text-lg.md\\:text-xl {
          font-size: 1rem;
        }
      }

      /* ÈüøÊáâÂºèÂÑ™Âåñ */
      @media (max-width: 768px) {
        .mobile-compact .modern-card {
          padding: 12px !important;
          border-radius: 12px !important;
        }

        .mobile-compact .text-lg {
          font-size: 16px !important;
        }

        .mobile-compact .text-xl {
          font-size: 18px !important;
        }

        .mobile-compact .text-2xl {
          font-size: 20px !important;
        }

        .mobile-compact .modern-btn {
          padding: 12px 16px !important;
          font-size: 14px !important;
        }

        .share-btn {
          width: 50px;
          height: 50px;
          font-size: 20px;
          bottom: 20px;
          right: 20px;
        }

        .score-circle {
          width: 60px;
          height: 60px;
        }

        .score-inner {
          width: 48px;
          height: 48px;
          font-size: 14px;
        }
      }

      /* ÁÑ°ÈöúÁ§ôÊîØÊè¥ */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      /* Ëº∏ÂÖ•Ê®°ÂºèÂàáÊèõ */
      .input-mode-selector {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 8px;
        margin-bottom: 16px;
      }

      .input-mode-btn {
        padding: 8px 12px;
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.7);
        border: 2px solid rgba(0, 0, 0, 0.1);
        font-size: 12px;
        font-weight: 600;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .input-mode-btn.active {
        background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
        color: white;
        border-color: #16a34a;
      }

      /* Ë©êÈ®ôË≠¶ÂëäÊ®£Âºè */
      .warning-card {
        background: linear-gradient(
          135deg,
          rgba(239, 68, 68, 0.1) 0%,
          rgba(220, 38, 38, 0.05) 100%
        );
        border: 2px solid rgba(239, 68, 68, 0.2);
        border-left: 6px solid #ef4444;
      }

      /* Áâ©ÂìÅ‰º∞ÁÆóÁ∂≤Ê†º */
      .item-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        gap: 12px;
        max-height: 400px;
        overflow-y: auto;
        padding: 8px;
      }

      @media (max-width: 768px) {
        .item-grid {
          grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
          gap: 6px;
          max-height: 300px;
          padding: 4px;
        }
      }

      .item-card {
        background: rgba(255, 255, 255, 0.9);
        border: 2px solid transparent;
        border-radius: 12px;
        padding: 16px;
        text-align: center;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      @media (max-width: 768px) {
        .item-card {
          padding: 8px;
          border-radius: 8px;
        }
      }

      .item-card:hover {
        transform: translateY(-2px);
        border-color: rgba(34, 197, 94, 0.3);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      }

      .item-card.selected {
        border-color: #22c55e;
        background: linear-gradient(
          135deg,
          rgba(34, 197, 94, 0.1) 0%,
          rgba(22, 163, 74, 0.05) 100%
        );
      }

      /* ÁßüÂ±ãË£úÂä©ÈÅ∏È†ÖÊ®£Âºè */
      .rental-option {
        transition: all 0.3s ease;
      }

      .rental-option.bg-red-100 {
        background-color: rgb(254 226 226) !important;
        border-color: rgb(248 113 113) !important;
      }

      .rental-option.bg-green-100 {
        background-color: rgb(220 252 231) !important;
        border-color: rgb(34 197 94) !important;
      }
    </style>
  </head>

  <body class="font-sans gradient-mesh min-h-screen mobile-compact">
    <!-- Á≤æÁ∑ªÊ®ôÈ†≠ -->
    <header class="premium-header sticky top-0 z-40 animate-fade-in">
      <div class="container mx-auto px-4 py-4">
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-4">
            <div
              class="w-12 h-12 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-xl flex items-center justify-center shadow-lg animate-bounce-soft"
            >
              <i class="fas fa-home text-white text-xl"></i>
            </div>
            <div>
              <h1 class="text-xl md:text-2xl font-bold text-gray-800">
                Â∞àÊ•≠ÁßüÂ±ãÁúãÊàøÂÖ®ËÉΩÂ∑•ÂÖ∑
              </h1>
              <p class="text-sm text-gray-600 hidden md:block">
                Êô∫ËÉΩË©ïÂàÜÁ≥ªÁµ± ¬∑ Èò≤Ë©êÈ®ôÊåáÂçó ¬∑ 2025ÊúÄÊñ∞Ë£úË≤º
              </p>
            </div>
          </div>

          <div class="flex items-center space-x-3">
            <a
              href="https://www.threads.com/@azlife_1224?invite=0"
              target="_blank"
              class="author-badge flex items-center space-x-2 hover:no-underline"
            >
              <i class="fab fa-threads"></i>
              <span class="hidden md:inline">@azlife_1224</span>
              <span class="md:hidden">‰ΩúËÄÖ</span>
            </a>
          </div>
        </div>
      </div>
    </header>

    <!-- ÂàÜ‰∫´ÊåâÈàï -->
    <div id="shareBtn" class="share-btn animate-heartbeat">
      <i class="fas fa-share-alt"></i>
    </div>

    <!-- ‰∏ªË¶ÅÂÆπÂô® -->
    <div class="min-h-screen flex flex-col pt-4">
      <main class="flex-1 container mx-auto px-4 pb-8 space-y-6 md:space-y-8">
        <!-- Â§öÊ®°ÂºèÂù™Êï∏ÊèõÁÆóÂ∑•ÂÖ∑ -->
        <section class="max-w-6xl mx-auto animate-slide-up">
          <div class="modern-card p-4 md:p-8">
            <div class="text-center mb-6 md:mb-8">
              <div
                class="inline-flex items-center justify-center w-12 md:w-16 h-12 md:h-16 bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl mb-4 shadow-lg animate-bounce-soft"
              >
                <i
                  class="fas fa-ruler-combined text-xl md:text-2xl text-white"
                ></i>
              </div>
              <h2 class="text-xl md:text-3xl font-bold text-gray-800 mb-3">
                üìêÂ§öÊ®°ÂºèÊô∫ËÉΩÂù™Êï∏Ë®àÁÆóÂô®
              </h2>
            </div>

            <!-- Ëº∏ÂÖ•Ê®°ÂºèÈÅ∏Êìá -->
            <div class="input-mode-selector mb-6">
              <button class="input-mode-btn active" data-mode="dimensions">
                <i class="fas fa-ruler mr-1"></i>Èï∑ÂØ¨Ëº∏ÂÖ•
              </button>
              <button class="input-mode-btn" data-mode="area">
                <i class="fas fa-calculator mr-1"></i>Èù¢Á©çËº∏ÂÖ•
              </button>
              <button class="input-mode-btn" data-mode="items">
                <i class="fas fa-couch mr-1"></i>Áâ©ÂìÅ‰º∞ÁÆó
              </button>
            </div>

            <!-- Èï∑ÂØ¨Ëº∏ÂÖ•Ê®°Âºè -->
            <div id="dimensionsMode" class="input-mode">
              <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6 mb-6">
                <div class="space-y-4">
                  <h3
                    class="text-lg font-semibold text-gray-800 flex items-center"
                  >
                    <i class="fas fa-edit mr-2 text-primary-500"></i>
                    Ëº∏ÂÖ•ÊàøÈñìÂ∞∫ÂØ∏
                  </h3>
                  <div class="space-y-3">
                    <div class="modern-input p-3 md:p-4">
                      <label
                        class="block text-sm font-medium text-gray-700 mb-2"
                        >Èï∑Â∫¶ (ÂÖ¨Â∞∫)</label
                      >
                      <input
                        type="number"
                        id="length"
                        class="w-full text-base md:text-lg font-semibold text-gray-800 bg-transparent outline-none"
                        placeholder="Ë´ãËº∏ÂÖ•Èï∑Â∫¶"
                        step="0.1"
                        min="0"
                      />
                    </div>
                    <div class="modern-input p-3 md:p-4">
                      <label
                        class="block text-sm font-medium text-gray-700 mb-2"
                        >ÂØ¨Â∫¶ (ÂÖ¨Â∞∫)</label
                      >
                      <input
                        type="number"
                        id="width"
                        class="w-full text-base md:text-lg font-semibold text-gray-800 bg-transparent outline-none"
                        placeholder="Ë´ãËº∏ÂÖ•ÂØ¨Â∫¶"
                        step="0.1"
                        min="0"
                      />
                    </div>
                  </div>
                </div>

                <div class="space-y-4">
                  <h3
                    class="text-lg font-semibold text-gray-800 flex items-center"
                  >
                    <i class="fas fa-chart-area mr-2 text-secondary-500"></i>
                    ÊèõÁÆóÁµêÊûú
                  </h3>
                  <div class="space-y-3">
                    <div
                      class="modern-card p-3 md:p-4 bg-gradient-to-r from-blue-50/50 to-blue-100/50"
                    >
                      <div class="flex justify-between items-center">
                        <span class="text-sm font-medium text-gray-700"
                          >Âπ≥ÊñπÂÖ¨Â∞∫</span
                        >
                        <span
                          id="sqmResult"
                          class="text-lg md:text-xl font-bold text-blue-600"
                          >0 „é°</span
                        >
                      </div>
                    </div>
                    <div
                      class="modern-card p-3 md:p-4 bg-gradient-to-r from-green-50/50 to-green-100/50"
                    >
                      <div class="flex justify-between items-center">
                        <span class="text-sm font-medium text-gray-700"
                          >Âù™Êï∏</span
                        >
                        <span
                          id="pingResult"
                          class="text-lg md:text-xl font-bold text-green-600"
                          >0 Âù™</span
                        >
                      </div>
                    </div>
                    <div
                      class="modern-card p-3 md:p-4 bg-gradient-to-r from-purple-50/50 to-purple-100/50"
                    >
                      <div class="flex justify-between items-center">
                        <span class="text-sm font-medium text-gray-700"
                          >Á¥ÑÁ≠âÊñº</span
                        >
                        <span
                          id="comparisonResult"
                          class="text-xs md:text-sm font-semibold text-purple-600"
                          >Ë´ãËº∏ÂÖ•Â∞∫ÂØ∏</span
                        >
                      </div>
                    </div>
                  </div>
                </div>

                <div class="space-y-4">
                  <h3
                    class="text-lg font-semibold text-gray-800 flex items-center"
                  >
                    <i class="fas fa-home mr-2 text-orange-500"></i>
                    Áâ©ÂìÅÂ∞∫ÂØ∏ÂèÉËÄÉ
                  </h3>
                  <div class="space-y-2 max-h-64 overflow-y-auto">
                    <div id="itemComparisons" class="space-y-2"></div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Èù¢Á©çËº∏ÂÖ•Ê®°Âºè -->
            <div id="areaMode" class="input-mode hidden">
              <div class="max-w-2xl mx-auto">
                <div class="modern-input p-4 mb-6">
                  <label class="block text-sm font-medium text-gray-700 mb-2"
                    >Áõ¥Êé•Ëº∏ÂÖ•Èù¢Á©ç</label
                  >
                  <div class="flex gap-4">
                    <div class="flex-1">
                      <input
                        type="number"
                        id="directSqm"
                        class="w-full text-lg font-semibold text-gray-800 bg-transparent outline-none"
                        placeholder="Èù¢Á©ç"
                        step="0.1"
                        min="0"
                      />
                      <span class="text-sm text-gray-500">Âπ≥ÊñπÂÖ¨Â∞∫ („é°)</span>
                    </div>
                    <div class="flex-1">
                      <input
                        type="number"
                        id="directPing"
                        class="w-full text-lg font-semibold text-gray-800 bg-transparent outline-none"
                        placeholder="Âù™Êï∏"
                        step="0.1"
                        min="0"
                      />
                      <span class="text-sm text-gray-500">Âù™</span>
                    </div>
                  </div>
                </div>

                <div
                  id="areaResults"
                  class="modern-card p-6 bg-gradient-to-r from-blue-50/50 to-green-50/50"
                >
                  <h3 class="text-lg font-semibold text-gray-800 mb-4">
                    ËΩâÊèõÁµêÊûú
                  </h3>
                  <div class="grid grid-cols-2 gap-4 mb-4">
                    <div class="text-center">
                      <div
                        class="text-2xl font-bold text-blue-600"
                        id="areaToSqm"
                      >
                        0 „é°
                      </div>
                      <div class="text-sm text-gray-600">Âπ≥ÊñπÂÖ¨Â∞∫</div>
                    </div>
                    <div class="text-center">
                      <div
                        class="text-2xl font-bold text-green-600"
                        id="areaToPing"
                      >
                        0 Âù™
                      </div>
                      <div class="text-sm text-gray-600">Âù™Êï∏</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Áâ©ÂìÅ‰º∞ÁÆóÊ®°Âºè -->
            <div id="itemsMode" class="input-mode hidden">
              <div class="space-y-6">
                <div class="text-center">
                  <h3
                    class="text-base md:text-lg font-semibold text-gray-800 mb-2"
                  >
                    ÈÅ∏ÊìáÁâ©ÂìÅÊï∏Èáè‰æÜ‰º∞ÁÆóÁ©∫ÈñìÂ§ßÂ∞è
                  </h3>
                  <p class="text-xs md:text-sm text-gray-600">
                    ÈªûÈÅ∏Áâ©ÂìÅ‰∏¶Ëº∏ÂÖ•Êï∏ÈáèÔºåÁ≥ªÁµ±ÊúÉËá™ÂãïË®àÁÆóÁ∏ΩÈù¢Á©ç
                  </p>
                </div>

                <div
                  class="item-grid border border-gray-200 rounded-lg"
                  id="itemEstimateGrid"
                  style="
                    height: 450px;
                    min-height: 450px;
                    max-height: 450px;
                    overflow-y: auto;
                  "
                >
                  <!-- ÂãïÊÖãÁîüÊàêÁâ©ÂìÅÂç°Áâá -->
                </div>

                <!-- ‰º∞ÁÆóÁµêÊûúÈ°ØÁ§∫Âú®‰∏ãÊñπ -->
                <div
                  class="modern-card p-4 md:p-6 bg-gradient-to-r from-purple-50/50 to-pink-50/50 mt-4"
                >
                  <h4
                    class="text-base md:text-lg font-semibold text-gray-800 mb-3"
                  >
                    ‰º∞ÁÆóÁµêÊûú
                  </h4>
                  <div class="grid grid-cols-2 gap-4 mb-3">
                    <div class="text-center">
                      <div
                        class="text-xl md:text-2xl font-bold text-purple-600"
                        id="itemEstimateSqm"
                      >
                        0 „é°
                      </div>
                      <div class="text-xs md:text-sm text-gray-600">Á∏ΩÈù¢Á©ç</div>
                    </div>
                    <div class="text-center">
                      <div
                        class="text-xl md:text-2xl font-bold text-pink-600"
                        id="itemEstimatePing"
                      >
                        0 Âù™
                      </div>
                      <div class="text-xs md:text-sm text-gray-600">Á∏ΩÂù™Êï∏</div>
                    </div>
                  </div>
                  <div class="mt-3" id="selectedItems">
                    <div class="text-xs md:text-sm text-gray-600">
                      Â∑≤ÈÅ∏ÊìáÁâ©ÂìÅÂ∞áÈ°ØÁ§∫Âú®ÈÄôË£°
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Êìç‰ΩúÊåâÈàï -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 mt-6">
              <button
                id="clearCalculator"
                class="modern-btn modern-btn-secondary py-2 md:py-3 px-4 md:px-6 flex items-center justify-center"
              >
                <i class="fas fa-eraser mr-2"></i>
                <span class="hidden md:inline">Ê∏ÖÈô§Êï∏ÂÄº</span>
                <span class="md:hidden">Ê∏ÖÈô§</span>
              </button>
              <button
                id="copyResult"
                class="modern-btn modern-btn-primary py-2 md:py-3 px-4 md:px-6 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"
                disabled
              >
                <i class="fas fa-copy mr-2"></i>
                <span class="hidden md:inline">Ë§áË£ΩÁµêÊûú</span>
                <span class="md:hidden">Ë§áË£Ω</span>
              </button>
              <button
                id="presetSizes"
                class="modern-btn modern-btn-accent py-2 md:py-3 px-4 md:px-6 flex items-center justify-center"
              >
                <i class="fas fa-home mr-2"></i>
                <span class="hidden md:inline">Â∏∏Ë¶ãÂ∞∫ÂØ∏</span>
                <span class="md:hidden">È†êË®≠</span>
              </button>
              <button
                id="randomSize"
                class="modern-btn modern-btn-info py-2 md:py-3 px-4 md:px-6 flex items-center justify-center"
              >
                <i class="fas fa-dice mr-2"></i>
                <span class="hidden md:inline">Èö®Ê©üÂ∞∫ÂØ∏</span>
                <span class="md:hidden">Èö®Ê©ü</span>
              </button>
            </div>
          </div>
        </section>

        <!-- Â∞àÊ•≠ÁßüÂ±ãË©ïÂàÜÁ≥ªÁµ± -->
        <section class="max-w-6xl mx-auto animate-scale-in">
          <div class="modern-card p-4 md:p-8">
            <div class="text-center mb-6 md:mb-8">
              <div
                class="inline-flex items-center justify-center w-12 md:w-16 h-12 md:h-16 bg-gradient-to-br from-accent-500 to-accent-600 rounded-2xl mb-4 shadow-lg animate-heartbeat"
              >
                <i class="fas fa-star text-xl md:text-2xl text-white"></i>
              </div>
              <h2 class="text-xl md:text-3xl font-bold text-gray-800 mb-3">
                ‚≠ê Â∞àÊ•≠ÁßüÂ±ãË©ïÂàÜÁ≥ªÁµ±
              </h2>
              <p class="text-gray-600 text-base md:text-lg">
                Êô∫ËÉΩÊ¨äÈáçË©ïÂàÜÔºåÂø´ÈÄüË©ï‰º∞ÊàøÂ±ãÂìÅË≥™ÔºåÊîØÊè¥Â§öÊàøÂ±ãÊØîËºÉ
              </p>
            </div>

            <!-- ÊàøÂ±ãÂü∫Êú¨Ë≥áË®ä -->
            <div
              class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 mb-6"
            >
              <div class="modern-input p-4">
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >ÊàøÂ±ãÂêçÁ®±/Âú∞ÂùÄ</label
                >
                <input
                  type="text"
                  id="houseName"
                  class="w-full text-base font-semibold text-gray-800 bg-transparent outline-none"
                  placeholder="‰æãÂ¶ÇÔºöÂè∞‰∏≠Â∏ÇË•øÂ±ØÂçÄ..."
                />
              </div>
              <div class="modern-input p-4">
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >ÁßüÈáë (ÂÖÉ/Êúà)</label
                >
                <input
                  type="number"
                  id="houseRent"
                  class="w-full text-base font-semibold text-gray-800 bg-transparent outline-none"
                  placeholder="10000"
                  min="0"
                />
              </div>
              <div class="modern-input p-4">
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >ÁßüÂ±ãË£úÂä© (ÂÖÉ/Êúà)</label
                >
                <input
                  type="number"
                  id="rentalSubsidy"
                  class="w-full text-base font-semibold text-gray-800 bg-transparent outline-none"
                  placeholder="2880"
                  min="0"
                />
                <div class="grid grid-cols-2 gap-2 mt-2">
                  <div
                    id="noSubsidyOption"
                    class="rental-option p-2 border border-gray-200 rounded-lg text-center cursor-pointer hover:bg-red-50 hover:border-red-300 transition-colors"
                  >
                    <i class="fas fa-times-circle text-red-500 mr-1"></i>
                    <span class="text-xs text-gray-700">Ê≠§Â±ã‰∏çÂèØÁßüË£ú</span>
                  </div>
                  <div
                    id="hasSubsidyOption"
                    class="rental-option p-2 border border-gray-200 rounded-lg text-center cursor-pointer hover:bg-green-50 hover:border-green-300 transition-colors"
                  >
                    <i class="fas fa-check-circle text-green-500 mr-1"></i>
                    <span class="text-xs text-gray-700">Ê≠§Â±ãÂèØÁßüË£ú</span>
                  </div>
                </div>
                <input type="hidden" id="hasSubsidy" value="false" />
              </div>
            </div>

            <!-- ÁßüË£úË®≠ÂÆöÁ∞°Áü≠Ë™™ÊòéËàáÈå®ÂÆöÈªû -->
            <div
              class="modern-card p-3 bg-gradient-to-r from-blue-50/30 to-blue-100/30 border-l-2 border-blue-400 mt-4"
            >
              <h4
                class="text-sm font-semibold text-blue-800 mb-1 flex items-center"
              >
                <i class="fas fa-info-circle text-blue-600 mr-2"></i>
                ÁßüÂ±ãË£úÂä©Ë®≠ÂÆö
              </h4>
              <p class="text-xs text-blue-700 mb-2">
                Â¶ÇÊúâÁî≥Ë´ãÁßüÂ±ãË£úÂä©ÔºàÂ¶ÇÈùíÂπ¥ÁßüË£ú2,880ÂÖÉ„ÄÅÊñ∞Â©öÁßüË£úÁ≠âÔºâÔºåË´ãÂãæÈÅ∏‰∏¶Â°´ÂÖ•ÈáëÈ°çÔºåÁ≥ªÁµ±Â∞áË®àÁÆóÂØ¶ÈöõÊîØ‰ªòÁßüÈáëÁî®ÊñºCPÂÄºË©ï‰º∞„ÄÇ
              </p>
              <a
                href="#rental-subsidy-info"
                class="inline-flex items-center text-xs text-blue-600 hover:text-blue-800 transition-colors"
              >
                <i class="fas fa-external-link-alt mr-1"></i>
                Êü•ÁúãÂÆåÊï¥Ë£úË≤ºË≥áË®äËàáÁî≥Ë´ãÊñπÂºè
              </a>
            </div>

            <!-- Êàø‰ª≤/Â±ã‰∏ªËÅØÁµ°Á∞ø -->
            <div
              class="modern-card p-4 md:p-6 bg-gradient-to-r from-indigo-50/50 to-indigo-100/50 mt-6"
            >
              <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-gray-800 flex items-center">
                  <i class="fas fa-address-book text-indigo-600 mr-3"></i>
                  Êàø‰ª≤/Â±ã‰∏ªËÅØÁµ°Á∞ø
                </h3>
                <button
                  id="viewContactBook"
                  class="modern-btn modern-btn-secondary px-3 py-1 text-sm flex items-center gap-2"
                >
                  <i class="fas fa-book"></i>
                  ËÅØÁµ°Á∞ø
                </button>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <div class="modern-input p-3">
                  <label class="block text-sm font-medium text-gray-700 mb-2"
                    >ËÅØÁµ°ÊñπÂºè</label
                  >
                  <div class="grid grid-cols-3 gap-2">
                    <button
                      type="button"
                      class="contact-type-btn p-3 border border-gray-200 rounded-lg text-center hover:bg-green-50 hover:border-green-300 transition-colors"
                      data-type="line"
                    >
                      <div
                        class="w-6 h-6 mx-auto mb-1 bg-green-500 rounded-full flex items-center justify-center"
                      >
                        <i class="fab fa-line text-white text-sm"></i>
                      </div>
                      <span class="text-xs text-gray-700">LINE</span>
                    </button>
                    <button
                      type="button"
                      class="contact-type-btn p-3 border border-gray-200 rounded-lg text-center hover:bg-blue-50 hover:border-blue-300 transition-colors"
                      data-type="facebook"
                    >
                      <div
                        class="w-6 h-6 mx-auto mb-1 bg-blue-600 rounded-full flex items-center justify-center"
                      >
                        <i class="fab fa-facebook-f text-white text-sm"></i>
                      </div>
                      <span class="text-xs text-gray-700">Facebook</span>
                    </button>
                    <button
                      type="button"
                      class="contact-type-btn p-3 border border-gray-200 rounded-lg text-center hover:bg-gray-50 hover:border-gray-300 transition-colors"
                      data-type="phone"
                    >
                      <div
                        class="w-6 h-6 mx-auto mb-1 bg-gray-500 rounded-full flex items-center justify-center"
                      >
                        <i class="fas fa-phone text-white text-sm"></i>
                      </div>
                      <span class="text-xs text-gray-700">Á¥îÈõªË©±</span>
                    </button>
                  </div>
                  <input type="hidden" id="contactType" value="" />
                </div>

                <div class="modern-input p-3">
                  <label class="block text-sm font-medium text-gray-700 mb-2"
                    >ËÅØÁµ°‰∫∫ÂßìÂêç</label
                  >
                  <input
                    type="text"
                    id="contactName"
                    class="w-full text-sm text-gray-800 bg-transparent outline-none"
                    placeholder=""
                  />
                </div>

                <div class="modern-input p-3">
                  <label class="block text-sm font-medium text-gray-700 mb-2"
                    >ËÅØÁµ°ÈõªË©±</label
                  >
                  <input
                    type="tel"
                    id="contactPhone"
                    class="w-full text-sm text-gray-800 bg-transparent outline-none"
                    placeholder=""
                  />
                </div>

                <div class="modern-input p-3">
                  <label class="block text-sm font-medium text-gray-700 mb-2"
                    >ÊàøÊ∫êÂú∞ÂùÄ (ÈÅ∏Â°´)</label
                  >
                  <input
                    type="text"
                    id="propertyAddress"
                    class="w-full text-sm text-gray-800 bg-transparent outline-none"
                    placeholder=""
                  />
                </div>
              </div>

              <!-- Êìç‰ΩúÊåâÈàï -->
              <div class="flex justify-center gap-3 mt-4">
                <button
                  id="saveContact"
                  class="modern-btn modern-btn-primary px-4 py-2 text-sm flex items-center gap-2"
                >
                  <i class="fas fa-save"></i>
                  ‰øùÂ≠òËÅØÁµ°‰∫∫
                </button>
                <button
                  id="quickImportContact"
                  class="modern-btn modern-btn-secondary px-4 py-2 text-sm flex items-center gap-2"
                >
                  <i class="fas fa-magic"></i>
                  Âø´ÈÄüÂ∞éÂÖ•
                </button>
              </div>

              <!-- Áõ∏ÂêåÊàø‰ª≤ÊèêÁ§∫ -->
              <div
                id="duplicateAgentAlert"
                class="hidden mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg"
              >
                <div class="flex items-center">
                  <i
                    class="fas fa-exclamation-triangle text-yellow-600 mr-2"
                  ></i>
                  <span class="text-sm text-yellow-800"
                    >ÂÅµÊ∏¨Âà∞Áõ∏ÂêåÊàø‰ª≤ÔºåÂ∑≤Ëá™ÂãïÂåØÂÖ•ÊàøÊ∫êË≥áË®ä</span
                  >
                </div>
              </div>
            </div>

            <!-- Ë©ïÂàÜÁµêÊûúÈ°ØÁ§∫ -->
            <div class="grid grid-cols-2 lg:grid-cols-5 gap-4 mb-6">
              <div
                class="col-span-2 lg:col-span-1 modern-card p-4 md:p-6 text-center bg-gradient-to-br from-green-50 to-green-100"
              >
                <div class="score-circle mx-auto mb-4">
                  <div class="score-inner" id="totalScore">0</div>
                </div>
                <h3 class="font-bold text-gray-800 text-sm">Á∏ΩÂàÜ</h3>
                <p class="text-xs text-gray-600">ÊªøÂàÜ100ÂàÜ</p>
              </div>
              <div
                class="modern-card p-4 md:p-6 text-center bg-gradient-to-br from-blue-50 to-blue-100"
              >
                <div
                  class="text-xl md:text-2xl font-bold text-blue-600"
                  id="cpScore"
                >
                  0
                </div>
                <h3 class="font-bold text-gray-800 text-sm">CPÂÄº</h3>
                <p class="text-xs text-gray-600">ÊÄßÂÉπÊØî</p>
              </div>
              <div
                class="modern-card p-4 md:p-6 text-center bg-gradient-to-br from-purple-50 to-purple-100"
              >
                <div
                  class="text-xl md:text-2xl font-bold text-purple-600"
                  id="comfortScore"
                >
                  0
                </div>
                <h3 class="font-bold text-gray-800 text-sm">ËàíÈÅ©Â∫¶</h3>
                <p class="text-xs text-gray-600">Â±Ö‰ΩèÂìÅË≥™</p>
              </div>
              <div
                class="modern-card p-4 md:p-6 text-center bg-gradient-to-br from-orange-50 to-orange-100"
              >
                <div
                  class="text-xl md:text-2xl font-bold text-orange-600"
                  id="convenienceScore"
                >
                  0
                </div>
                <h3 class="font-bold text-gray-800 text-sm">‰æøÂà©ÊÄß</h3>
                <p class="text-xs text-gray-600">ÁîüÊ¥ªÊ©üËÉΩ</p>
              </div>
              <div
                class="modern-card p-4 md:p-6 text-center bg-gradient-to-br from-pink-50 to-pink-100"
              >
                <div
                  class="text-lg md:text-xl font-bold text-pink-600"
                  id="actualRent"
                >
                  0
                </div>
                <h3 class="font-bold text-gray-800 text-sm">ÂØ¶‰ªòÁßüÈáë</h3>
                <p class="text-xs text-gray-600">Êâ£Èô§Ë£úÂä©</p>
              </div>
            </div>

            <!-- Ë©≥Á¥∞Ë©ïÂàÜÈ†ÖÁõÆ - Â∑¶Âè≥ÂàÜÊ¨ÑË®≠Ë®à -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
              <!-- Â∑¶Ê¨Ñ -->
              <div class="space-y-6">
                <!-- Âü∫Êú¨Ë®≠ÊñΩ -->
                <div
                  class="modern-card p-4 md:p-6 bg-gradient-to-r from-blue-50/50 to-blue-100/50"
                >
                  <h3
                    class="text-lg font-bold text-gray-800 mb-4 flex items-center"
                  >
                    <span
                      class="w-6 h-6 bg-blue-500 rounded-lg flex items-center justify-center mr-3"
                    >
                      <i class="fas fa-home text-white text-sm"></i>
                    </span>
                    Âü∫Êú¨Ë®≠ÊñΩ (Ê¨äÈáç25%)
                  </h3>
                  <div class="space-y-3">
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="8"
                        data-category="basic"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >üåÄ Áç®Á´ãÊ¥óË°£ÔºàÁç®Ê¥óÔºâ</span
                      >
                    </label>
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="6"
                        data-category="basic"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >üëî Áç®Á´ãÊôæË°£Á©∫Èñì (Áç®Êõ¨)</span
                      >
                    </label>
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="5"
                        data-category="basic"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >üöΩ ‰πæÊøïÂàÜÈõ¢</span
                      >
                    </label>
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="4"
                        data-category="basic"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >üî• Áç®Á´ãÂªöÊàø/Â∞èÂªöÊàø</span
                      >
                    </label>
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="2"
                        data-category="basic"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >üì∂ Á∂≤Ë∑Ø/Wi-Fi</span
                      >
                    </label>
                  </div>
                </div>

                <!-- Â±Ö‰ΩèÂìÅË≥™ -->
                <div
                  class="modern-card p-4 md:p-6 bg-gradient-to-r from-green-50/50 to-green-100/50"
                >
                  <h3
                    class="text-lg font-bold text-gray-800 mb-4 flex items-center"
                  >
                    <span
                      class="w-6 h-6 bg-green-500 rounded-lg flex items-center justify-center mr-3"
                    >
                      <i class="fas fa-leaf text-white text-sm"></i>
                    </span>
                    Â±Ö‰ΩèÂìÅË≥™ (Ê¨äÈáç30%)
                  </h3>
                  <div class="space-y-3">
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="10"
                        data-category="quality"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >‚òÄÔ∏è ÈÄöÈ¢®Êé°ÂÖâËâØÂ•Ω</span
                      >
                    </label>
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="8"
                        data-category="quality"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >üìè ÊàøÈñìÂ§ßÂ∞èÈÅ©‰∏≠ (6Âù™‰ª•‰∏ä)</span
                      >
                    </label>
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="5"
                        data-category="quality"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >üõèÔ∏è ÊúâÂΩàÁ∞ßÂ∫äÂ¢ä</span
                      >
                    </label>
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="4"
                        data-category="quality"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >üîá Áí∞Â¢ÉÂÆâÈùú</span
                      >
                    </label>
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="3"
                        data-category="quality"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >üè† ÁÑ°Â£ÅÁôåÊºèÊ∞¥</span
                      >
                    </label>
                  </div>
                </div>
              </div>

              <!-- Âè≥Ê¨Ñ -->
              <div class="space-y-6">
                <!-- Ë®≠ÂÇôÂÆ∂Èõª -->
                <div
                  class="modern-card p-4 md:p-6 bg-gradient-to-r from-purple-50/50 to-purple-100/50"
                >
                  <h3
                    class="text-lg font-bold text-gray-800 mb-4 flex items-center"
                  >
                    <span
                      class="w-6 h-6 bg-purple-500 rounded-lg flex items-center justify-center mr-3"
                    >
                      <i class="fas fa-tv text-white text-sm"></i>
                    </span>
                    Ë®≠ÂÇôÂÆ∂Èõª (Ê¨äÈáç20%)
                  </h3>
                  <div class="space-y-3">
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="6"
                        data-category="equipment"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >‚ùÑÔ∏è ÂÜ∑Ê∞£Ê≠£Â∏∏ÈÅã‰Ωú</span
                      >
                    </label>
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="4"
                        data-category="equipment"
                      />
                      <span class="flex-1 text-gray-800 text-sm">üßä ÂÜ∞ÁÆ±</span>
                    </label>
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="4"
                        data-category="equipment"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >üß∫ Ê¥óË°£Ê©ü</span
                      >
                    </label>
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="3"
                        data-category="equipment"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >üî• ÁÜ±Ê∞¥Âô®Ê≠£Â∏∏</span
                      >
                    </label>
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="3"
                        data-category="equipment"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >üîå ÊèíÂ∫ßÈñãÈóúÂÖÖË∂≥</span
                      >
                    </label>
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="4"
                        data-category="equipment"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >üö∞ Ê¥óÊâãÂè∞ÁÑ°ÊºèÊ∞¥</span
                      >
                    </label>
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="4"
                        data-category="equipment"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >üè† Â§©Ëä±ÊùøÁâÜÈù¢ÁÑ°ÊºèÊ∞¥</span
                      >
                    </label>
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="3"
                        data-category="equipment"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >‚ö° ÈõªË≤ª1Â∫¶‰ΩéÊñº5ÂÖÉ</span
                      >
                    </label>
                  </div>
                </div>

                <!-- ÁîüÊ¥ªÊ©üËÉΩ -->
                <div
                  class="modern-card p-4 md:p-6 bg-gradient-to-r from-orange-50/50 to-orange-100/50"
                >
                  <h3
                    class="text-lg font-bold text-gray-800 mb-4 flex items-center"
                  >
                    <span
                      class="w-6 h-6 bg-orange-500 rounded-lg flex items-center justify-center mr-3"
                    >
                      <i class="fas fa-map-marker-alt text-white text-sm"></i>
                    </span>
                    ÁîüÊ¥ªÊ©üËÉΩ (Ê¨äÈáç25%)
                  </h3>
                  <div class="space-y-3">
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="8"
                        data-category="convenience"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >üöá Êç∑ÈÅã/ÂÖ¨ËªäÁ´ô5ÂàÜÈêòÂÖß</span
                      >
                    </label>
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="6"
                        data-category="convenience"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >üè™ ‰æøÂà©ÂïÜÂ∫ó3ÂàÜÈêòÂÖß</span
                      >
                    </label>
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="5"
                        data-category="convenience"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >üõí Ë∂ÖÂ∏Ç/Ë≥£Â†¥10ÂàÜÈêòÂÖß</span
                      >
                    </label>
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="3"
                        data-category="convenience"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >üîí Á§æÂçÄÂÆâÂÖ®ÁÆ°ÁêÜ</span
                      >
                    </label>
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="3"
                        data-category="convenience"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >üóëÔ∏è ÂûÉÂúæËôïÁêÜÊñπ‰æø</span
                      >
                    </label>
                    <label
                      class="checklist-item p-3 bg-white cursor-pointer flex items-center space-x-3"
                    >
                      <input
                        type="checkbox"
                        class="checklist-checkbox"
                        data-weight="4"
                        data-category="convenience"
                      />
                      <span class="flex-1 text-gray-800 text-sm"
                        >üöó ÂÅúËªäÊñπ‰æø</span
                      >
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Ëá™Ë®ÇË©ïÂÉπ -->
            <div
              class="modern-card p-4 md:p-6 bg-gradient-to-r from-gray-50/50 to-gray-100/50 mt-6"
            >
              <h3
                class="text-lg font-bold text-gray-800 mb-4 flex items-center"
              >
                <i class="fas fa-comment-alt text-gray-600 mr-3"></i>
                Ëá™Ë®ÇË©ïÂÉπËàáÂÇôË®ª
              </h3>
              <textarea
                id="customNotes"
                class="w-full p-4 border border-gray-200 rounded-lg resize-none"
                rows="3"
                placeholder="Ëº∏ÂÖ•ÂÄã‰∫∫ËßÄÂØü„ÄÅÊàøÊù±Âç∞Ë±°„ÄÅÁâπÊÆäÊ≥®ÊÑè‰∫ãÈ†ÖÁ≠â..."
              ></textarea>
            </div>

            <!-- Êìç‰ΩúÊåâÈàï -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 mt-6">
              <button
                id="saveEvaluation"
                class="modern-btn modern-btn-primary py-3 px-6 flex items-center justify-center"
              >
                <i class="fas fa-save mr-2"></i>
                <span class="hidden md:inline">‰øùÂ≠òË©ïÂàÜ</span>
                <span class="md:hidden">‰øùÂ≠ò</span>
              </button>
              <button
                id="viewSavedEvaluations"
                class="modern-btn modern-btn-secondary py-3 px-6 flex items-center justify-center"
              >
                <i class="fas fa-list mr-2"></i>
                <span class="hidden md:inline">Êü•ÁúãË®òÈåÑ</span>
                <span class="md:hidden">Ë®òÈåÑ</span>
              </button>
              <button
                id="exportEvaluation"
                class="modern-btn modern-btn-accent py-3 px-6 flex items-center justify-center"
              >
                <i class="fas fa-download mr-2"></i>
                <span class="hidden md:inline">ÂåØÂá∫Ë©ïÂàÜ</span>
                <span class="md:hidden">ÂåØÂá∫</span>
              </button>
              <button
                id="resetEvaluation"
                class="modern-btn modern-btn-info py-3 px-6 flex items-center justify-center"
              >
                <i class="fas fa-redo mr-2"></i>
                <span class="hidden md:inline">ÈáçÊñ∞Ë©ïÂàÜ</span>
                <span class="md:hidden">ÈáçÁΩÆ</span>
              </button>
            </div>
          </div>
        </section>

        <!-- È†êÁ¥ÑÁúãÂ±ãË≥áÊñôÊ®°Êùø -->
        <section class="max-w-4xl mx-auto animate-scale-in">
          <div
            class="modern-card p-4 md:p-8 bg-gradient-to-r from-cyan-50/50 to-cyan-100/50"
          >
            <div class="text-center mb-6">
              <div
                class="inline-flex items-center justify-center w-12 md:w-16 h-12 md:h-16 bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-2xl mb-4 shadow-lg animate-bounce-soft"
              >
                <i
                  class="fas fa-calendar-check text-xl md:text-2xl text-white"
                ></i>
              </div>
              <h2 class="text-xl md:text-3xl font-bold text-gray-800 mb-3">
                üìÖ È†êÁ¥ÑÁúãÂ±ãË≥áÊñôÊ®°Êùø
              </h2>
              <p class="text-gray-600 text-base md:text-lg">
                Âø´ÈÄüÂ°´ÂØ´ÂÄã‰∫∫Ë≥áÊñôÔºåÊèêÂçáÁúãÂ±ãÊàêÂäüÁéá
              </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
              <div class="modern-input p-4">
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >1. Ë´ãÂïèÂπæ‰ΩçÂÖ•‰Ωè</label
                >
                <select
                  id="numResidents"
                  class="w-full text-base font-semibold text-gray-800 bg-transparent outline-none"
                >
                  <option value="">Ë´ãÈÅ∏Êìá</option>
                  <option value="1">1‰Ωç</option>
                  <option value="2">2‰Ωç</option>
                  <option value="3">3‰Ωç</option>
                  <option value="4">4‰Ωç‰ª•‰∏ä</option>
                </select>
              </div>

              <div class="modern-input p-4">
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >2. Ë´ãÂïèÂÖ•‰Ωè‰∫∫Èóú‰øÇÊòØ</label
                >
                <select
                  id="relationship"
                  class="w-full text-base font-semibold text-gray-800 bg-transparent outline-none"
                >
                  <option value="">Ë´ãÈÅ∏Êìá</option>
                  <option value="ÂÄã‰∫∫">ÂÄã‰∫∫</option>
                  <option value="ÊÉÖ‰æ∂">ÊÉÖ‰æ∂</option>
                  <option value="Â§´Â¶ª">Â§´Â¶ª</option>
                  <option value="ÊúãÂèã">ÊúãÂèã</option>
                  <option value="Âêå‰∫ã">Âêå‰∫ã</option>
                  <option value="ÂÆ∂‰∫∫">ÂÆ∂‰∫∫</option>
                </select>
              </div>

              <div class="modern-input p-4">
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >3. Âπ¥ÈΩ°</label
                >
                <input
                  type="number"
                  id="age"
                  class="w-full text-base font-semibold text-gray-800 bg-transparent outline-none"
                  placeholder=""
                  min="18"
                  max="100"
                />
              </div>

              <div class="modern-input p-4">
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >4. Ë´ãÂïèÈ†êË®àÂÖ•‰ΩèÊôÇÈñì</label
                >
                <input
                  type="date"
                  id="moveInDate"
                  class="w-full text-base font-semibold text-gray-800 bg-transparent outline-none"
                />
              </div>

              <div class="modern-input p-4">
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >5. Ë´ãÂïèËÅ∑Ê•≠Ë∫´ÂàÜÊòØ</label
                >
                <input
                  type="text"
                  id="occupation"
                  class="w-full text-base font-semibold text-gray-800 bg-transparent outline-none"
                  placeholder=""
                />
              </div>

              <div class="modern-input p-4">
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >6. ÊúâÁÑ°ÊäΩËè∏</label
                >
                <select
                  id="smoking"
                  class="w-full text-base font-semibold text-gray-800 bg-transparent outline-none"
                >
                  <option value="">Ë´ãÈÅ∏Êìá</option>
                  <option value="ÁÑ°">ÁÑ°</option>
                  <option value="ÊúâÔºå‰ΩÜ‰∏çÂú®ÂÆ§ÂÖß">ÊúâÔºå‰ΩÜ‰∏çÂú®ÂÆ§ÂÖß</option>
                  <option value="Êúâ">Êúâ</option>
                </select>
              </div>

              <div class="modern-input p-4">
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >7. ÊúâÁÑ°ÂØµÁâ©</label
                >
                <select
                  id="pets"
                  class="w-full text-base font-semibold text-gray-800 bg-transparent outline-none"
                >
                  <option value="">Ë´ãÈÅ∏Êìá</option>
                  <option value="ÁÑ°">ÁÑ°</option>
                  <option value="Ë≤ì">Ë≤ì</option>
                  <option value="Áãó">Áãó</option>
                  <option value="ÂÖ∂‰ªñÂ∞èÂãïÁâ©">ÂÖ∂‰ªñÂ∞èÂãïÁâ©</option>
                </select>
              </div>

              <div class="modern-input p-4">
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >8. È†êÁÆó (ÂÖÉ/Êúà)</label
                >
                <input
                  type="number"
                  id="budget"
                  class="w-full text-base font-semibold text-gray-800 bg-transparent outline-none"
                  placeholder=""
                  min="0"
                />
              </div>

              <div class="modern-input p-4 md:col-span-2">
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >9. ÂçÄÂüü</label
                >
                <input
                  type="text"
                  id="preferredArea"
                  class="w-full text-base font-semibold text-gray-800 bg-transparent outline-none"
                  placeholder=""
                />
              </div>
            </div>

            <div class="grid grid-cols-2 gap-3 md:gap-4 mt-6">
              <button
                id="saveViewingTemplate"
                class="modern-btn modern-btn-primary py-3 px-6 flex items-center justify-center"
              >
                <i class="fas fa-save mr-2"></i>
                <span class="hidden md:inline">‰øùÂ≠òÊ®°Êùø</span>
                <span class="md:hidden">‰øùÂ≠ò</span>
              </button>
              <button
                id="clearViewingTemplate"
                class="modern-btn modern-btn-accent py-3 px-6 flex items-center justify-center"
              >
                <i class="fas fa-eraser mr-2"></i>
                <span class="hidden md:inline">Ê∏ÖÈô§Ë°®ÂñÆ</span>
                <span class="md:hidden">Ê∏ÖÈô§</span>
              </button>
              <button
                id="copyViewingInfo"
                class="col-span-2 modern-btn modern-btn-secondary py-3 px-6 flex items-center justify-center"
              >
                <i class="fas fa-copy mr-2"></i>
                Ë§áË£ΩË≥áÊñô
              </button>
            </div>
          </div>
        </section>

        <!-- 2025Âπ¥ÁßüÂ±ãË£úË≤ºË≥áË®ä - Êõ¥Êñ∞ÈõôÁßüË£úË≥áË®ä -->
        <section
          id="rental-subsidy-info"
          class="max-w-6xl mx-auto animate-fade-in"
        >
          <div
            class="modern-card p-4 md:p-8 bg-gradient-to-r from-blue-50/50 to-blue-100/50 border-l-4 border-blue-500"
          >
            <div class="text-center mb-6 md:mb-8">
              <div
                class="inline-flex items-center justify-center w-12 md:w-16 h-12 md:h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl mb-4 shadow-lg animate-bounce-soft"
              >
                <i
                  class="fas fa-money-bill-wave text-xl md:text-2xl text-white"
                ></i>
              </div>
              <h2 class="text-xl md:text-3xl font-bold text-gray-800 mb-3">
                üí∞ 2025Âπ¥ÁßüÂ±ãË£úË≤ºÂÆåÊï¥Ë≥áË®ä
              </h2>
              <p class="text-gray-600 text-base md:text-lg">
                ÊúÄÊñ∞„Äå300ÂÑÑÂÖÉ‰∏≠Â§ÆÊì¥Â§ßÁßüÈáëË£úË≤ºÂ∞àÊ°à„ÄçËàáÈõôÁßüË£úË©≥Ëß£
              </p>
            </div>

            <!-- ÈõôÁßüË£úÁâπÂà•Ë™™Êòé -->
            <div
              class="modern-card p-4 md:p-6 bg-gradient-to-r from-green-50/50 to-green-100/50 border-l-4 border-green-500 mb-6"
            >
              <h3
                class="text-lg md:text-xl font-bold text-gray-800 mb-4 flex items-center"
              >
                <i class="fas fa-users text-green-600 mr-3"></i>
                ‰ªÄÈ∫ºÊòØ„ÄåÈõôÁßüË£ú„ÄçÔºü
              </h3>
              <div class="space-y-3">
                <p class="text-gray-700 leading-relaxed">
                  <span class="font-semibold text-green-700">ÈõôÁßüË£ú</span
                  >ÊòØÊåáÂêå‰∏Ä‰ªΩÁßüË≥ÉÂ•ëÁ¥ÑËÆì2‰∫∫‰ª•‰∏äÁî≥Ë´ãÁßüÈáëË£úË≤ºÔºÅ
                </p>
                <div class="bg-white p-4 rounded-lg">
                  <h4 class="font-semibold text-gray-800 mb-2">üìã Áî≥Ë´ãÊ¢ù‰ª∂</h4>
                  <ul class="space-y-1 text-sm text-gray-700">
                    <li>‚Ä¢ Âú®Âêå‰∏Ä‰ªΩÁßüË≥ÉÂ•ëÁ¥Ñ‰∏äÂØ´ÊòéÁ¥ÑÂÆöÂàÜÂà•Ë≤†Êìî‰πãÁßüÈáëÈáëÈ°ç</li>
                    <li>‚Ä¢ Â•ëÁ¥Ñ‰∏äÈúÄË®ªÊòéÂêÑÊâøÁßü‰∫∫ÂßìÂêç</li>
                    <li>‚Ä¢ ÂèØ‰ª•Áî≥Ë´ã2‰ªΩÁßüË£úÔºàÊØè‰∫∫ÂêÑÁî≥Ë´ã‰∏Ä‰ªΩÔºâ</li>
                  </ul>
                </div>
                <div class="bg-green-100 p-3 rounded-lg">
                  <p class="text-sm text-green-800">
                    <i class="fas fa-lightbulb mr-2"></i>
                    <strong>Â∞èÊèêÈÜíÔºö</strong
                    >ÂêàÁ¥ÑÂÖßÂÆπÂøÖÈ†àÊòéÁ¢∫ËºâÊòéÊØè‰ΩçÊâøÁßü‰∫∫ÁöÑÁßüÈáëÂàÜÊî§ÊØî‰æãÔºÅ
                  </p>
                </div>
              </div>
            </div>

            <!-- Ë£úË≤ºÈáçÈªûË≥áË®ä -->
            <div
              class="grid grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8"
            >
              <div
                class="modern-card p-4 md:p-6 text-center bg-gradient-to-br from-green-50 to-green-100"
              >
                <div
                  class="w-10 md:w-12 h-10 md:h-12 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-3"
                >
                  <i
                    class="fas fa-dollar-sign text-white text-lg md:text-xl"
                  ></i>
                </div>
                <h3 class="font-bold text-gray-800 mb-2 text-sm md:text-base">
                  ÊúÄÈ´òË£úË≤ºÈáëÈ°ç
                </h3>
                <p class="text-lg md:text-2xl font-bold text-green-600">
                  14,400ÂÖÉ
                </p>
                <p class="text-xs md:text-sm text-gray-600 mt-1">ÊØèÊúàË£úÂä©</p>
              </div>

              <div
                class="modern-card p-4 md:p-6 text-center bg-gradient-to-br from-blue-50 to-blue-100"
              >
                <div
                  class="w-10 md:w-12 h-10 md:h-12 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-3"
                >
                  <i class="fas fa-users text-white text-lg md:text-xl"></i>
                </div>
                <h3 class="font-bold text-gray-800 mb-2 text-sm md:text-base">
                  Ë£úÂä©Êà∂Êï∏
                </h3>
                <p class="text-lg md:text-2xl font-bold text-blue-600">
                  75Ëê¨Êà∂
                </p>
                <p class="text-xs md:text-sm text-gray-600 mt-1">2025Âπ¥Êì¥Â§ß</p>
              </div>

              <div
                class="modern-card p-4 md:p-6 text-center bg-gradient-to-br from-purple-50 to-purple-100"
              >
                <div
                  class="w-10 md:w-12 h-10 md:h-12 bg-purple-500 rounded-full flex items-center justify-center mx-auto mb-3"
                >
                  <i
                    class="fas fa-calendar-alt text-white text-lg md:text-xl"
                  ></i>
                </div>
                <h3 class="font-bold text-gray-800 mb-2 text-sm md:text-base">
                  Áî≥Ë´ãÂπ¥ÈΩ°
                </h3>
                <p class="text-lg md:text-2xl font-bold text-purple-600">
                  18Ê≠≤+
                </p>
                <p class="text-xs md:text-sm text-gray-600 mt-1">‰∏ã‰øÆÈñÄÊ™ª</p>
              </div>

              <div
                class="modern-card p-4 md:p-6 text-center bg-gradient-to-br from-orange-50 to-orange-100"
              >
                <div
                  class="w-10 md:w-12 h-10 md:h-12 bg-orange-500 rounded-full flex items-center justify-center mx-auto mb-3"
                >
                  <i class="fas fa-clock text-white text-lg md:text-xl"></i>
                </div>
                <h3 class="font-bold text-gray-800 mb-2 text-sm md:text-base">
                  Áî≥Ë´ãÊñπÂºè
                </h3>
                <p class="text-base md:text-xl font-bold text-orange-600">
                  Èö®ÊôÇÁî≥Ë´ã
                </p>
                <p class="text-xs md:text-sm text-gray-600 mt-1">Èö®Ëæ¶Èö®È†ò</p>
              </div>
            </div>

            <!-- Ë£úË≤ºÂ∞çË±°ËàáÂä†Á¢º -->
            <div
              class="grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8 mb-6 md:mb-8"
            >
              <div
                class="modern-card p-4 md:p-6 bg-gradient-to-br from-cyan-50 to-cyan-100"
              >
                <h3
                  class="text-lg md:text-xl font-bold text-gray-800 mb-4 flex items-center"
                >
                  <i class="fas fa-user-friends text-cyan-600 mr-3"></i>
                  Ë£úË≤ºÂ∞çË±°ËàáÂÄçÊï∏
                </h3>
                <div class="space-y-3">
                  <div
                    class="flex justify-between items-center p-3 bg-white rounded-lg"
                  >
                    <span class="font-medium text-gray-700 text-sm md:text-base"
                      >18-39Ê≠≤ÂñÆË∫´ÈùíÂπ¥</span
                    >
                    <div class="text-right">
                      <span class="font-bold text-cyan-600">1.2ÂÄç</span>
                      <div class="text-xs text-gray-500">ÊúÄÈ´ò2,880ÂÖÉ</div>
                    </div>
                  </div>
                  <div
                    class="flex justify-between items-center p-3 bg-white rounded-lg"
                  >
                    <span class="font-medium text-gray-700 text-sm md:text-base"
                      >ÁµêÂ©ö2Âπ¥ÂÖßÊñ∞Â©ö</span
                    >
                    <div class="text-right">
                      <span class="font-bold text-cyan-600">1.3ÂÄç</span>
                      <div class="text-xs text-gray-500">ÊúÄÈ´ò3,120ÂÖÉ</div>
                    </div>
                  </div>
                  <div
                    class="flex justify-between items-center p-3 bg-white rounded-lg"
                  >
                    <span class="font-medium text-gray-700 text-sm md:text-base"
                      >ËÇ≤Êúâ1ÂêçÊú™ÊàêÂπ¥Â≠êÂ•≥</span
                    >
                    <div class="text-right">
                      <span class="font-bold text-cyan-600">1.4ÂÄç</span>
                      <div class="text-xs text-gray-500">ÊúÄÈ´ò3,360ÂÖÉ</div>
                    </div>
                  </div>
                  <div
                    class="flex justify-between items-center p-3 bg-white rounded-lg"
                  >
                    <span class="font-medium text-gray-700 text-sm md:text-base"
                      >ËÇ≤Êúâ2ÂêçÊú™ÊàêÂπ¥Â≠êÂ•≥</span
                    >
                    <div class="text-right">
                      <span class="font-bold text-cyan-600">1.6ÂÄç</span>
                      <div class="text-xs text-gray-500">ÊúÄÈ´ò3,840ÂÖÉ</div>
                    </div>
                  </div>
                  <div
                    class="flex justify-between items-center p-3 bg-white rounded-lg"
                  >
                    <span class="font-medium text-gray-700 text-sm md:text-base"
                      >ËÇ≤Êúâ3Âêç‰ª•‰∏äÂ≠êÂ•≥</span
                    >
                    <div class="text-right">
                      <span class="font-bold text-cyan-600">1.8ÂÄç</span>
                      <div class="text-xs text-gray-500">ÊúÄÈ´ò4,320ÂÖÉ</div>
                    </div>
                  </div>
                </div>
              </div>

              <div
                class="modern-card p-4 md:p-6 bg-gradient-to-br from-pink-50 to-pink-100"
              >
                <h3
                  class="text-lg md:text-xl font-bold text-gray-800 mb-4 flex items-center"
                >
                  <i class="fas fa-hand-holding-heart text-pink-600 mr-3"></i>
                  Âº±Âã¢Áæ§È´îË£úÂä©
                </h3>
                <div class="space-y-3">
                  <div
                    class="flex justify-between items-center p-3 bg-white rounded-lg"
                  >
                    <span class="font-medium text-gray-700 text-sm md:text-base"
                      >‰ΩéÊî∂ÂÖ•Êà∂</span
                    >
                    <div class="text-right">
                      <span class="font-bold text-pink-600">1.4ÂÄç</span>
                      <div class="text-xs text-gray-500">ÊúÄÈ´ò3,360ÂÖÉ</div>
                    </div>
                  </div>
                  <div
                    class="flex justify-between items-center p-3 bg-white rounded-lg"
                  >
                    <span class="font-medium text-gray-700 text-sm md:text-base"
                      >‰∏≠‰ΩéÊî∂ÂÖ•Êà∂</span
                    >
                    <div class="text-right">
                      <span class="font-bold text-pink-600">1.4ÂÄç</span>
                      <div class="text-xs text-gray-500">ÊúÄÈ´ò3,360ÂÖÉ</div>
                    </div>
                  </div>
                  <div
                    class="flex justify-between items-center p-3 bg-white rounded-lg"
                  >
                    <span class="font-medium text-gray-700 text-sm md:text-base"
                      >Ë∫´ÂøÉÈöúÁ§ôËÄÖ</span
                    >
                    <div class="text-right">
                      <span class="font-bold text-pink-600">1.2ÂÄç</span>
                      <div class="text-xs text-gray-500">ÊúÄÈ´ò2,880ÂÖÉ</div>
                    </div>
                  </div>
                  <div
                    class="flex justify-between items-center p-3 bg-white rounded-lg"
                  >
                    <span class="font-medium text-gray-700 text-sm md:text-base"
                      >Âéü‰ΩèÊ∞ëÊóè</span
                    >
                    <div class="text-right">
                      <span class="font-bold text-pink-600">1.2ÂÄç</span>
                      <div class="text-xs text-gray-500">ÊúÄÈ´ò2,880ÂÖÉ</div>
                    </div>
                  </div>
                  <div
                    class="flex justify-between items-center p-3 bg-white rounded-lg"
                  >
                    <span class="font-medium text-gray-700 text-sm md:text-base"
                      >65Ê≠≤‰ª•‰∏äÈï∑ËÄÖ</span
                    >
                    <div class="text-right">
                      <span class="font-bold text-pink-600">1.2ÂÄç</span>
                      <div class="text-xs text-gray-500">ÊúÄÈ´ò2,880ÂÖÉ</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Áî≥Ë´ãÈÄ£ÁµêËàáÁõ∏ÈóúË≥áÊ∫ê -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
              <div
                class="modern-card p-4 md:p-6 bg-gradient-to-br from-blue-500 to-blue-600 text-white"
              >
                <h3 class="text-lg md:text-xl font-bold mb-4 flex items-center">
                  <i class="fas fa-external-link-alt mr-3"></i>
                  Á∑ö‰∏äÁî≥Ë´ã
                </h3>
                <p class="mb-4 opacity-90 text-sm md:text-base">
                  Áõ¥Êé•ÈÄ≤ÂÖ•ÂÆòÊñπÁ∂≤Á´ôÈÄ≤Ë°åÁ∑ö‰∏äÁî≥Ë´ãÔºåÂø´ÈÄü‰æøÂà©
                </p>
                <a
                  href="https://has.nlma.gov.tw/house300e/front/applyAInfo"
                  target="_blank"
                  class="modern-btn bg-white text-blue-600 hover:bg-blue-50 py-2 md:py-3 px-4 md:px-6 inline-flex items-center"
                >
                  <i class="fas fa-mouse-pointer mr-2"></i>
                  Á´ãÂç≥Áî≥Ë´ã
                </a>
              </div>

              <div
                class="modern-card p-4 md:p-6 bg-gradient-to-br from-green-500 to-green-600 text-white"
              >
                <h3 class="text-lg md:text-xl font-bold mb-4 flex items-center">
                  <i class="fas fa-phone-alt mr-3"></i>
                  Ë´ÆË©¢ÊúçÂãô
                </h3>
                <p class="mb-4 opacity-90 text-sm md:text-base">
                  Â¶ÇÊúâÁñëÂïèÂèØÊí•ÊâìË´ÆË©¢Â∞àÁ∑öÊàñÊü•Ë©¢Áî≥Ë´ãÈÄ≤Â∫¶
                </p>
                <div class="space-y-2 text-sm md:text-base">
                  <p class="flex items-center">
                    <i class="fas fa-phone mr-2"></i>
                    Ë´ÆË©¢Â∞àÁ∑öÔºö02-7729-8003
                  </p>
                  <p class="flex items-center text-xs md:text-sm opacity-80">
                    <i class="fas fa-clock mr-2"></i>
                    ÊúçÂãôÊôÇÈñìÔºöÈÄ±‰∏ÄËá≥ÈÄ±‰∫î 8:00-18:00
                  </p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- ÁßüÂ±ãÈò≤Ë©êÈ®ôÊåáÂçó -->
        <section class="max-w-6xl mx-auto animate-scale-in">
          <div class="modern-card warning-card p-4 md:p-8">
            <div class="text-center mb-6 md:mb-8">
              <div
                class="inline-flex items-center justify-center w-12 md:w-16 h-12 md:h-16 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl mb-4 shadow-lg animate-wiggle"
              >
                <i class="fas fa-shield-alt text-xl md:text-2xl text-white"></i>
              </div>
              <h2 class="text-xl md:text-3xl font-bold text-gray-800 mb-3">
                üö® ÁßüÂ±ãÈò≤Ë©êÈ®ôÂÆåÂÖ®ÊåáÂçó
              </h2>
              <p class="text-gray-600 text-base md:text-lg">
                Ë≠òÂà•Â∏∏Ë¶ãË©êÈ®ôÊâãÊ≥ïÔºå‰øùË≠∑ÊÇ®ÁöÑË≤°Áî¢ÂÆâÂÖ®
              </p>
            </div>

            <!-- Â∏∏Ë¶ãË©êÈ®ôÈ°ûÂûã -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
              <div class="modern-card p-6 bg-white">
                <h3
                  class="text-lg font-bold text-red-600 mb-4 flex items-center"
                >
                  <i class="fas fa-exclamation-triangle mr-3"></i>
                  FBÁßüÂ±ãÁ§æÂúòË©êÈ®ôÁâπÂæµ
                </h3>
                <div class="space-y-3">
                  <div class="flex items-start space-x-3">
                    <span class="tag red">Âç±Èö™</span>
                    <div>
                      <h4 class="font-semibold text-gray-800">ÂÉπÊ†ºÊòéÈ°ØÈÅé‰Ωé</h4>
                      <p class="text-sm text-gray-600">
                        ÁßüÈáëÈÅ†‰ΩéÊñºÂ∏ÇÂÉπÔºåÂ¶Ç‰ø°Áæ©ÂçÄ2Ëê¨ÂÖÉ‰ª•‰∏ã
                      </p>
                    </div>
                  </div>
                  <div class="flex items-start space-x-3">
                    <span class="tag red">Âç±Èö™</span>
                    <div>
                      <h4 class="font-semibold text-gray-800">Á¶ÅÊ≠¢ÁïôË®Ä</h4>
                      <p class="text-sm text-gray-600">
                        Ë≤ºÊñáÈóúÈñâÁïôË®ÄÂäüËÉΩÔºåÂè™ËÉΩÁßÅË®ä
                      </p>
                    </div>
                  </div>
                  <div class="flex items-start space-x-3">
                    <span class="tag red">Âç±Èö™</span>
                    <div>
                      <h4 class="font-semibold text-gray-800">Â§ßÈáèÊÄíÁ¨¶ÂèçÊáâ</h4>
                      <p class="text-sm text-gray-600">
                        Ë≤ºÊñáË¢´Â§ßÈáèÊåâÊÄíÁ¨¶ÔºåË°®Á§∫ÂèØÁñë
                      </p>
                    </div>
                  </div>
                  <div class="flex items-start space-x-3">
                    <span class="tag red">Âç±Èö™</span>
                    <div>
                      <h4 class="font-semibold text-gray-800">ÁÖßÁâáÈáçË§á‰ΩøÁî®</h4>
                      <p class="text-sm text-gray-600">
                        ÂúñÁâá‰æÜÊ∫êÂèØÁñëÊàñÂú®Â§öËôïÈáçË§áÂá∫Áèæ
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="modern-card p-6 bg-white">
                <h3
                  class="text-lg font-bold text-orange-600 mb-4 flex items-center"
                >
                  <i class="fas fa-building mr-3"></i>
                  Êàø‰ª≤Ë©êÈ®ôÊâãÊ≥ï
                </h3>
                <div class="space-y-3">
                  <div class="flex items-start space-x-3">
                    <span class="tag red">Ë≠¶Âëä</span>
                    <div>
                      <h4 class="font-semibold text-gray-800">Â∑≤ÂîÆ‰∏ç‰∏ãÊû∂</h4>
                      <p class="text-sm text-gray-600">
                        Â∑≤Âá∫Áßü‰∏ç‰∏ãÊû∂ÔºåÁî®‰æÜÂ∞éÊµÅÁúãÂÖ∂‰ªñÊàø
                      </p>
                    </div>
                  </div>
                  <div class="flex items-start space-x-3">
                    <span class="tag red">Ë≠¶Âëä</span>
                    <div>
                      <h4 class="font-semibold text-gray-800">ËôõÂÅáË∫´‰ªΩ</h4>
                      <p class="text-sm text-gray-600">
                        ÂÜíÂÖÖÊàøÊù±Êàñ‰ΩøÁî®ÂÅáÁöÑÊàø‰ª≤Ë≠âÁÖß
                      </p>
                    </div>
                  </div>
                  <div class="flex items-start space-x-3">
                    <span class="tag red">Ë≠¶Âëä</span>
                    <div>
                      <h4 class="font-semibold text-gray-800">ÊÄ•Ëø´ÊÑüÁáüÈÄ†</h4>
                      <p class="text-sm text-gray-600">
                        ËÅ≤Á®±ÂæàÊê∂ÊâãÔºåÂÇ¨‰øÉÁ´ãÂç≥Ê±∫ÂÆö
                      </p>
                    </div>
                  </div>
                  <div class="flex items-start space-x-3">
                    <span class="tag red">Ë≠¶Âëä</span>
                    <div>
                      <h4 class="font-semibold text-gray-800">Ë¶ÅÊ±ÇÂÖà‰ªòÊ¨æ</h4>
                      <p class="text-sm text-gray-600">
                        ÁúãÊàøÂâçË¶ÅÊ±ÇÂåØÊ¨æÊàñ‰ªòË®ÇÈáë
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Èò≤Ë©êÈ®ôËá™‰øùÊñπÊ≥ï -->
            <div
              class="modern-card p-6 bg-gradient-to-r from-green-50/80 to-green-100/80"
            >
              <h3
                class="text-lg font-bold text-green-700 mb-4 flex items-center"
              >
                <i class="fas fa-shield-alt mr-3"></i>
                ÁßüÂ±ãÈò≤Ë©êÈ®ôËá™‰øùÊñπÊ≥ï
              </h3>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="space-y-3">
                  <h4 class="font-semibold text-gray-800">üîç ÁúãÊàøÂâçÂøÖÂÅö</h4>
                  <ul class="space-y-2 text-sm text-gray-700">
                    <li>‚Ä¢ Êú™ÁúãÊàøÂâçÁµï‰∏çÂåØÊ¨æ</li>
                    <li>‚Ä¢ Êü•Ë≠âÊàøÊù±Ë∫´‰ªΩË≠âÊòé</li>
                    <li>‚Ä¢ Ê†∏Â∞çÊàøÂ±ãÊ¨äÁãÄÊàñÁ®ÖÂñÆ</li>
                    <li>‚Ä¢ Á¢∫Ë™çËÅØÁµ°ÊñπÂºèÁúüÂØ¶ÊÄß</li>
                    <li>‚Ä¢ Google‰ª•ÂúñÊêúÂúñÊ™¢Êü•ÁÖßÁâá</li>
                    <li>
                      ‚Ä¢
                      <a
                        href="https://resim.land.moi.gov.tw/Home/PriIndex"
                        target="_blank"
                        class="text-blue-600 hover:text-blue-800 underline"
                        >Êü•Ë©¢Êàø‰ª≤ÁáüÊ•≠Âì°Ë≠âÁÖß</a
                      >
                    </li>
                  </ul>
                </div>
                <div class="space-y-3">
                  <h4 class="font-semibold text-gray-800">‚ö†Ô∏è Èò≤Ë©ê‰∫î‰∏çÂéüÂâá</h4>
                  <ul class="space-y-2 text-sm text-gray-700">
                    <li>‚Ä¢ ‰∏çËºïÊòìÁµ¶Èå¢„ÄÅÊèê‰æõË∫´ÂàÜË≠â</li>
                    <li>‚Ä¢ ‰∏ç‰ø°ÈÅé‰ΩéÁßüÈáë„ÄÅÁ≤æÁæéË£ùÊΩ¢</li>
                    <li>‚Ä¢ ‰∏çÊé•ÂèóÈùûÂØ¶Âú∞ÁúãÊàø</li>
                    <li>‚Ä¢ ‰∏ç‰ø°‰∏çÁõ∏Âπ≤ÂïèÈ°å</li>
                    <li>‚Ä¢ ‰∏ç‰ø°Êñ∞Â∏≥Ëôü„ÄÅÁÑ°È†≠ÂÉè</li>
                  </ul>
                </div>
                <div class="space-y-3">
                  <h4 class="font-semibold text-gray-800">üõ°Ô∏è ÂÆâÂÖ®‰∫§ÊòìÂÆàÂâá</h4>
                  <ul class="space-y-2 text-sm text-gray-700">
                    <li>‚Ä¢ Â†ÖÊåÅÂØ¶Âú∞ÁúãÊàø„ÄÅÁµê‰º¥ÂâçÂæÄ</li>
                    <li>‚Ä¢ Âú®ÂÖ¨ÈñãÂ†¥ÊâÄÁ∞ΩÁ¥Ñ</li>
                    <li>‚Ä¢ ‰ΩøÁî®Ê≠£Ë¶èÁßüÂ±ãÂπ≥Âè∞</li>
                    <li>‚Ä¢ Ê†∏Â∞çÂêàÁ¥ÑÁ¥∞ÁØÄËàáÊ¨äÁãÄ</li>
                    <li>‚Ä¢ ‰øùÁïôÊâÄÊúâÂ∞çË©±Ë®òÈåÑ</li>
                    <li>‚Ä¢ Áñë‰ººË©êÈ®ôÊí•Êâì165Â∞àÁ∑ö</li>
                  </ul>
                </div>
              </div>
              <div class="mt-4 p-3 bg-red-50 border border-red-200 rounded-lg">
                <p class="text-xs text-red-700 flex items-center">
                  <i class="fas fa-exclamation-triangle mr-2"></i>
                  <strong>Ë≠¶ÂëäÔºö</strong>
                  ÁúãÂà∞ÊòéÈ°Ø‰ΩéÊñºÂ∏ÇÂÉπ„ÄÅË£ùÊΩ¢Á≤æÁæé‰ΩÜÂè™Ë¶ÅÊ±ÇLINEËÅØÁµ°ÁöÑÁâ©‰ª∂ÔºåÂæàÂèØËÉΩÊòØË©êÈ®ôÔºÅ
                </p>
              </div>
            </div>

            <!-- Á∑äÊÄ•ËÅØÁµ°Ë≥áË®ä -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
              <div class="modern-card p-4 text-center bg-red-50">
                <h4 class="font-bold text-red-600 mb-2">ÈÅáÂà∞Ë©êÈ®ô</h4>
                <p class="text-2xl font-bold text-red-600">165</p>
                <p class="text-sm text-gray-600">ÂèçË©êÈ®ôÂ∞àÁ∑ö</p>
              </div>
              <div class="modern-card p-4 text-center bg-blue-50">
                <h4 class="font-bold text-blue-600 mb-2">Â†±Ê°àÂ∞àÁ∑ö</h4>
                <p class="text-2xl font-bold text-blue-600">110</p>
                <p class="text-sm text-gray-600">Ë≠¶ÂØüÂ±Ä</p>
              </div>
              <div class="modern-card p-4 text-center bg-green-50">
                <h4 class="font-bold text-green-600 mb-2">Ê∂à‰øùÁî≥Ë®¥</h4>
                <p class="text-2xl font-bold text-green-600">1950</p>
                <p class="text-sm text-gray-600">Ê∂àË≤ªËÄÖ‰øùË≠∑</p>
              </div>
            </div>
          </div>
        </section>
      </main>

      <!-- È†ÅÂ∞æ -->
      <footer class="bg-gray-800 text-white py-6 md:py-8 mt-8 md:mt-12">
        <div class="container mx-auto px-4 text-center">
          <div class="flex flex-col md:flex-row items-center justify-between">
            <div class="mb-4 md:mb-0">
              <p class="text-gray-300 mb-2 text-sm md:text-base">
                ¬© 2025 Â∞àÊ•≠ÁßüÂ±ãÁúãÊàøÂÖ®ËÉΩÂ∑•ÂÖ∑ - Áèæ‰ª£ÂåñÁâà
              </p>
              <p class="text-xs md:text-sm text-gray-400">
                Ë≥áÊñô‰æÜÊ∫êÔºöÂÖßÊîøÈÉ®ÂúãÂúüÁÆ°ÁêÜÁΩ≤ |
                Êú¨Â∑•ÂÖ∑ÂÉÖ‰æõÂèÉËÄÉÔºåÂØ¶ÈöõÁî≥Ë´ãË´ã‰ª•ÊîøÂ∫úÂÆòÊñπÂÖ¨ÂëäÁÇ∫Ê∫ñ
              </p>
            </div>
            <div class="flex items-center space-x-4">
              <a
                href="https://www.threads.com/@azlife_1224?invite=0"
                target="_blank"
                class="text-gray-300 hover:text-white transition-colors"
              >
                <i class="fab fa-threads text-xl"></i>
              </a>
              <button
                id="shareFooter"
                class="text-gray-300 hover:text-white transition-colors"
              >
                <i class="fas fa-share-alt text-xl"></i>
              </button>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <!-- Modal ÂÆπÂô® -->

    <!-- Â∏∏Ë¶ãÂ∞∫ÂØ∏ Modal -->
    <div
      id="presetModal"
      class="fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4"
    >
      <div class="modern-card max-w-md w-full animate-scale-in">
        <div class="p-4 md:p-6">
          <div class="flex justify-between items-center mb-6">
            <h3
              class="text-xl md:text-2xl font-bold text-gray-800 flex items-center"
            >
              <i class="fas fa-home text-primary-500 mr-3"></i>
              Â∏∏Ë¶ãÊàøÂûãÂ∞∫ÂØ∏
            </h3>
            <button
              id="closePreset"
              class="modern-btn modern-btn-secondary p-3"
            >
              <i class="fas fa-times text-gray-600"></i>
            </button>
          </div>

          <div class="space-y-3">
            <button
              class="preset-size w-full p-4 modern-card text-left hover:bg-blue-50 transition-colors"
              data-length="2.5"
              data-width="2.5"
            >
              <div class="flex justify-between items-center">
                <span class="font-medium">Ëø∑‰Ω†Â•óÊàø</span>
                <span class="text-sm text-gray-500">2.5m √ó 2.5m</span>
              </div>
              <div class="text-xs text-gray-400 mt-1">Á¥Ñ 1.9 Âù™</div>
            </button>

            <button
              class="preset-size w-full p-4 modern-card text-left hover:bg-blue-50 transition-colors"
              data-length="3"
              data-width="3"
            >
              <div class="flex justify-between items-center">
                <span class="font-medium">Â∞èÂ•óÊàø</span>
                <span class="text-sm text-gray-500">3m √ó 3m</span>
              </div>
              <div class="text-xs text-gray-400 mt-1">Á¥Ñ 2.7 Âù™</div>
            </button>

            <button
              class="preset-size w-full p-4 modern-card text-left hover:bg-blue-50 transition-colors"
              data-length="4"
              data-width="3"
            >
              <div class="flex justify-between items-center">
                <span class="font-medium">Ê®ôÊ∫ñÂ•óÊàø</span>
                <span class="text-sm text-gray-500">4m √ó 3m</span>
              </div>
              <div class="text-xs text-gray-400 mt-1">Á¥Ñ 3.6 Âù™</div>
            </button>

            <button
              class="preset-size w-full p-4 modern-card text-left hover:bg-blue-50 transition-colors"
              data-length="5"
              data-width="4"
            >
              <div class="flex justify-between items-center">
                <span class="font-medium">Â§ßÂ•óÊàø</span>
                <span class="text-sm text-gray-500">5m √ó 4m</span>
              </div>
              <div class="text-xs text-gray-400 mt-1">Á¥Ñ 6.0 Âù™</div>
            </button>

            <button
              class="preset-size w-full p-4 modern-card text-left hover:bg-blue-50 transition-colors"
              data-length="6"
              data-width="4"
            >
              <div class="flex justify-between items-center">
                <span class="font-medium">‰∏ÄÊàø‰∏ÄÂª≥</span>
                <span class="text-sm text-gray-500">6m √ó 4m</span>
              </div>
              <div class="text-xs text-gray-400 mt-1">Á¥Ñ 7.3 Âù™</div>
            </button>

            <button
              class="preset-size w-full p-4 modern-card text-left hover:bg-blue-50 transition-colors"
              data-length="8"
              data-width="5"
            >
              <div class="flex justify-between items-center">
                <span class="font-medium">ÂÖ©Êàø‰∏ÄÂª≥</span>
                <span class="text-sm text-gray-500">8m √ó 5m</span>
              </div>
              <div class="text-xs text-gray-400 mt-1">Á¥Ñ 12.1 Âù™</div>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Â∑≤‰øùÂ≠òË©ïÂàÜ Modal -->
    <div
      id="savedEvaluationsModal"
      class="fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4"
    >
      <div
        class="modern-card max-w-4xl w-full max-h-[80vh] overflow-y-auto animate-scale-in"
      >
        <div class="p-4 md:p-6">
          <div class="flex justify-between items-center mb-6">
            <h3
              class="text-xl md:text-2xl font-bold text-gray-800 flex items-center"
            >
              <i class="fas fa-history text-secondary-500 mr-3"></i>
              Â∑≤‰øùÂ≠òÁöÑË©ïÂàÜË®òÈåÑ
            </h3>
            <button
              id="closeSavedEvaluations"
              class="modern-btn modern-btn-secondary p-3"
            >
              <i class="fas fa-times text-gray-600"></i>
            </button>
          </div>

          <div id="savedEvaluationsList" class="space-y-4">
            <!-- ÂãïÊÖãÁîüÊàêÂ∑≤‰øùÂ≠òÁöÑË©ïÂàÜ -->
          </div>
        </div>
      </div>
    </div>

    <!-- ËÅØÁµ°Á∞ø Modal -->
    <div
      id="contactBookModal"
      class="fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4"
    >
      <div
        class="modern-card max-w-4xl w-full max-h-[80vh] overflow-y-auto animate-scale-in"
      >
        <div class="p-4 md:p-6">
          <div class="flex justify-between items-center mb-6">
            <h3
              class="text-xl md:text-2xl font-bold text-gray-800 flex items-center"
            >
              <i class="fas fa-address-book text-indigo-600 mr-3"></i>
              Êàø‰ª≤/Â±ã‰∏ªËÅØÁµ°Á∞ø
            </h3>
            <button
              id="closeContactBook"
              class="modern-btn modern-btn-secondary p-3"
            >
              <i class="fas fa-times text-gray-600"></i>
            </button>
          </div>

          <div id="contactBookList" class="space-y-4">
            <!-- ÂãïÊÖãÁîüÊàêËÅØÁµ°‰∫∫ÂàóË°® -->
          </div>

          <div class="text-center mt-6">
            <p class="text-gray-500 text-sm">Â∞öÁÑ°‰øùÂ≠òÁöÑËÅØÁµ°‰∫∫Ë®òÈåÑ</p>
          </div>
        </div>
      </div>
    </div>

    <!-- ÈÄöÁü•Á≥ªÁµ± -->
    <div id="notification" class="notification-container">
      <div class="modern-card px-4 md:px-6 py-3 md:py-4 min-w-80">
        <div class="flex items-center space-x-3">
          <div id="notificationIcon" class="flex-shrink-0"></div>
          <div class="flex-1">
            <p
              id="notificationMessage"
              class="font-medium text-gray-800 text-sm md:text-base"
            ></p>
          </div>
          <button
            id="closeNotification"
            class="flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors"
          >
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- ÂàÜ‰∫´Ê®°ÊÖãÁ™ó JavaScript -->
    <script>
      /* ========== shareModal.js (ÁßüÂ±ãÁâà + È†êË®≠ Threads ÈÄ£Áµê) ========== */
      (function () {
        class ShareModal {
          static open(opts = {}) {
            document.querySelector("#sm-modal")?.remove();

            if (!document.querySelector("#sm-style")) {
              const css = `
        :root{--sm-p:#ff6b81;--sm-s:#2e86de;--sm-ok:#2ed573;--sm-r:12px;--sm-b:0 8px 20px rgba(0,0,0,.12)}
        #sm-modal{position:fixed;inset:0;display:none;background:rgba(0,0,0,.55);z-index:9999;animation:sm-fade .25s}
        .sm-box{background:#fff;width:92%;max-width:640px;margin:10% auto;padding:32px 28px;border-radius:var(--sm-r);box-shadow:var(--sm-b);position:relative;animation:sm-slide .35s}
        .sm-close{position:absolute;top:14px;right:18px;font-size:28px;color:#888;cursor:pointer;transition:.2s}.sm-close:hover{color:#333}
        .sm-title{font-size:1.6rem;color:var(--sm-p);text-align:center;margin-bottom:10px}
        .sm-desc{font-size:.95rem;color:#666;text-align:center;margin-bottom:24px}
        .sm-btns{display:flex;gap:18px;justify-content:center;flex-wrap:wrap}
        .sm-btn{flex:1 1 140px;max-width:180px;background:var(--sm-s);color:#fff;border:none;border-radius:var(--sm-r);padding:14px 8px;display:flex;flex-direction:column;align-items:center;cursor:pointer;transition:.25s;box-shadow:var(--sm-b);font-weight:bold;text-decoration:none}
        .sm-btn:hover{transform:translateY(-6px)}
        .sm-btn i{font-size:2rem;margin-bottom:6px}
        .sm-btn.threads{background:linear-gradient(145deg,#000,#3a3a3a)}
        .sm-btn.copy{background:linear-gradient(145deg,var(--sm-s),#1b6faa)}
        .sm-ok{display:none;margin-top:22px;background:#e8f5e9;color:#2e7d32;padding:14px;border-radius:var(--sm-r);text-align:center;font-weight:600;animation:sm-up .4s}
        .sm-ok.show{display:block}
        @keyframes sm-fade{from{opacity:0}to{opacity:1}}@keyframes sm-slide{from{opacity:0;transform:translateY(-40px)}to{opacity:1;transform:translateY(0)}}@keyframes sm-up{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
        @media(max-width:480px){.sm-box{padding:24px 18px;margin:18% auto}.sm-title{font-size:1.35rem}.sm-btn i{font-size:1.6rem}}`;
              const style = document.createElement("style");
              style.id = "sm-style";
              style.textContent = css;
              document.head.appendChild(style);
            }

            const modal = document.createElement("div");
            modal.id = "sm-modal";
            modal.innerHTML = `
                <div class="sm-box">
                  <span class="sm-close">&times;</span>
                  <h3 class="sm-title">${
                    opts.title || "Â∞àÊ•≠ÁßüÂ±ãÂ∑•ÂÖ∑Â∑≤Â∞±Á∑íÔºÅ"
                  }</h3>
                  <p  class="sm-desc">${
                    opts.desc ||
                    "Êô∫ËÉΩË©ïÂàÜÁ≥ªÁµ±„ÄÅÈò≤Ë©êÈ®ôÊåáÂçó„ÄÅÂ§öÊ®°ÂºèË®àÁÆóÂô®Ôºå‰∏ÄÈçµÂàÜ‰∫´Áµ¶ÈúÄË¶ÅÁöÑ‰∫∫ÔºÅ"
                  }</p>
                  <div class="sm-btns">
                    <a class="sm-btn threads" target="_blank">
                      <i class="fa-brands fa-threads"></i><span>Threads ÂàÜ‰∫´</span>
                    </a>
                    <button class="sm-btn copy">
                      <i class="fa-solid fa-link"></i><span>Ë§áË£ΩÊñáÊ°à</span>
                    </button>
                  </div>
                  <div class="sm-ok">ÊñáÊ°àÂ∑≤Ë§áË£ΩÔºÅ</div>
                </div>`;
            document.body.appendChild(modal);

            modal.style.display = "block";
            modal.onclick = (e) => e.target === modal && modal.remove();
            modal.querySelector(".sm-close").onclick = () => modal.remove();

            const DEFAULT_THREADS =
              "https://www.threads.com/@azlife_1224?invite=0";
            modal.querySelector(".threads").href = DEFAULT_THREADS;

            const okBox = modal.querySelector(".sm-ok");
            modal.querySelector(".copy").onclick = () => {
              const defaultShare =
                "üè† Â∞àÊ•≠ÁßüÂ±ãÁúãÊàøÂÖ®ËÉΩÂ∑•ÂÖ∑‰æÜÂï¶ÔºÅ\n" +
                "‚≠ê Êô∫ËÉΩË©ïÂàÜÁ≥ªÁµ±\n" +
                "üìê Â§öÊ®°ÂºèÂù™Êï∏Ë®àÁÆóÂô®\n" +
                "üìÖ È†êÁ¥ÑÁúãÂ±ãË≥áÊñôÊ®°Êùø\n" +
                "üö® Èò≤Ë©êÈ®ôÂÆåÂÖ®ÊåáÂçó\n" +
                "üí∞ 2025Âπ¥ÊúÄÊñ∞ÁßüÂ±ãË£úË≤º\n\n";
              const txt =
                (opts.shareText !== undefined ? opts.shareText : defaultShare) +
                DEFAULT_THREADS;
              navigator.clipboard.writeText(txt).then(() => {
                okBox.classList.add("show");
                setTimeout(() => okBox.classList.remove("show"), 2500);
              });
            };
          }
        }

        window.ShareModal = ShareModal;
      })();
    </script>

    <script>
      // ===== Á≥ªÁµ±ËÆäÊï∏ËàáÂ∏∏Êï∏ =====
      let currentInputMode = "dimensions";
      let currentEvaluationScore = 0;
      let selectedItems = new Map();
      let savedEvaluations = [];
      let viewingTemplate = {};
      let savedContacts = [];
      let notificationTimeout = null;

      // Ë±êÂØåÁöÑÂØ¶Áâ©ÊØîËºÉË≥áÊñô
      const ITEM_COMPARISONS = [
        {
          name: "ÂñÆ‰∫∫Â∫ä",
          sqm: 1.9,
          icon: "üõèÔ∏è",
          category: "ÂÆ∂ÂÖ∑",
          description: "Ê®ôÊ∫ñÂñÆ‰∫∫Â∫ä 90√ó190cm",
        },
        {
          name: "Èõô‰∫∫Â∫ä",
          sqm: 3.04,
          icon: "üõèÔ∏è",
          category: "ÂÆ∂ÂÖ∑",
          description: "Ê®ôÊ∫ñÈõô‰∫∫Â∫ä 152√ó190cm",
        },
        {
          name: "Èõô‰∫∫Ê≤ôÁôº",
          sqm: 1.6,
          icon: "üõãÔ∏è",
          category: "ÂÆ∂ÂÖ∑",
          description: "Ê®ôÊ∫ñÈõô‰∫∫Ê≤ôÁôº 160√ó80cm",
        },
        {
          name: "‰∏â‰∫∫Ê≤ôÁôº",
          sqm: 2.4,
          icon: "üõãÔ∏è",
          category: "ÂÆ∂ÂÖ∑",
          description: "‰∏â‰∫∫Ê≤ôÁôº 200√ó120cm",
        },
        {
          name: "Êõ∏Ê°å",
          sqm: 0.8,
          icon: "üìö",
          category: "ÂÆ∂ÂÖ∑",
          description: "Ê®ôÊ∫ñÊõ∏Ê°å 120√ó80cm",
        },
        {
          name: "Ë°£Ê´É",
          sqm: 1.2,
          icon: "üëï",
          category: "ÂÆ∂ÂÖ∑",
          description: "ÈõôÈñÄË°£Ê´É 120√ó60cm",
        },
        {
          name: "Ëå∂Âá†",
          sqm: 0.6,
          icon: "‚òï",
          category: "ÂÆ∂ÂÖ∑",
          description: "ÂÆ¢Âª≥Ëå∂Âá† 100√ó60cm",
        },
        {
          name: "È§êÊ°å",
          sqm: 1.35,
          icon: "üçΩÔ∏è",
          category: "ÂÆ∂ÂÖ∑",
          description: "Âõõ‰∫∫È§êÊ°å 150√ó90cm",
        },
        {
          name: "ÂÜ∞ÁÆ±",
          sqm: 0.36,
          icon: "‚ùÑÔ∏è",
          category: "ÂÆ∂Èõª",
          description: "Ê®ôÊ∫ñÂÜ∞ÁÆ± 60√ó60cm",
        },
        {
          name: "Ê¥óË°£Ê©ü",
          sqm: 0.36,
          icon: "üß∫",
          category: "ÂÆ∂Èõª",
          description: "Áõ¥Á´ãÊ¥óË°£Ê©ü 60√ó60cm",
        },
        {
          name: "ÊªæÁ≠íÊ¥óË°£Ê©ü",
          sqm: 0.6,
          icon: "üß∫",
          category: "ÂÆ∂Èõª",
          description: "ÊªæÁ≠íÊ¥óË°£Ê©ü 60√ó100cm",
        },
        {
          name: "ÈõªË¶ñÊ´É",
          sqm: 1.0,
          icon: "üì∫",
          category: "ÂÆ∂Èõª",
          description: "ÈõªË¶ñÊ´É 150√ó40cm",
        },
        {
          name: "ÁëúÁèàÂ¢ä",
          sqm: 1.2,
          icon: "üßò",
          category: "ÈÅãÂãï",
          description: "Ê®ôÊ∫ñÁëúÁèàÂ¢ä 180√ó60cm",
        },
        {
          name: "Ë∑ëÊ≠•Ê©ü",
          sqm: 1.4,
          icon: "üèÉ",
          category: "ÈÅãÂãï",
          description: "ÂÆ∂Áî®Ë∑ëÊ≠•Ê©ü 200√ó70cm",
        },
        {
          name: "ÂÅúËªä‰Ωç",
          sqm: 12.5,
          icon: "üöó",
          category: "Á©∫Èñì",
          description: "Ê®ôÊ∫ñÂÅúËªä‰Ωç 5√ó2.5m",
        },
        {
          name: "‰æøÂà©ÂïÜÂ∫ó",
          sqm: 100,
          icon: "üè™",
          category: "Á©∫Èñì",
          description: "‰∏ÄËà¨‰æøÂà©ÂïÜÂ∫ó",
        },
        {
          name: "Â∞èÂ•óÊàø",
          sqm: 15,
          icon: "üè†",
          category: "Á©∫Èñì",
          description: "6-8Âù™Â∞èÂ•óÊàø",
        },
        {
          name: "Ê®ôÊ∫ñÊïôÂÆ§",
          sqm: 64,
          icon: "üè´",
          category: "Á©∫Èñì",
          description: "Ê®ôÊ∫ñÊïôÂÆ§ 8√ó8m",
        },
        {
          name: "Á±ÉÁêÉÂ†¥",
          sqm: 420,
          icon: "üèÄ",
          category: "ÈÅãÂãï",
          description: "Ê®ôÊ∫ñÁ±ÉÁêÉÂ†¥",
        },
        {
          name: "Á∂≤ÁêÉÂ†¥",
          sqm: 261,
          icon: "üéæ",
          category: "ÈÅãÂãï",
          description: "Ê®ôÊ∫ñÁ∂≤ÁêÉÂ†¥",
        },
      ];

      // ===== DOM ÂÖÉÁ¥†ÂºïÁî® =====
      const lengthInput = document.getElementById("length");
      const widthInput = document.getElementById("width");
      const directSqmInput = document.getElementById("directSqm");
      const directPingInput = document.getElementById("directPing");
      const sqmResult = document.getElementById("sqmResult");
      const pingResult = document.getElementById("pingResult");
      const comparisonResult = document.getElementById("comparisonResult");
      const itemComparisons = document.getElementById("itemComparisons");

      // Ê®°ÂºèÂàáÊèõÊåâÈàï
      const inputModeButtons = document.querySelectorAll(".input-mode-btn");
      const inputModes = document.querySelectorAll(".input-mode");

      // Ë©ïÂàÜÁ≥ªÁµ±ÂÖÉÁ¥†
      const houseNameInput = document.getElementById("houseName");
      const houseRentInput = document.getElementById("houseRent");
      const totalScoreDisplay = document.getElementById("totalScore");
      const cpScoreDisplay = document.getElementById("cpScore");
      const comfortScoreDisplay = document.getElementById("comfortScore");
      const convenienceScoreDisplay =
        document.getElementById("convenienceScore");
      const actualRentDisplay = document.getElementById("actualRent");
      const customNotesInput = document.getElementById("customNotes");

      // ËÅØÁµ°Á∞øÂÖÉÁ¥†
      const contactTypeInput = document.getElementById("contactType");
      const contactNameInput = document.getElementById("contactName");
      const contactPhoneInput = document.getElementById("contactPhone");
      const propertyAddressInput = document.getElementById("propertyAddress");
      const contactTypeButtons = document.querySelectorAll(".contact-type-btn");
      const saveContactBtn = document.getElementById("saveContact");
      const viewContactBookBtn = document.getElementById("viewContactBook");
      const contactBookModal = document.getElementById("contactBookModal");
      const closeContactBookBtn = document.getElementById("closeContactBook");
      const contactBookList = document.getElementById("contactBookList");
      const duplicateAgentAlert = document.getElementById(
        "duplicateAgentAlert"
      );

      // Ë©ïÂàÜÈ†ÖÁõÆ
      const evaluationCheckboxes = document.querySelectorAll(
        ".checklist-checkbox[data-weight]"
      );

      // È†êÁ¥ÑÁúãÂ±ãË°®ÂñÆÂÖÉÁ¥†
      const viewingFormInputs = {
        numResidents: document.getElementById("numResidents"),
        relationship: document.getElementById("relationship"),
        age: document.getElementById("age"),
        moveInDate: document.getElementById("moveInDate"),
        occupation: document.getElementById("occupation"),
        smoking: document.getElementById("smoking"),
        pets: document.getElementById("pets"),
        budget: document.getElementById("budget"),
        preferredArea: document.getElementById("preferredArea"),
      };

      // ÊåâÈàïÂÖÉÁ¥†
      const clearCalculatorBtn = document.getElementById("clearCalculator");
      const copyResultBtn = document.getElementById("copyResult");
      const presetSizesBtn = document.getElementById("presetSizes");
      const randomSizeBtn = document.getElementById("randomSize");

      const saveEvaluationBtn = document.getElementById("saveEvaluation");
      const viewSavedEvaluationsBtn = document.getElementById(
        "viewSavedEvaluations"
      );
      const exportEvaluationBtn = document.getElementById("exportEvaluation");
      const resetEvaluationBtn = document.getElementById("resetEvaluation");

      const saveViewingTemplateBtn = document.getElementById(
        "saveViewingTemplate"
      );
      const copyViewingInfoBtn = document.getElementById("copyViewingInfo");
      const clearViewingTemplateBtn = document.getElementById(
        "clearViewingTemplate"
      );

      // Modal ÂÖÉÁ¥†
      const presetModal = document.getElementById("presetModal");
      const closePresetBtn = document.getElementById("closePreset");
      const presetSizeButtons = document.querySelectorAll(".preset-size");

      const savedEvaluationsModal = document.getElementById(
        "savedEvaluationsModal"
      );
      const closeSavedEvaluationsBtn = document.getElementById(
        "closeSavedEvaluations"
      );
      const savedEvaluationsList = document.getElementById(
        "savedEvaluationsList"
      );

      // ÈÄöÁü•Á≥ªÁµ±
      const notification = document.getElementById("notification");
      const notificationIcon = document.getElementById("notificationIcon");
      const notificationMessage = document.getElementById(
        "notificationMessage"
      );
      const closeNotificationBtn = document.getElementById("closeNotification");

      // ÂàÜ‰∫´ÊåâÈàï
      const shareBtns = [
        document.getElementById("shareBtn"),
        document.getElementById("shareFooter"),
      ];

      // ===== Ê†∏ÂøÉÂäüËÉΩÂáΩÊï∏ =====

      // Ëº∏ÂÖ•Ê®°ÂºèÂàáÊèõ
      function switchInputMode(mode) {
        currentInputMode = mode;

        // Êõ¥Êñ∞ÊåâÈàïÁãÄÊÖã
        inputModeButtons.forEach((btn) => {
          btn.classList.remove("active");
          if (btn.dataset.mode === mode) {
            btn.classList.add("active");
          }
        });

        // È°ØÁ§∫Â∞çÊáâÊ®°Âºè
        inputModes.forEach((modeDiv) => {
          if (modeDiv.id === mode + "Mode") {
            modeDiv.classList.remove("hidden");
          } else {
            modeDiv.classList.add("hidden");
          }
        });

        // ÂàùÂßãÂåñÂ∞çÊáâÊ®°Âºè
        if (mode === "items") {
          initializeItemEstimateGrid();
        }
      }

      // Ë®àÁÆóÈù¢Á©çÔºàÈï∑ÂØ¨Ê®°ÂºèÔºâ
      function calculateArea() {
        const length = parseFloat(lengthInput.value) || 0;
        const width = parseFloat(widthInput.value) || 0;

        if (length <= 0 || width <= 0) {
          sqmResult.textContent = "0 „é°";
          pingResult.textContent = "0 Âù™";
          comparisonResult.textContent = "Ë´ãËº∏ÂÖ•Èï∑ÂØ¨Êï∏ÂÄº";
          copyResultBtn.disabled = true;
          copyResultBtn.classList.add("opacity-50", "cursor-not-allowed");
          updateItemComparisons(0);
          return;
        }

        const sqm = length * width;
        const ping = sqm / 3.3058;

        sqmResult.textContent = `${sqm.toFixed(2)} „é°`;
        pingResult.textContent = `${ping.toFixed(2)} Âù™`;

        const comparison = findClosestComparison(sqm);
        comparisonResult.innerHTML = comparison;

        updateItemComparisons(sqm);

        copyResultBtn.disabled = false;
        copyResultBtn.classList.remove("opacity-50", "cursor-not-allowed");
      }

      // Èù¢Á©çÁõ¥Êé•Ëº∏ÂÖ•Ê®°Âºè
      function calculateFromArea() {
        const sqmValue = parseFloat(directSqmInput.value);
        const pingValue = parseFloat(directPingInput.value);

        if (sqmValue > 0) {
          const ping = sqmValue / 3.3058;
          document.getElementById("areaToPing").textContent = `${ping.toFixed(
            2
          )} Âù™`;
          document.getElementById(
            "areaToSqm"
          ).textContent = `${sqmValue.toFixed(2)} „é°`;
          directPingInput.value = ping.toFixed(2);
        } else if (pingValue > 0) {
          const sqm = pingValue * 3.3058;
          document.getElementById("areaToSqm").textContent = `${sqm.toFixed(
            2
          )} „é°`;
          document.getElementById(
            "areaToPing"
          ).textContent = `${pingValue.toFixed(2)} Âù™`;
          directSqmInput.value = sqm.toFixed(2);
        } else {
          document.getElementById("areaToSqm").textContent = "0 „é°";
          document.getElementById("areaToPing").textContent = "0 Âù™";
        }
      }

      // Áâ©ÂìÅ‰º∞ÁÆóÊ®°Âºè
      function initializeItemEstimateGrid() {
        const grid = document.getElementById("itemEstimateGrid");
        if (!grid) return;

        grid.innerHTML = "";

        ITEM_COMPARISONS.forEach((item) => {
          const itemCard = document.createElement("div");
          itemCard.className = "item-card";
          itemCard.innerHTML = `
                    <div class="text-2xl mb-2">${item.icon}</div>
                    <div class="font-semibold text-sm text-gray-800 mb-1">${item.name}</div>
                    <div class="text-xs text-gray-600 mb-3">${item.sqm} „é°</div>
                    <input type="number" class="w-full p-2 border border-gray-200 rounded-lg text-center" 
                           placeholder="Êï∏Èáè" min="0" step="1" data-item="${item.name}" data-sqm="${item.sqm}">
                `;

          const input = itemCard.querySelector("input");
          input.addEventListener("input", updateItemEstimate);

          grid.appendChild(itemCard);
        });
      }

      function updateItemEstimate() {
        const inputs = document.querySelectorAll("#itemEstimateGrid input");
        let totalSqm = 0;
        const selectedItemsList = [];

        selectedItems.clear();

        inputs.forEach((input) => {
          const quantity = parseInt(input.value) || 0;
          if (quantity > 0) {
            const itemName = input.dataset.item;
            const itemSqm = parseFloat(input.dataset.sqm);
            const subtotal = quantity * itemSqm;
            totalSqm += subtotal;

            selectedItems.set(itemName, { quantity, sqm: itemSqm, subtotal });
            selectedItemsList.push(
              `${itemName} √ó ${quantity} = ${subtotal.toFixed(1)} „é°`
            );

            input.closest(".item-card").classList.add("selected");
          } else {
            input.closest(".item-card").classList.remove("selected");
          }
        });

        const totalPing = totalSqm / 3.3058;

        document.getElementById(
          "itemEstimateSqm"
        ).textContent = `${totalSqm.toFixed(2)} „é°`;
        document.getElementById(
          "itemEstimatePing"
        ).textContent = `${totalPing.toFixed(2)} Âù™`;

        const selectedItemsDiv = document.getElementById("selectedItems");
        if (selectedItemsList.length > 0) {
          // Âª∫Á´ãÂ∏∂ÂúñÊ®ôÁöÑÁâ©ÂìÅÂàóË°®
          const itemsWithIcons = Array.from(selectedItems.entries()).map(
            ([itemName, data]) => {
              const itemInfo = ITEM_COMPARISONS.find(
                (item) => item.name === itemName
              );
              const icon = itemInfo ? itemInfo.icon : "üì¶";
              return `<div class="flex items-center space-x-2 p-2 bg-white rounded border">
                      <span class="text-lg">${icon}</span>
                      <span class="text-sm text-gray-800">${itemName} √ó ${
                data.quantity
              } = ${data.subtotal.toFixed(1)} „é°</span>
                    </div>`;
            }
          );

          selectedItemsDiv.innerHTML = `
                    <h5 class="font-semibold text-gray-800 mb-2">Â∑≤ÈÅ∏ÊìáÁâ©ÂìÅÔºö</h5>
                    <div class="space-y-2">
                        ${itemsWithIcons.join("")}
                    </div>
                `;
        } else {
          selectedItemsDiv.innerHTML =
            '<div class="text-sm text-gray-600">Â∑≤ÈÅ∏ÊìáÁâ©ÂìÅÂ∞áÈ°ØÁ§∫Âú®ÈÄôË£°</div>';
        }
      }

      // Â∞ãÊâæÊúÄÊé•ËøëÁöÑÂØ¶Áâ©ÊØîËºÉ
      function findClosestComparison(sqm) {
        const closest = ITEM_COMPARISONS.reduce((prev, curr) => {
          return Math.abs(curr.sqm - sqm) < Math.abs(prev.sqm - sqm)
            ? curr
            : prev;
        });

        const ratio = sqm / closest.sqm;

        if (ratio > 1.5) {
          return `Á¥Ñ <span class="font-bold text-purple-600">${ratio.toFixed(
            1
          )} ÂÄã${closest.name}</span> ${closest.icon}`;
        } else if (ratio < 0.7) {
          return `Á¥ÑÁÇ∫ <span class="font-bold text-purple-600">${
            closest.name
          }</span> ÁöÑ <span class="font-bold text-purple-600">${(
            ratio * 100
          ).toFixed(0)}%</span> ${closest.icon}`;
        } else {
          return `Á¥ÑÁ≠âÊñº <span class="font-bold text-purple-600">${closest.name}</span> ${closest.icon}`;
        }
      }

      // Êõ¥Êñ∞Áâ©ÂìÅÊØîËºÉÂàóË°®
      function updateItemComparisons(currentSqm) {
        if (!itemComparisons) return;

        itemComparisons.innerHTML = "";

        if (currentSqm <= 0) {
          itemComparisons.innerHTML =
            '<div class="text-center text-gray-500 text-sm py-4">Ëº∏ÂÖ•Â∞∫ÂØ∏ÂæåÈ°ØÁ§∫Áâ©ÂìÅÂ∞çÁÖß</div>';
          return;
        }

        const sortedItems = ITEM_COMPARISONS.map((item) => ({
          ...item,
          ratio: currentSqm / item.sqm,
          difference: Math.abs(currentSqm - item.sqm),
        }))
          .sort((a, b) => a.difference - b.difference)
          .slice(0, 12);

        sortedItems.forEach((item) => {
          const comparisonDiv = document.createElement("div");
          comparisonDiv.className = "item-comparison p-3 bg-white rounded-lg";

          let ratioText = "";
          if (item.ratio > 1.2) {
            ratioText = `${item.ratio.toFixed(1)}ÂÄã`;
          } else if (item.ratio < 0.8) {
            ratioText = `${(item.ratio * 100).toFixed(0)}%`;
          } else {
            ratioText = "Á¥ÑÁ≠âÊñº";
          }

          comparisonDiv.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <span class="text-lg">${item.icon}</span>
                            <div>
                                <div class="font-medium text-gray-800 text-sm">${item.name}</div>
                                <div class="text-xs text-gray-500">${item.description}</div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-sm font-bold text-primary-600">${ratioText}</div>
                            <div class="text-xs text-gray-400">${item.sqm} „é°</div>
                        </div>
                    </div>
                `;

          if (item.ratio > 0.8 && item.ratio < 1.2) {
            comparisonDiv.classList.add("border-2", "border-primary-300");
          }

          itemComparisons.appendChild(comparisonDiv);
        });
      }

      // Ë©ïÂàÜÁ≥ªÁµ±
      function updateEvaluationScore() {
        let basicScore = 0;
        let qualityScore = 0;
        let equipmentScore = 0;
        let convenienceScore = 0;

        evaluationCheckboxes.forEach((checkbox) => {
          if (checkbox.checked) {
            const weight = parseInt(checkbox.dataset.weight);
            const category = checkbox.dataset.category;

            switch (category) {
              case "basic":
                basicScore += weight;
                break;
              case "quality":
                qualityScore += weight;
                break;
              case "equipment":
                equipmentScore += weight;
                break;
              case "convenience":
                convenienceScore += weight;
                break;
            }
          }
        });

        const totalScore =
          basicScore + qualityScore + equipmentScore + convenienceScore;
        currentEvaluationScore = totalScore;

        // Êõ¥Êñ∞È°ØÁ§∫
        totalScoreDisplay.textContent = totalScore;
        comfortScoreDisplay.textContent = qualityScore + equipmentScore;
        convenienceScoreDisplay.textContent = convenienceScore;

        // Ë®àÁÆóÂØ¶ÈöõÁßüÈáëÂíåCPÂÄº
        const rent = parseFloat(houseRentInput.value) || 0;
        const rentalSubsidyInput = document.getElementById("rentalSubsidy");
        const hasSubsidyCheckbox = document.getElementById("hasSubsidy");
        const subsidy =
          hasSubsidyCheckbox && hasSubsidyCheckbox.checked && rentalSubsidyInput
            ? parseFloat(rentalSubsidyInput.value) || 0
            : 0;
        const actualRent = Math.max(0, rent - subsidy);

        // Êõ¥Êñ∞ÂØ¶ÈöõÁßüÈáëÈ°ØÁ§∫
        actualRentDisplay.textContent = actualRent.toLocaleString();

        // Ë®àÁÆóCPÂÄº (‰ΩøÁî®ÂØ¶ÈöõÊîØ‰ªòÈáëÈ°ç)
        let cpScore = 0;
        if (actualRent > 0) {
          cpScore = Math.round((totalScore / actualRent) * 10000);
        } else if (rent > 0) {
          cpScore = Math.round((totalScore / rent) * 10000);
        }
        cpScoreDisplay.textContent = cpScore;

        // Êõ¥Êñ∞Ë©ïÂàÜÂúìÂúàÈ°èËâ≤
        updateScoreColor(totalScore);
      }

      function updateScoreColor(score) {
        const scoreElement = totalScoreDisplay;
        scoreElement.className = "score-inner";

        if (score >= 80) {
          scoreElement.style.color = "#22c55e";
        } else if (score >= 60) {
          scoreElement.style.color = "#84cc16";
        } else if (score >= 40) {
          scoreElement.style.color = "#eab308";
        } else if (score >= 20) {
          scoreElement.style.color = "#f97316";
        } else {
          scoreElement.style.color = "#ef4444";
        }
      }

      // ‰øùÂ≠òË©ïÂàÜ
      function saveEvaluation() {
        const rentalSubsidyInput = document.getElementById("rentalSubsidy");
        const hasSubsidyCheckbox = document.getElementById("hasSubsidy");

        const houseName =
          houseNameInput.value.trim() || `ÁßüÂ±ã${savedEvaluations.length + 1}`;
        const rent = parseFloat(houseRentInput.value) || 0;
        const subsidy = rentalSubsidyInput
          ? parseFloat(rentalSubsidyInput.value) || 0
          : 0;
        const hasSubsidy = hasSubsidyCheckbox
          ? hasSubsidyCheckbox.checked
          : false;
        const notes = customNotesInput.value.trim();

        // ËÅØÁµ°Ë≥áË®ä
        const contactInfo = {
          type: contactTypeInput.value,
          name: contactNameInput.value.trim(),
          phone: contactPhoneInput.value.trim(),
        };

        const evaluation = {
          id: Date.now(),
          houseName,
          rent,
          subsidy,
          hasSubsidy,
          score: currentEvaluationScore,
          notes,
          contactInfo,
          date: new Date().toISOString(),
          checkedItems: Array.from(evaluationCheckboxes)
            .filter((cb) => cb.checked)
            .map((cb) => cb.nextElementSibling.textContent.trim()),
        };

        savedEvaluations.push(evaluation);
        localStorage.setItem(
          "savedEvaluations",
          JSON.stringify(savedEvaluations)
        );

        showNotification(`Â∑≤‰øùÂ≠òË©ïÂàÜÔºö${houseName}`, "success");
      }

      // Êü•ÁúãÂ∑≤‰øùÂ≠òÁöÑË©ïÂàÜ
      function viewSavedEvaluations() {
        if (!savedEvaluationsList) return;

        savedEvaluationsList.innerHTML = "";

        if (savedEvaluations.length === 0) {
          savedEvaluationsList.innerHTML =
            '<div class="text-center text-gray-500 py-8">Â∞öÁÑ°‰øùÂ≠òÁöÑË©ïÂàÜË®òÈåÑ</div>';
        } else {
          savedEvaluations.forEach((evaluation) => {
            const evaluationCard = document.createElement("div");
            evaluationCard.className =
              "modern-card p-4 bg-gradient-to-r from-gray-50 to-gray-100";

            evaluationCard.innerHTML = `
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h4 class="font-bold text-gray-800">${
                                  evaluation.houseName
                                }</h4>
                                <p class="text-sm text-gray-600">${new Date(
                                  evaluation.date
                                ).toLocaleDateString("zh-TW")}</p>
                            </div>
                            <div class="text-right">
                                <div class="text-2xl font-bold text-primary-600">${
                                  evaluation.score
                                }</div>
                                <div class="text-sm text-gray-600">Á∏ΩÂàÜ</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-2 mb-3">
                            <div class="text-sm">
                                <span class="text-gray-600">ÁßüÈáëÔºö</span>
                                <span class="font-semibold">${
                                  evaluation.rent || "Êú™Â°´ÂØ´"
                                } ÂÖÉ</span>
                            </div>
                            <div class="text-sm">
                                <span class="text-gray-600">ÂØ¶‰ªòÔºö</span>
                                <span class="font-semibold">${
                                  evaluation.hasSubsidy
                                    ? Math.max(
                                        0,
                                        (evaluation.rent || 0) -
                                          (evaluation.subsidy || 0)
                                      )
                                    : evaluation.rent || 0
                                } ÂÖÉ</span>
                            </div>
                        </div>
                        ${
                          evaluation.contactInfo &&
                          (evaluation.contactInfo.name ||
                            evaluation.contactInfo.phone)
                            ? `<div class="text-sm text-gray-700 mb-3 p-2 bg-blue-50 rounded flex items-center">
                               <strong class="mr-2">ËÅØÁµ°Ë≥áË®äÔºö</strong>
                               ${
                                 evaluation.contactInfo.type === "line"
                                   ? '<i class="fab fa-line text-green-500 mr-1"></i>'
                                   : evaluation.contactInfo.type === "facebook"
                                   ? '<i class="fab fa-facebook-f text-blue-600 mr-1"></i>'
                                   : '<i class="fas fa-phone text-gray-500 mr-1"></i>'
                               } 
                               <span>${
                                 evaluation.contactInfo.name || "Êú™Â°´ÂØ´"
                               }</span>
                               ${
                                 evaluation.contactInfo.phone
                                   ? `<span class="ml-2 text-gray-600">${evaluation.contactInfo.phone}</span>`
                                   : ""
                               }
                             </div>`
                            : ""
                        }
                        ${
                          evaluation.notes
                            ? `<div class="text-sm text-gray-700 mb-3 p-2 bg-white rounded">${evaluation.notes}</div>`
                            : ""
                        }
                        <div class="flex space-x-2">
                            <button onclick="deleteEvaluation(${
                              evaluation.id
                            })" class="modern-btn modern-btn-secondary text-xs py-1 px-3">
                                <i class="fas fa-trash mr-1"></i>Âà™Èô§
                            </button>
                            <button onclick="exportSingleEvaluation(${
                              evaluation.id
                            })" class="modern-btn modern-btn-primary text-xs py-1 px-3">
                                <i class="fas fa-download mr-1"></i>ÂåØÂá∫
                            </button>
                        </div>
                    `;

            savedEvaluationsList.appendChild(evaluationCard);
          });
        }

        showModal(savedEvaluationsModal);
      }

      // Âà™Èô§Ë©ïÂàÜ
      function deleteEvaluation(id) {
        savedEvaluations = savedEvaluations.filter(
          (evaluation) => evaluation.id !== id
        );
        saveToLocalStorage("savedEvaluations", savedEvaluations);
        viewSavedEvaluations();
        showNotification("Â∑≤Âà™Èô§Ë©ïÂàÜË®òÈåÑ", "info");
      }

      // ÂåØÂá∫ÂñÆÂÄãË©ïÂàÜ
      function exportSingleEvaluation(id) {
        const evaluation = savedEvaluations.find((e) => e.id === id);
        if (!evaluation) return;

        const exportText = generateEvaluationReport(evaluation);
        downloadTextFile(`${evaluation.houseName}_Ë©ïÂàÜÂ†±Âëä.txt`, exportText);
        showNotification("Ë©ïÂàÜÂ†±ÂëäÂ∑≤ÂåØÂá∫", "success");
      }

      // ÂåØÂá∫Áï∂ÂâçË©ïÂàÜ
      function exportEvaluation() {
        const houseName = houseNameInput.value.trim() || "Áï∂ÂâçË©ïÂàÜ";
        const rent = parseFloat(houseRentInput.value) || 0;
        const notes = customNotesInput.value.trim();

        const evaluation = {
          houseName,
          rent,
          score: currentEvaluationScore,
          notes,
          date: new Date().toISOString(),
          checkedItems: Array.from(evaluationCheckboxes)
            .filter((cb) => cb.checked)
            .map((cb) => cb.nextElementSibling.textContent.trim()),
        };

        const exportText = generateEvaluationReport(evaluation);
        downloadTextFile(`${houseName}_Ë©ïÂàÜÂ†±Âëä.txt`, exportText);
        showNotification("Ë©ïÂàÜÂ†±ÂëäÂ∑≤ÂåØÂá∫", "success");
      }

      // ÁîüÊàêË©ïÂàÜÂ†±Âëä
      function generateEvaluationReport(evaluation) {
        const actualRent = evaluation.hasSubsidy
          ? Math.max(0, (evaluation.rent || 0) - (evaluation.subsidy || 0))
          : evaluation.rent || 0;

        const contactInfo =
          evaluation.contactInfo &&
          (evaluation.contactInfo.name || evaluation.contactInfo.phone)
            ? `
ËÅØÁµ°Ë≥áË®äÔºö
  È°ûÂûãÔºö${
    evaluation.contactInfo.type === "line"
      ? "LINE"
      : evaluation.contactInfo.type === "facebook"
      ? "Facebook"
      : "ÈõªË©±"
  }
  ÂßìÂêçÔºö${evaluation.contactInfo.name || "Êú™Â°´ÂØ´"}
  ÈõªË©±Ôºö${evaluation.contactInfo.phone || "Êú™Â°´ÂØ´"}`
            : "";

        return `üè† ÁßüÂ±ãË©ïÂàÜÂ†±Âëä
=======================================
ÊàøÂ±ãÂêçÁ®±Ôºö${evaluation.houseName}
Ë©ïÂàÜÊó•ÊúüÔºö${new Date(evaluation.date).toLocaleString("zh-TW", {
          year: "numeric",
          month: "2-digit",
          day: "2-digit",
          hour: "2-digit",
          minute: "2-digit",
          hour12: false,
        })}
ÁßüÈáëÔºö${evaluation.rent || "Êú™Â°´ÂØ´"} ÂÖÉ/Êúà
${
  evaluation.hasSubsidy
    ? `ÁßüÂ±ãË£úÂä©Ôºö${evaluation.subsidy || 0} ÂÖÉ/Êúà
ÂØ¶‰ªòÁßüÈáëÔºö${actualRent} ÂÖÉ/Êúà`
    : ""
}
Á∏ΩÂàÜÔºö${evaluation.score}/100
CPÂÄºÔºö${
          actualRent > 0
            ? Math.round((evaluation.score / actualRent) * 10000)
            : evaluation.rent > 0
            ? Math.round((evaluation.score / evaluation.rent) * 10000)
            : 0
        }
${contactInfo}

‚úÖ Á¨¶ÂêàÊ¢ù‰ª∂È†ÖÁõÆÔºö
${evaluation.checkedItems.map((item) => `‚Ä¢ ${item}`).join("\n")}

üìù ÂÇôË®ªÔºö
${evaluation.notes || "ÁÑ°"}

=======================================
üì± Â∑•ÂÖ∑‰æÜÊ∫êÔºöÂ∞àÊ•≠ÁßüÂ±ãÁúãÊàøÂÖ®ËÉΩÂ∑•ÂÖ∑ @azlife_1224
üîó Êõ¥Â§öË≥áË®äÔºöhttps://www.threads.com/@azlife_1224`;
      }

      // ÈáçÁΩÆË©ïÂàÜ
      function resetEvaluation() {
        const rentalSubsidyInput = document.getElementById("rentalSubsidy");
        const hasSubsidyCheckbox = document.getElementById("hasSubsidy");

        houseNameInput.value = "";
        houseRentInput.value = "";
        if (rentalSubsidyInput) rentalSubsidyInput.value = "";
        if (hasSubsidyCheckbox) hasSubsidyCheckbox.checked = false;
        customNotesInput.value = "";

        // ÈáçÁΩÆËÅØÁµ°Ë≥áË®ä
        contactTypeInput.value = "";
        contactNameInput.value = "";
        contactPhoneInput.value = "";
        if (propertyAddressInput) propertyAddressInput.value = "";

        // ÈáçÁΩÆËÅØÁµ°ÊñπÂºèÊåâÈàï
        contactTypeButtons.forEach((btn) => {
          btn.classList.remove("selected");
        });

        evaluationCheckboxes.forEach((checkbox) => {
          checkbox.checked = false;
          checkbox.closest(".checklist-item").classList.remove("checked");
        });

        updateEvaluationScore();
        showNotification("Â∑≤ÈáçÁΩÆË©ïÂàÜÁ≥ªÁµ±", "info");
      }

      // ===== ËÅØÁµ°Á∞øÂäüËÉΩ =====

      // Ê™¢Êü•ÊòØÂê¶ÊúâÈáçË§áÊàø‰ª≤
      function checkDuplicateAgent(name, phone) {
        return savedContacts.find(
          (contact) =>
            (contact.name &&
              contact.name.toLowerCase() === name.toLowerCase()) ||
            (contact.phone && contact.phone === phone)
        );
      }

      // ‰øùÂ≠òËÅØÁµ°‰∫∫
      function saveContact() {
        const contactType = contactTypeInput.value;
        const contactName = contactNameInput.value.trim();
        const contactPhone = contactPhoneInput.value.trim();
        const propertyAddress = propertyAddressInput
          ? propertyAddressInput.value.trim()
          : "";

        if (!contactType) {
          showNotification("Ë´ãÈÅ∏ÊìáËÅØÁµ°ÊñπÂºè", "warning");
          return;
        }

        if (!contactName && !contactPhone) {
          showNotification("Ë´ãËá≥Â∞ëÂ°´ÂØ´ËÅØÁµ°‰∫∫ÂßìÂêçÊàñÈõªË©±", "warning");
          return;
        }

        // Ê™¢Êü•ÊòØÂê¶ÊúâÈáçË§áÊàø‰ª≤
        const existingAgent = checkDuplicateAgent(contactName, contactPhone);

        const newContact = {
          id: Date.now(),
          type: contactType,
          name: contactName,
          phone: contactPhone,
          address: propertyAddress,
          date: new Date().toISOString(),
          properties: existingAgent ? [...existingAgent.properties] : [],
        };

        // Â¶ÇÊûúÊòØÊñ∞ÊàøÊ∫êÂú∞ÂùÄÔºåÂä†ÂÖ•Âà∞ÊàøÊ∫êÂàóË°®
        if (
          propertyAddress &&
          !newContact.properties.some(
            (prop) => prop.address === propertyAddress
          )
        ) {
          newContact.properties.push({
            address: propertyAddress,
            date: new Date().toISOString(),
          });
        }

        if (existingAgent) {
          // Êõ¥Êñ∞ÁèæÊúâËÅØÁµ°‰∫∫ÁöÑÊàøÊ∫êË≥áË®ä
          const index = savedContacts.findIndex(
            (contact) => contact.id === existingAgent.id
          );
          if (index !== -1) {
            savedContacts[index] = newContact;
            savedContacts[index].id = existingAgent.id; // ‰øùÊåÅÂéüID
          }

          // È°ØÁ§∫ÈáçË§áÊèêÁ§∫
          if (duplicateAgentAlert) {
            duplicateAgentAlert.classList.remove("hidden");
            setTimeout(() => {
              duplicateAgentAlert.classList.add("hidden");
            }, 3000);
          }

          showNotification(`Â∑≤Êõ¥Êñ∞ ${contactName} ÁöÑÊàøÊ∫êË≥áË®ä`, "success");
        } else {
          // Êñ∞Â¢ûËÅØÁµ°‰∫∫
          savedContacts.push(newContact);
          showNotification("ËÅØÁµ°‰∫∫Â∑≤‰øùÂ≠ò", "success");
        }

        // ‰øùÂ≠òÂà∞Êú¨Âú∞ÂÑ≤Â≠ò
        saveToLocalStorage("savedContacts", savedContacts);

        // Ê∏ÖÁ©∫Ë°®ÂñÆÔºà‰øùÁïôËÅØÁµ°ÊñπÂºèÔºâ
        contactNameInput.value = "";
        contactPhoneInput.value = "";
        if (propertyAddressInput) propertyAddressInput.value = "";
      }

      // Êü•ÁúãËÅØÁµ°Á∞ø
      function viewContactBook() {
        if (!contactBookList) return;

        contactBookList.innerHTML = "";

        if (savedContacts.length === 0) {
          contactBookList.innerHTML =
            '<div class="text-center text-gray-500 py-8">Â∞öÁÑ°‰øùÂ≠òÁöÑËÅØÁµ°‰∫∫Ë®òÈåÑ</div>';
        } else {
          savedContacts.forEach((contact) => {
            const contactCard = document.createElement("div");
            contactCard.className =
              "modern-card p-4 bg-gradient-to-r from-indigo-50 to-indigo-100";

            const contactIcon =
              contact.type === "line"
                ? '<i class="fab fa-line text-green-500 mr-1"></i>'
                : contact.type === "facebook"
                ? '<i class="fab fa-facebook-f text-blue-600 mr-1"></i>'
                : '<i class="fas fa-phone text-gray-500 mr-1"></i>';

            const propertiesList =
              contact.properties && contact.properties.length > 0
                ? `<div class="mt-3 p-3 bg-white rounded-lg">
                   <h5 class="font-semibold text-gray-800 mb-2">ÊàøÊ∫êË®òÈåÑ (${
                     contact.properties.length
                   }Á≠Ü)</h5>
                   <div class="space-y-1">
                     ${contact.properties
                       .map(
                         (prop) =>
                           `<div class="text-sm text-gray-700 flex items-center">
                          <i class="fas fa-map-marker-alt text-gray-400 mr-2"></i>
                          <span>${prop.address}</span>
                          <span class="ml-auto text-xs text-gray-500">${new Date(
                            prop.date
                          ).toLocaleDateString()}</span>
                        </div>`
                       )
                       .join("")}
                   </div>
                 </div>`
                : "";

            contactCard.innerHTML = `
              <div class="flex justify-between items-start mb-3">
                <div>
                  <h4 class="font-bold text-gray-800 flex items-center">
                    ${contactIcon}
                    ${contact.name || "Êú™Â°´ÂØ´"}
                  </h4>
                  <p class="text-sm text-gray-600">${
                    contact.phone || "Êú™Â°´ÂØ´"
                  }</p>
                  <p class="text-xs text-gray-500">${new Date(
                    contact.date
                  ).toLocaleDateString()}</p>
                </div>
                <div class="flex space-x-2">
                  <button onclick="loadContact(${
                    contact.id
                  })" class="modern-btn modern-btn-secondary text-xs py-1 px-3">
                    <i class="fas fa-edit mr-1"></i>ËºâÂÖ•
                  </button>
                  <button onclick="deleteContact(${
                    contact.id
                  })" class="modern-btn modern-btn-secondary text-xs py-1 px-3">
                    <i class="fas fa-trash mr-1"></i>Âà™Èô§
                  </button>
                </div>
              </div>
              ${propertiesList}
            `;

            contactBookList.appendChild(contactCard);
          });
        }

        showModal(contactBookModal);
      }

      // ËºâÂÖ•ËÅØÁµ°‰∫∫Ë≥áË®ä
      function loadContact(id) {
        const contact = savedContacts.find((c) => c.id === id);
        if (!contact) return;

        // Â°´ÂÖ•ËÅØÁµ°‰∫∫Ë≥áË®ä
        contactTypeInput.value = contact.type;
        contactNameInput.value = contact.name || "";
        contactPhoneInput.value = contact.phone || "";
        if (propertyAddressInput && contact.address) {
          propertyAddressInput.value = contact.address;
        }

        // Êõ¥Êñ∞ËÅØÁµ°ÊñπÂºèÊåâÈàïË¶ñË¶∫ÁãÄÊÖã
        contactTypeButtons.forEach((btn) => btn.classList.remove("selected"));
        const selectedBtn = document.querySelector(
          `[data-type="${contact.type}"]`
        );
        if (selectedBtn) selectedBtn.classList.add("selected");

        hideModal(contactBookModal);
        showNotification("ËÅØÁµ°‰∫∫Ë≥áË®äÂ∑≤ËºâÂÖ•", "success");
      }

      // Âà™Èô§ËÅØÁµ°‰∫∫
      function deleteContact(id) {
        savedContacts = savedContacts.filter((contact) => contact.id !== id);
        saveToLocalStorage("savedContacts", savedContacts);
        viewContactBook(); // ÈáçÊñ∞ËºâÂÖ•ÂàóË°®
        showNotification("ËÅØÁµ°‰∫∫Â∑≤Âà™Èô§", "info");
      }

      // È†êÁ¥ÑÁúãÂ±ãÊ®°ÊùøÂäüËÉΩ
      function saveViewingTemplate() {
        viewingTemplate = {};

        Object.keys(viewingFormInputs).forEach((key) => {
          const input = viewingFormInputs[key];
          if (input) {
            viewingTemplate[key] = input.value;
          }
        });

        saveToLocalStorage("viewingTemplate", viewingTemplate);
        showNotification("È†êÁ¥ÑÁúãÂ±ãÊ®°ÊùøÂ∑≤‰øùÂ≠ò", "success");
      }

      function copyViewingInfo() {
        const formData = {
          numResidents: viewingFormInputs.numResidents.value || "Êú™Â°´ÂØ´",
          relationship: viewingFormInputs.relationship.value || "Êú™Â°´ÂØ´",
          age: viewingFormInputs.age.value || "Êú™Â°´ÂØ´",
          moveInDate: viewingFormInputs.moveInDate.value || "Êú™Â°´ÂØ´",
          occupation: viewingFormInputs.occupation.value || "Êú™Â°´ÂØ´",
          smoking: viewingFormInputs.smoking.value || "Êú™Â°´ÂØ´",
          pets: viewingFormInputs.pets.value || "Êú™Â°´ÂØ´",
          budget: viewingFormInputs.budget.value || "Êú™Â°´ÂØ´",
          preferredArea: viewingFormInputs.preferredArea.value || "Êú™Â°´ÂØ´",
        };

        const fullText = `È†êÁ¥ÑÁúãÂ±ãË≥áÊñô

ÂÖ•‰Ωè‰∫∫Êï∏Ôºö${formData.numResidents}
Èóú‰øÇÔºö${formData.relationship}
Âπ¥ÈΩ°Ôºö${formData.age}Ê≠≤
È†êË®àÂÖ•‰ΩèÔºö${formData.moveInDate}
ËÅ∑Ê•≠Ôºö${formData.occupation}
ÊäΩËè∏Ôºö${formData.smoking}
ÂØµÁâ©Ôºö${formData.pets}
È†êÁÆóÔºö${formData.budget}ÂÖÉ/Êúà
Â∏åÊúõÂçÄÂüüÔºö${formData.preferredArea}

Ë¨ùË¨ùÊÇ®ÔºåÊúüÂæÖÁúãÊàøÊ©üÊúÉÔºÅ`;

        navigator.clipboard
          .writeText(fullText)
          .then(() => {
            showNotification("È†êÁ¥ÑÁúãÂ±ãË≥áÊñôÂ∑≤Ë§áË£ΩÔºåÂèØÁõ¥Êé•Ë≤ºÂà∞LINE", "success");
          })
          .catch(() => {
            showNotification("Ë§áË£ΩÂ§±ÊïóÔºåË´ãÊâãÂãïË§áË£Ω", "error");
          });
      }

      function clearViewingTemplate() {
        Object.values(viewingFormInputs).forEach((input) => {
          if (input) input.value = "";
        });
        showNotification("Â∑≤Ê∏ÖÈô§È†êÁ¥ÑÁúãÂ±ãË°®ÂñÆ", "info");
      }

      // Ê∏ÖÈô§Ë®àÁÆóÂô®
      function clearCalculator() {
        lengthInput.value = "";
        widthInput.value = "";
        directSqmInput.value = "";
        directPingInput.value = "";

        // Ê∏ÖÈô§Áâ©ÂìÅ‰º∞ÁÆó
        const itemInputs = document.querySelectorAll("#itemEstimateGrid input");
        itemInputs.forEach((input) => {
          input.value = "";
          input.closest(".item-card").classList.remove("selected");
        });
        selectedItems.clear();

        calculateArea();
        calculateFromArea();
        updateItemEstimate();

        showNotification("Â∑≤Ê∏ÖÈô§Ë®àÁÆóÂô®Êï∏ÂÄº", "info");
      }

      // Ë§áË£ΩÁµêÊûú
      async function copyResult() {
        let resultText = "";

        if (currentInputMode === "dimensions") {
          const length = lengthInput.value;
          const width = widthInput.value;
          const sqm = sqmResult.textContent;
          const ping = pingResult.textContent;
          const comparison = comparisonResult.textContent;

          resultText = `üè† ÊàøÈñìÂ∞∫ÂØ∏Ë®àÁÆóÁµêÊûú
=================
Èï∑Â∫¶Ôºö${length} ÂÖ¨Â∞∫
ÂØ¨Â∫¶Ôºö${width} ÂÖ¨Â∞∫
Èù¢Á©çÔºö${sqm}
Âù™Êï∏Ôºö${ping}
ÂØ¶Áâ©ÊØîËºÉÔºö${comparison}`;
        } else if (currentInputMode === "area") {
          const sqm = document.getElementById("areaToSqm").textContent;
          const ping = document.getElementById("areaToPing").textContent;

          resultText = `üè† Èù¢Á©çÊèõÁÆóÁµêÊûú
=================
Èù¢Á©çÔºö${sqm}
Âù™Êï∏Ôºö${ping}`;
        } else if (currentInputMode === "items") {
          const sqm = document.getElementById("itemEstimateSqm").textContent;
          const ping = document.getElementById("itemEstimatePing").textContent;
          const items = Array.from(selectedItems.entries())
            .map(([name, data]) => `${name} √ó ${data.quantity}`)
            .join(", ");

          resultText = `üè† Áâ©ÂìÅ‰º∞ÁÆóÁµêÊûú
=================
Á∏ΩÈù¢Á©çÔºö${sqm}
Á∏ΩÂù™Êï∏Ôºö${ping}
ÈÅ∏ÊìáÁâ©ÂìÅÔºö${items || "ÁÑ°"}`;
        }

        resultText += `
=================
Ë®àÁÆóÊôÇÈñìÔºö${new Date().toLocaleString("zh-TW")}
Â∑•ÂÖ∑‰æÜÊ∫êÔºöÂ∞àÊ•≠ÁßüÂ±ãÁúãÊàøÂ∑•ÂÖ∑ @azlife_1224`;

        try {
          await navigator.clipboard.writeText(resultText);
          showNotification("üìã Ë®àÁÆóÁµêÊûúÂ∑≤Ë§áË£ΩÂà∞Ââ™Ë≤ºÁ∞øÔºÅ", "success");
        } catch (err) {
          showNotification("Ë§áË£ΩÂ§±ÊïóÔºåË´ãÊâãÂãïË§áË£ΩÁµêÊûú", "error");
        }
      }

      // Êô∫ËÉΩÈö®Ê©üÁîüÊàêÔºàÊ†πÊìöÁï∂ÂâçÊ®°ÂºèÔºâ
      function generateRandomSize() {
        if (currentInputMode === "dimensions") {
          // Èï∑ÂØ¨Ëº∏ÂÖ•Ê®°Âºè
          const sizes = [
            { length: 2.5, width: 2.5, name: "Ëø∑‰Ω†Â•óÊàø" },
            { length: 3.5, width: 4, name: "Â∞èÂ•óÊàø" },
            { length: 4.5, width: 5, name: "Ê®ôÊ∫ñÂ•óÊàø" },
            { length: 6, width: 4, name: "‰∏ÄÊàø‰∏ÄÂª≥" },
            { length: 7, width: 5, name: "Â§ßÂ•óÊàø" },
            { length: 8, width: 6, name: "ÂÖ©Êàø‰∏ÄÂª≥" },
            { length: 10, width: 8, name: "‰∏âÊàøÂÖ©Âª≥" },
            { length: 3, width: 8, name: "ÁãπÈï∑ÂûãÊàøÈñì" },
            { length: 5, width: 5, name: "Ê≠£ÊñπÂΩ¢ÊàøÈñì" },
          ];

          const randomChoice = sizes[Math.floor(Math.random() * sizes.length)];
          lengthInput.value = randomChoice.length;
          widthInput.value = randomChoice.width;
          calculateArea();
          showNotification(`üé≤ Èö®Ê©üÁîüÊàêÔºö${randomChoice.name}`, "success");
        } else if (currentInputMode === "area") {
          // Èù¢Á©çËº∏ÂÖ•Ê®°Âºè
          const areas = [
            { sqm: 8, ping: 2.4, name: "Ëø∑‰Ω†Â•óÊàø" },
            { sqm: 12, ping: 3.6, name: "Â∞èÂ•óÊàø" },
            { sqm: 18, ping: 5.4, name: "Ê®ôÊ∫ñÂ•óÊàø" },
            { sqm: 25, ping: 7.6, name: "‰∏ÄÊàø‰∏ÄÂª≥" },
            { sqm: 35, ping: 10.6, name: "Â§ßÂ•óÊàø" },
            { sqm: 45, ping: 13.6, name: "ÂÖ©Êàø‰∏ÄÂª≥" },
            { sqm: 60, ping: 18.1, name: "‰∏âÊàøÂÖ©Âª≥" },
            { sqm: 15, ping: 4.5, name: "ÁãπÈï∑ÂûãÊàøÈñì" },
            { sqm: 30, ping: 9.1, name: "Ê≠£ÊñπÂΩ¢ÊàøÈñì" },
          ];

          const randomChoice = areas[Math.floor(Math.random() * areas.length)];
          directSqmInput.value = randomChoice.sqm;
          directPingInput.value = randomChoice.ping;
          calculateFromArea();
          showNotification(`üé≤ Èö®Ê©üÁîüÊàêÔºö${randomChoice.name}`, "success");
        } else if (currentInputMode === "items") {
          // Áâ©ÂìÅ‰º∞ÁÆóÊ®°Âºè
          const itemInputs = document.querySelectorAll(
            "#itemEstimateGrid input"
          );

          // Ê∏ÖÈô§ÁèæÊúâÈÅ∏Êìá
          itemInputs.forEach((input) => {
            input.value = "";
            input.closest(".item-card").classList.remove("selected");
          });
          selectedItems.clear();

          // Èö®Ê©üÈÅ∏Êìá3-6ÂÄãÁâ©ÂìÅ
          const randomCount = Math.floor(Math.random() * 4) + 3;
          const availableItems = Array.from(itemInputs);
          const selectedIndices = [];

          // Èö®Ê©üÈÅ∏ÊìáÁâ©ÂìÅÁ¥¢Âºï
          while (
            selectedIndices.length <
            Math.min(randomCount, availableItems.length)
          ) {
            const randomIndex = Math.floor(
              Math.random() * availableItems.length
            );
            if (!selectedIndices.includes(randomIndex)) {
              selectedIndices.push(randomIndex);
            }
          }

          // ÁÇ∫ÈÅ∏‰∏≠ÁöÑÁâ©ÂìÅË®≠ÁΩÆÈö®Ê©üÊï∏Èáè
          selectedIndices.forEach((index) => {
            const input = availableItems[index];
            const randomQuantity = Math.floor(Math.random() * 3) + 1;
            input.value = randomQuantity;
            input.closest(".item-card").classList.add("selected");
          });

          updateItemEstimate();
          showNotification(`üé≤ Èö®Ê©üÁîüÊàêÔºö${randomCount}ÂÄãÁâ©ÂìÅ`, "success");
        }
      }

      // ===== Modal ÊéßÂà∂ =====
      function showModal(modal) {
        if (modal) {
          modal.classList.remove("hidden");
          document.body.style.overflow = "hidden";
        }
      }

      function hideModal(modal) {
        if (modal) {
          modal.classList.add("hidden");
          document.body.style.overflow = "";
        }
      }

      // ===== ÈÄöÁü•Á≥ªÁµ± =====
      function showNotification(message, type = "info") {
        if (!notification || !notificationIcon || !notificationMessage) return;

        if (notificationTimeout) {
          clearTimeout(notificationTimeout);
        }

        const icons = {
          success: '<i class="fas fa-check-circle text-green-500"></i>',
          error: '<i class="fas fa-exclamation-circle text-red-500"></i>',
          warning:
            '<i class="fas fa-exclamation-triangle text-yellow-500"></i>',
          info: '<i class="fas fa-info-circle text-blue-500"></i>',
        };

        notificationIcon.innerHTML = icons[type] || icons.info;
        notificationMessage.textContent = message;

        notification.classList.remove("show", "hide");

        setTimeout(() => {
          notification.classList.add("show");
        }, 10);

        notificationTimeout = setTimeout(() => {
          hideNotification();
        }, 4000);
      }

      function hideNotification() {
        if (notification) {
          notification.classList.remove("show");
          notification.classList.add("hide");

          setTimeout(() => {
            notification.classList.remove("hide");
          }, 500);
        }

        if (notificationTimeout) {
          clearTimeout(notificationTimeout);
          notificationTimeout = null;
        }
      }

      // ===== ÂàÜ‰∫´ÂäüËÉΩ =====
      function handleShare() {
        ShareModal.open({
          title: "üè† Â∞àÊ•≠ÁßüÂ±ãÁúãÊàøÂÖ®ËÉΩÂ∑•ÂÖ∑",
          desc: "Êô∫ËÉΩË©ïÂàÜÁ≥ªÁµ±„ÄÅÈò≤Ë©êÈ®ôÊåáÂçó„ÄÅÂ§öÊ®°ÂºèË®àÁÆóÂô®Ôºå‰∏ÄÈçµÂàÜ‰∫´Áµ¶ÈúÄË¶ÅÁöÑ‰∫∫ÔºÅ",
          shareText:
            "üè† Ë∂ÖÂº∑ÁßüÂ±ãÂ∑•ÂÖ∑ÂàÜ‰∫´ÔºÅ\n" +
            "‚≠ê Êô∫ËÉΩË©ïÂàÜÁ≥ªÁµ± - ÁßëÂ≠∏Ë©ï‰º∞ÊàøÂ±ãÂìÅË≥™\n" +
            "üìê Â§öÊ®°ÂºèË®àÁÆóÂô® - Èï∑ÂØ¨/Èù¢Á©ç/Áâ©ÂìÅ‰º∞ÁÆó\n" +
            "üìÖ È†êÁ¥ÑÁúãÂ±ãÊ®°Êùø - ÊèêÂçáÊàêÂäüÁéá\n" +
            "üö® Èò≤Ë©êÈ®ôÂÆåÂÖ®ÊåáÂçó - ÈÅøÈñãÂ∏∏Ë¶ãÈô∑Èò±\n" +
            "üí∞ 2025ÊúÄÊñ∞Ë£úË≤ºË≥áË®ä - Âê´ÈõôÁßüË£úË™™Êòé\n\n" +
            "ÁßüÂ±ãÂøÖÂÇôÁ•ûÂô®ÔºÅ",
        });
      }

      // ===== Êú¨Âú∞ÂÑ≤Â≠òÂäüËÉΩ =====
      function saveToLocalStorage(key, data) {
        try {
          localStorage.setItem(key, JSON.stringify(data));
          console.log(`${key} Â∑≤ÂÑ≤Â≠òÂà∞Êú¨Âú∞Á´Ø`);
        } catch (e) {
          console.warn(`ÁÑ°Ê≥ïÂÑ≤Â≠ò ${key}`, e);
        }
      }

      function loadFromLocalStorage(key, defaultValue = null) {
        try {
          const item = localStorage.getItem(key);
          return item ? JSON.parse(item) : defaultValue;
        } catch (e) {
          console.warn(`ÁÑ°Ê≥ïËºâÂÖ• ${key}`, e);
          return defaultValue;
        }
      }

      // ===== Â∑•ÂÖ∑ÂáΩÊï∏ =====
      function downloadTextFile(filename, content) {
        const blob = new Blob([content], { type: "text/plain;charset=utf-8" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = filename;
        a.click();
        URL.revokeObjectURL(url);
      }

      function getContactIcon(type) {
        const icons = {
          line: "üì±",
          facebook: "üìò",
          phone: "üìû",
        };
        return icons[type] || "üìû";
      }

      // ===== ‰∫ã‰ª∂Áõ£ËÅΩÂô®Ë®ªÂÜä =====
      function registerEventListeners() {
        // Âú®ÂáΩÊï∏ÈñãÂßãÂ∞±ÂÆöÁæ©ÊâÄÊúâÈúÄË¶ÅÁöÑÂÖÉÁ¥†
        const rentalSubsidyInput = document.getElementById("rentalSubsidy");
        const hasSubsidyCheckbox = document.getElementById("hasSubsidy");
        const noSubsidyOption = document.getElementById("noSubsidyOption");
        const hasSubsidyOption = document.getElementById("hasSubsidyOption");

        // Ëº∏ÂÖ•Ê®°ÂºèÂàáÊèõ
        inputModeButtons.forEach((btn) => {
          btn.addEventListener("click", () => {
            switchInputMode(btn.dataset.mode);
          });
        });

        // Âù™Êï∏Ë®àÁÆóÂô®‰∫ã‰ª∂ - Èï∑ÂØ¨Ê®°Âºè
        if (lengthInput) {
          lengthInput.addEventListener("input", calculateArea);
          lengthInput.addEventListener("keypress", (e) => {
            if (e.key === "Enter") widthInput.focus();
          });
        }

        if (widthInput) {
          widthInput.addEventListener("input", calculateArea);
          widthInput.addEventListener("keypress", (e) => {
            if (e.key === "Enter") calculateArea();
          });
        }

        // Èù¢Á©çÁõ¥Êé•Ëº∏ÂÖ•Ê®°Âºè
        if (directSqmInput)
          directSqmInput.addEventListener("input", calculateFromArea);
        if (directPingInput)
          directPingInput.addEventListener("input", calculateFromArea);

        // Ë®àÁÆóÂô®ÊåâÈàï
        if (clearCalculatorBtn)
          clearCalculatorBtn.addEventListener("click", clearCalculator);
        if (copyResultBtn) copyResultBtn.addEventListener("click", copyResult);
        if (presetSizesBtn)
          presetSizesBtn.addEventListener("click", () =>
            showModal(presetModal)
          );
        if (randomSizeBtn)
          randomSizeBtn.addEventListener("click", generateRandomSize);

        // Ë©ïÂàÜÁ≥ªÁµ±‰∫ã‰ª∂
        evaluationCheckboxes.forEach((checkbox) => {
          checkbox.addEventListener("change", () => {
            updateEvaluationScore();

            // Ë¶ñË¶∫ÂèçÈ•ã
            const listItem = checkbox.closest(".checklist-item");
            if (checkbox.checked) {
              listItem.classList.add("checked");
            } else {
              listItem.classList.remove("checked");
            }
          });
        });

        if (houseRentInput)
          houseRentInput.addEventListener("input", updateEvaluationScore);
        if (rentalSubsidyInput)
          rentalSubsidyInput.addEventListener("input", updateEvaluationScore);
        if (hasSubsidyCheckbox)
          hasSubsidyCheckbox.addEventListener("change", updateEvaluationScore);

        // ËÅØÁµ°ÊñπÂºèÊåâÈàï‰∫ã‰ª∂
        contactTypeButtons.forEach((button) => {
          button.addEventListener("click", function () {
            // ÁßªÈô§ÂÖ∂‰ªñÊåâÈàïÁöÑÈÅ∏‰∏≠ÁãÄÊÖã
            contactTypeButtons.forEach((btn) => {
              btn.classList.remove("selected");
            });

            // Ë®≠ÂÆöÁï∂ÂâçÊåâÈàïÁÇ∫ÈÅ∏‰∏≠
            this.classList.add("selected");

            // Êõ¥Êñ∞Èö±ËóèÁöÑ input ÂÄº
            contactTypeInput.value = this.dataset.type;

            console.log("ËÅØÁµ°ÊñπÂºèÂ∑≤ÈÅ∏Êìá:", this.dataset.type);
          });
        });

        // ÁßüÂ±ãË£úÂä©ÈÅ∏È†Ö‰∫ã‰ª∂
        if (noSubsidyOption && hasSubsidyOption) {
          noSubsidyOption.addEventListener("click", function () {
            // ÁßªÈô§ÈÅ∏‰∏≠ÁãÄÊÖã
            hasSubsidyOption.classList.remove(
              "bg-green-100",
              "border-green-400"
            );
            this.classList.add("bg-red-100", "border-red-400");

            // Êõ¥Êñ∞Èö±ËóèinputÂíåË¶ñË¶∫
            if (hasSubsidyCheckbox) hasSubsidyCheckbox.value = "false";
            if (rentalSubsidyInput) rentalSubsidyInput.value = 0;

            // ÂÑ≤Â≠òÂà∞Êú¨Âú∞
            localStorage.setItem(
              "rentalSubsidyPreference",
              JSON.stringify({
                hasSubsidy: false,
                amount: 0,
              })
            );

            updateEvaluationScore();
            showNotification("Â∑≤Ë®≠ÂÆöÁÇ∫‰∏çÂèØÁßüË£ú", "info");
          });

          hasSubsidyOption.addEventListener("click", function () {
            // ÁßªÈô§ÈÅ∏‰∏≠ÁãÄÊÖã
            noSubsidyOption.classList.remove("bg-red-100", "border-red-400");
            this.classList.add("bg-green-100", "border-green-400");

            // Êõ¥Êñ∞Èö±ËóèinputÂíåÈ†êË®≠ÂÄº
            if (hasSubsidyCheckbox) hasSubsidyCheckbox.value = "true";
            if (rentalSubsidyInput && !rentalSubsidyInput.value) {
              rentalSubsidyInput.value = 2880;
            }

            // ÂÑ≤Â≠òÂà∞Êú¨Âú∞
            localStorage.setItem(
              "rentalSubsidyPreference",
              JSON.stringify({
                hasSubsidy: true,
                amount: parseInt(rentalSubsidyInput.value) || 2880,
              })
            );

            updateEvaluationScore();
            showNotification("Â∑≤Ë®≠ÂÆöÁÇ∫ÂèØÁßüË£ú", "success");
          });

          // Ë£úÂä©ÈáëÈ°çËº∏ÂÖ•‰∫ã‰ª∂
          if (rentalSubsidyInput) {
            rentalSubsidyInput.addEventListener("input", function () {
              if (hasSubsidyCheckbox && hasSubsidyCheckbox.value === "true") {
                localStorage.setItem(
                  "rentalSubsidyPreference",
                  JSON.stringify({
                    hasSubsidy: true,
                    amount: parseInt(this.value) || 0,
                  })
                );
              }
              updateEvaluationScore();
            });
          }
        }

        // ËÅØÁµ°Á∞øÂäüËÉΩ‰∫ã‰ª∂
        if (saveContactBtn) {
          saveContactBtn.addEventListener("click", saveContact);
        }

        if (viewContactBookBtn) {
          viewContactBookBtn.addEventListener("click", viewContactBook);
        }

        if (closeContactBookBtn) {
          closeContactBookBtn.addEventListener("click", () => {
            hideModal(contactBookModal);
          });
        }

        // Âø´ÈÄüÂ∞éÂÖ•ËÅØÁµ°‰∫∫ÂäüËÉΩ
        const quickImportContactBtn =
          document.getElementById("quickImportContact");
        if (quickImportContactBtn) {
          quickImportContactBtn.addEventListener("click", function () {
            const contacts = [
              {
                name: "Èô≥Â∞èËèØ",
                phone: "0912-345-678",
                type: "line",
                address: "Âè∞‰∏≠Â∏ÇË•øÂ±ØÂçÄÊñáËèØË∑Ø100Ëôü",
              },
              {
                name: "ÂºµÊàø‰ª≤",
                phone: "0923-456-789",
                type: "facebook",
                address: "Âè∞‰∏≠Â∏ÇÂçóÂ±ØÂçÄÊÉ†ÊñáË∑Ø200Ëôü",
              },
              {
                name: "ÊùéÂ±ã‰∏ª",
                phone: "0934-567-890",
                type: "phone",
                address: "Âè∞‰∏≠Â∏ÇÂåóÂçÄÈÄ≤ÂåñË∑Ø300Ëôü",
              },
              {
                name: "Áéã‰ª£ÁêÜ",
                phone: "0945-678-901",
                type: "line",
                address: "Âè∞‰∏≠Â∏ÇË•øÂçÄÁæéÊùëË∑Ø400Ëôü",
              },
              {
                name: "Êûó‰ª≤‰ªã",
                phone: "0956-789-012",
                type: "facebook",
                address: "Âè∞‰∏≠Â∏ÇÊù±ÂçÄÊ®ÇÊ•≠Ë∑Ø500Ëôü",
              },
            ];

            const randomContact =
              contacts[Math.floor(Math.random() * contacts.length)];

            // Â°´ÂÖ•ËÅØÁµ°‰∫∫Ë≥áË®ä
            contactNameInput.value = randomContact.name;
            contactPhoneInput.value = randomContact.phone;
            contactTypeInput.value = randomContact.type;
            if (propertyAddressInput) {
              propertyAddressInput.value = randomContact.address;
            }

            // Êõ¥Êñ∞ËÅØÁµ°ÊñπÂºèÊåâÈàïË¶ñË¶∫ÁãÄÊÖã
            contactTypeButtons.forEach((btn) =>
              btn.classList.remove("selected")
            );
            const selectedBtn = document.querySelector(
              `[data-type="${randomContact.type}"]`
            );
            if (selectedBtn) selectedBtn.classList.add("selected");

            showNotification(`Â∑≤Âø´ÈÄüÂ∞éÂÖ•Ôºö${randomContact.name}`, "success");
          });
        }

        // È†êÁ¥ÑÁúãÂ±ãË°®ÂñÆËá™ÂãïÂÑ≤Â≠ò
        const viewingFormFields = [
          "numResidents",
          "relationship",
          "age",
          "moveInDate",
          "occupation",
          "smoking",
          "pets",
          "budget",
          "preferredArea",
        ];

        viewingFormFields.forEach((fieldId) => {
          const field = document.getElementById(fieldId);
          if (field) {
            field.addEventListener("input", function () {
              const formData = {};
              viewingFormFields.forEach((id) => {
                const el = document.getElementById(id);
                if (el) formData[id] = el.value;
              });

              localStorage.setItem("viewingFormData", JSON.stringify(formData));
            });

            field.addEventListener("change", function () {
              const formData = {};
              viewingFormFields.forEach((id) => {
                const el = document.getElementById(id);
                if (el) formData[id] = el.value;
              });

              localStorage.setItem("viewingFormData", JSON.stringify(formData));
            });
          }
        });

        // Ë©ïÂàÜÁ≥ªÁµ±ÊåâÈàï
        if (saveEvaluationBtn)
          saveEvaluationBtn.addEventListener("click", saveEvaluation);
        if (viewSavedEvaluationsBtn)
          viewSavedEvaluationsBtn.addEventListener(
            "click",
            viewSavedEvaluations
          );
        if (exportEvaluationBtn)
          exportEvaluationBtn.addEventListener("click", exportEvaluation);
        if (resetEvaluationBtn)
          resetEvaluationBtn.addEventListener("click", resetEvaluation);

        // È†êÁ¥ÑÁúãÂ±ãÊåâÈàï
        if (saveViewingTemplateBtn)
          saveViewingTemplateBtn.addEventListener("click", saveViewingTemplate);
        if (copyViewingInfoBtn)
          copyViewingInfoBtn.addEventListener("click", copyViewingInfo);
        if (clearViewingTemplateBtn)
          clearViewingTemplateBtn.addEventListener(
            "click",
            clearViewingTemplate
          );

        // Modal ÊéßÂà∂‰∫ã‰ª∂
        if (closePresetBtn)
          closePresetBtn.addEventListener("click", () =>
            hideModal(presetModal)
          );
        if (closeSavedEvaluationsBtn)
          closeSavedEvaluationsBtn.addEventListener("click", () =>
            hideModal(savedEvaluationsModal)
          );

        // È†êË®≠Â∞∫ÂØ∏ÊåâÈàï‰∫ã‰ª∂
        presetSizeButtons.forEach((button) => {
          button.addEventListener("click", () => {
            const length = button.dataset.length;
            const width = button.dataset.width;

            lengthInput.value = length;
            widthInput.value = width;
            calculateArea();

            hideModal(presetModal);
            showNotification(
              `Â∑≤Â•óÁî®È†êË®≠Â∞∫ÂØ∏Ôºö${length}m √ó ${width}m`,
              "success"
            );
          });
        });

        // Modal ËÉåÊôØÈªûÊìäÈóúÈñâ
        [presetModal, savedEvaluationsModal, contactBookModal].forEach(
          (modal) => {
            if (modal) {
              modal.addEventListener("click", (e) => {
                if (e.target === modal) hideModal(modal);
              });
            }
          }
        );

        // ÂàÜ‰∫´ÊåâÈàï‰∫ã‰ª∂
        shareBtns.forEach((btn) => {
          if (btn) btn.addEventListener("click", handleShare);
        });

        // ÈÄöÁü•Á≥ªÁµ±‰∫ã‰ª∂
        if (closeNotificationBtn)
          closeNotificationBtn.addEventListener("click", hideNotification);

        // ÈçµÁõ§Âø´Êç∑Èçµ
        document.addEventListener("keydown", (e) => {
          if (
            e.target.tagName.toLowerCase() === "input" ||
            e.target.tagName.toLowerCase() === "textarea"
          )
            return;

          if (e.key === "Escape") {
            hideModal(presetModal);
            hideModal(savedEvaluationsModal);
            hideModal(contactBookModal);
            hideNotification();
          }

          if (e.ctrlKey || e.metaKey) {
            switch (e.key.toLowerCase()) {
              case "d":
                e.preventDefault();
                clearCalculator();
                break;
              case "c":
                if (!copyResultBtn.disabled) {
                  e.preventDefault();
                  copyResult();
                }
                break;
              case "s":
                e.preventDefault();
                if (e.shiftKey) {
                  saveEvaluation();
                } else {
                  handleShare();
                }
                break;
            }
          }
        });
      }

      // ===== ÂàùÂßãÂåñÂáΩÊï∏ =====
      function initialize() {
        console.log("üè† Â∞àÊ•≠ÁßüÂ±ãÁúãÊàøÂÖ®ËÉΩÂ∑•ÂÖ∑ÂàùÂßãÂåñ‰∏≠...");

        try {
          // Âü∫Á§éÂäüËÉΩÂàùÂßãÂåñ
          registerEventListeners();

          // ËºâÂÖ•ÂÑ≤Â≠òÁöÑË≥áÊñô
          savedEvaluations = loadFromLocalStorage("savedEvaluations", []);
          viewingTemplate = loadFromLocalStorage("viewingTemplate", {});
          savedContacts = loadFromLocalStorage("savedContacts", []);

          // ÂàùÂßãÂåñË©ïÂàÜÁ≥ªÁµ±
          updateEvaluationScore();

          // ÂàùÂßãÂåñË®àÁÆóÂô®
          updateItemComparisons(0);

          // È†êË®≠‰ΩøÁî®Èï∑ÂØ¨Ëº∏ÂÖ•Ê®°Âºè
          switchInputMode("dimensions");

          // ËºâÂÖ•È†êÁ¥ÑÁúãÂ±ãÊ®°Êùø
          if (Object.keys(viewingTemplate).length > 0) {
            Object.keys(viewingTemplate).forEach((key) => {
              const input = viewingFormInputs[key];
              if (input && viewingTemplate[key]) {
                input.value = viewingTemplate[key];
              }
            });
          }

          // ËºâÂÖ•ÂÑ≤Â≠òÁöÑÈ†êÁ¥ÑÁúãÂ±ãË°®ÂñÆË≥áÊñô
          const savedFormData = loadFromLocalStorage("viewingFormData", {});
          if (Object.keys(savedFormData).length > 0) {
            Object.keys(savedFormData).forEach((key) => {
              const field = document.getElementById(key);
              if (field && savedFormData[key]) {
                field.value = savedFormData[key];
              }
            });
          }

          // ËºâÂÖ•ÁßüÂ±ãË£úÂä©ÂÅèÂ•ΩË®≠ÂÆö
          const savedSubsidyPreference = loadFromLocalStorage(
            "rentalSubsidyPreference",
            {}
          );
          if (savedSubsidyPreference.hasSubsidy !== undefined) {
            const noSubsidyOption = document.getElementById("noSubsidyOption");
            const hasSubsidyOption =
              document.getElementById("hasSubsidyOption");
            const rentalSubsidyInput = document.getElementById("rentalSubsidy");
            const hasSubsidyCheckbox = document.getElementById("hasSubsidy");

            if (savedSubsidyPreference.hasSubsidy) {
              if (hasSubsidyOption)
                hasSubsidyOption.classList.add(
                  "bg-green-100",
                  "border-green-400"
                );
              if (noSubsidyOption)
                noSubsidyOption.classList.remove(
                  "bg-red-100",
                  "border-red-400"
                );
              if (hasSubsidyCheckbox) hasSubsidyCheckbox.value = "true";
              if (rentalSubsidyInput)
                rentalSubsidyInput.value =
                  savedSubsidyPreference.amount || 2880;
            } else {
              if (noSubsidyOption)
                noSubsidyOption.classList.add("bg-red-100", "border-red-400");
              if (hasSubsidyOption)
                hasSubsidyOption.classList.remove(
                  "bg-green-100",
                  "border-green-400"
                );
              if (hasSubsidyCheckbox) hasSubsidyCheckbox.value = "false";
              if (rentalSubsidyInput) rentalSubsidyInput.value = 0;
            }
          }

          // Ë®≠ÂÆöÁÑ¶Èªû
          if (lengthInput) {
            lengthInput.focus();
          }

          // Âª∂ÈÅ≤È°ØÁ§∫Ê≠°ËøéË®äÊÅØ
          setTimeout(() => {
            showNotification("üéâ Ê≠°Ëøé‰ΩøÁî®Â∞àÊ•≠ÁßüÂ±ãÁúãÊàøÂÖ®ËÉΩÂ∑•ÂÖ∑ÔºÅ", "info");
          }, 1500);

          console.log("‚úÖ Â∞àÊ•≠ÁßüÂ±ãÁúãÊàøÂ∑•ÂÖ∑Â∑≤Â∞±Á∑íÔºÅ");
          console.log(
            "üéØ Âø´Êç∑ÈçµÔºöCtrl+D Ê∏ÖÈô§„ÄÅCtrl+C Ë§áË£Ω„ÄÅCtrl+Shift+S ‰øùÂ≠òË©ïÂàÜ„ÄÅCtrl+S ÂàÜ‰∫´„ÄÅESC ÈóúÈñâ"
          );
        } catch (error) {
          console.error("ÂàùÂßãÂåñÂ§±Êïó:", error);
          showNotification("Á≥ªÁµ±ÂàùÂßãÂåñÂ§±ÊïóÔºåË´ãÈáçÊñ∞Êï¥ÁêÜÈ†ÅÈù¢", "error");
        }
      }

      // ÂÖ®ÂüüÂáΩÊï∏Ôºà‰æõ onclick ‰ΩøÁî®Ôºâ
      window.deleteEvaluation = deleteEvaluation;
      window.exportSingleEvaluation = exportSingleEvaluation;
      window.loadContact = loadContact;
      window.deleteContact = deleteContact;

      // ===== ÈñãÁôºÊ®°Âºè API =====
      if (
        window.location.hostname === "localhost" ||
        window.location.hostname === "127.0.0.1"
      ) {
        window.RentalToolAPI = {
          calculateArea,
          updateEvaluationScore,
          saveEvaluation,
          viewSavedEvaluations,
          exportEvaluation,
          resetEvaluation,
          saveViewingTemplate,
          copyViewingInfo,
          clearViewingTemplate,
          showNotification,
          handleShare,
          generateRandomSize,
          updateItemComparisons,
          switchInputMode,
          savedEvaluations: () => savedEvaluations,
          viewingTemplate: () => viewingTemplate,
          currentEvaluationScore: () => currentEvaluationScore,
          VERSION: "4.1.1",
        };
        console.log("üîß ÈñãÁôºÊ®°ÂºèÔºöwindow.RentalToolAPI Â∑≤ÂèØÁî®");
      }

      // ===== È†ÅÈù¢ËºâÂÖ•ÂÆåÊàêÂü∑Ë°å =====
      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", initialize);
      } else {
        initialize();
      }

      // ===== ÁâàÊú¨Ë≥áË®ä =====
      console.log(`
        üè† Â∞àÊ•≠ÁßüÂ±ãÁúãÊàøÂÖ®ËÉΩÂ∑•ÂÖ∑ v4.1.1
        ==========================================
        ‚ú® Êñ∞ÂäüËÉΩÁâπËâ≤Ôºö
        ‚≠ê Êô∫ËÉΩË©ïÂàÜÁ≥ªÁµ±ÔºàÊ¨äÈáçË©ïÂàÜ„ÄÅCPÂÄºË®àÁÆóÔºâ
        üìê Â§öÊ®°ÂºèÂù™Êï∏Ë®àÁÆóÂô®ÔºàÈï∑ÂØ¨/Èù¢Á©ç/Áâ©ÂìÅ‰º∞ÁÆóÔºâ
        üìÖ È†êÁ¥ÑÁúãÂ±ãË≥áÊñôÊ®°Êùø
        üö® ÁßüÂ±ãÈò≤Ë©êÈ®ôÂÆåÂÖ®ÊåáÂçó
        üí∞ 2025Âπ¥ÊúÄÊñ∞ÁßüÂ±ãË£úË≤ºÔºàÂê´ÈõôÁßüË£úË™™ÊòéÔºâ
        üíæ Êú¨Âú∞ÂÑ≤Â≠òË©ïÂàÜË®òÈåÑ
        üì± ÂÆåÊï¥ÂàÜ‰∫´ÂäüËÉΩÔºàÊîØÊè¥ ThreadsÔºâ
        
        üõ†Ô∏è  ÊäÄË°ìË¶èÊ†ºÔºö
        üé® Tailwind CSS + ÊâãÂØ´ CSS 
        üì± Mobile-first ÈüøÊáâÂºèË®≠Ë®à
        ‚ôø ÁÑ°ÈöúÁ§ôÊîØÊè¥ (WCAG AA)
        üöÄ ÊïàËÉΩÂÑ™Âåñ & ÈåØË™§ËôïÁêÜ
        üíæ Êô∫ËÉΩÁãÄÊÖãÂÑ≤Â≠ò
        üîó ‰ΩúËÄÖÈÄ£ÁµêÔºö@azlife_1224
        
        üéØ Âø´Êç∑ÈçµÊîØÊè¥Ôºö
        Ctrl+D - Ê∏ÖÈô§Ë®àÁÆóÂô®
        Ctrl+C - Ë§áË£ΩÁµêÊûú  
        Ctrl+Shift+S - ‰øùÂ≠òË©ïÂàÜ
        Ctrl+S - ÈñãÂïüÂàÜ‰∫´ÂäüËÉΩ
        ESC - ÈóúÈñâÊâÄÊúâÂΩàÁ™ó
        
        ==========================================
        `);
    </script>
  </body>
</html>
