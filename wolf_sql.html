<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SQL å¤œå¸‚å¤§å†’éšª - æ²‰æµ¸å¼å­¸ç¿’é«”é©—</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash/4.17.21/lodash.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --stall-primary: #ff9234;
      --stall-secondary: #ffcd3c;
      --text-light: #f1f2f6;
      --text-dark: #2f3542;
      --neon-red: #ff4757;
      --neon-blue: #70a1ff;
      --neon-green: #2ed573;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Noto Sans TC', sans-serif;
    }
    body {
      background: #1a1a1a;
      color: var(--text-light);
      min-height: 100vh;
      overflow-x: hidden;
    }
    /* å¤œå¸‚èƒŒæ™¯æ•ˆæœ */
    .market-scene {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)),
        url('https://picsum.photos/1920/1080') center/cover;
      z-index: -1;
    }
    /* éœ“è™¹ç‡ˆæ•ˆæœ */
    .neon-sign {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 2.5rem;
      font-weight: bold;
      color: var(--neon-red);
      text-shadow: 
        0 0 5px var(--neon-red),
        0 0 10px var(--neon-red),
        0 0 20px var(--neon-red);
      animation: neonFlicker 1.5s infinite alternate;
    }
    @keyframes neonFlicker {
      0%, 18%, 22%, 25%, 53%, 57%, 100% {
        text-shadow: 
          0 0 5px var(--neon-red),
          0 0 10px var(--neon-red),
          0 0 20px var(--neon-red);
      }
      20%, 24%, 55% {
        text-shadow: none;
      }
    }
    /* å¤œå¸‚å…¥å£èªªæ˜ */
    .market-entrance {
      text-align: center;
      margin-top: 100px;
      padding: 1rem;
    }
    .entrance-desc {
      font-size: 1.2rem;
      margin-top: 10px;
      color: var(--neon-blue);
    }
    /* äº’å‹•å€å¡Š */
    .container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      padding: 2rem;
      gap: 2rem;
    }
    .market-stall {
      background: linear-gradient(45deg, var(--stall-primary), var(--stall-secondary));
      border-radius: 15px;
      padding: 2rem;
      width: 320px;
      position: relative;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      transform-style: preserve-3d;
      transition: transform 0.3s ease;
    }
    .stall-canopy {
      position: absolute;
      top: -20px;
      left: 0;
      right: 0;
      height: 30px;
      background: repeating-linear-gradient(
          45deg,
          var(--stall-primary),
          var(--stall-primary) 10px,
          var(--stall-secondary) 10px,
          var(--stall-secondary) 20px
      );
      border-radius: 10px 10px 0 0;
      transform: perspective(100px) rotateX(5deg);
    }
    .stall-counter {
      background: rgba(255,255,255,0.1);
      padding: 1.5rem;
      border-radius: 10px;
      backdrop-filter: blur(5px);
      margin-top: 1rem;
    }
    .sql-learning-area h3 {
      margin-bottom: 1rem;
      font-size: 1.4rem;
      color: var(--stall-secondary);
      text-align: center;
    }
    .sql-code {
      background: #2f3542;
      padding: 1rem;
      border-radius: 10px;
      font-family: monospace;
      margin-bottom: 1rem;
      position: relative;
    }
    .sql-code::before {
      content: 'SQL';
      position: absolute;
      top: -10px;
      left: 10px;
      background: var(--neon-blue);
      padding: 2px 10px;
      border-radius: 5px;
      font-size: 0.8rem;
      color: var(--text-dark);
    }
    .stall-btn {
      background: var(--neon-green);
      color: var(--text-dark);
      border: none;
      padding: 0.8rem 1.2rem;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      margin-top: 0.5rem;
    }
    .stall-btn:hover::after {
      left: 100%;
    }
    .stall-btn::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(
          transparent,
          rgba(255,255,255,0.2),
          transparent
      );
      transform: rotate(45deg);
      transition: 0.5s;
    }
    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }
    .product-card {
      background: rgba(255,255,255,0.1);
      padding: 1rem;
      border-radius: 10px;
      text-align: center;
      transition: transform 0.3s ease;
    }
    .product-card:hover {
      transform: translateY(-5px);
    }
    .product-image {
      width: 80px;
      height: 80px;
      margin: 0 auto;
      background: var(--stall-secondary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }
    .result-display {
      background: rgba(0,0,0,0.9);
      padding: 1rem;
      border-radius: 10px;
      margin-top: 1rem;
      border: 1px solid var(--neon-blue);
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s ease;
      font-size: 0.9rem;
      overflow-x: auto;
    }
    .result-display.show {
      opacity: 1;
      transform: translateY(0);
    }
    /* RWD */
    @media (max-width: 768px) {
      .market-stall {
        width: 90%;
        padding: 1rem;
      }
    }
    /* å‹•æ…‹æ•ˆæœ */
    .stall-animation {
      animation: stallAppear 0.5s ease-out;
    }
    @keyframes stallAppear {
      from { opacity: 0; transform: translateY(50px); }
      to { opacity: 1; transform: translateY(0); }
    }
    /* åŠ‡æƒ…å°è©± */
    .dialogue {
      text-align: center;
      margin: 1rem;
      font-size: 1.1rem;
      color: var(--neon-blue);
    }
  </style>
</head>
<body>
  <div class="market-scene"></div>
  <!-- å¤œå¸‚å…¥å£ -->
  <header class="market-entrance">
    <div class="neon-sign">SQL å¤œå¸‚å¤§å†’éšª</div>
    <p class="entrance-desc">å’Œå°ç‹¼ã€å°å…”ä¸€èµ·æ¢ç´¢ SQL çš„ç¾å‘³ä¸–ç•Œï½</p>
  </header>
  
  <!-- äº’å‹•æ”¤ä½ -->
  <div class="container">
    <!-- SELECT æŸ¥è©¢æ”¤ä½ -->
    <section class="market-stall stall-animation">
      <div class="stall-canopy"></div>
      <h2>ğŸœ æŸ¥è©¢å°é¤¨</h2>
      <div class="sql-learning-area">
        <h3>SELECT æŸ¥è©¢åŸºç¤</h3>
        <div class="sql-code">
          SELECT column1, column2<br>
          FROM table_name<br>
          WHERE condition;
        </div>
        <div class="product-grid">
          <div class="product-card">
            <div class="product-image">ğŸœ</div>
            <h4>åŸºç¤æŸ¥è©¢</h4>
            <button class="stall-btn" onclick="demonstrateSelect('basic')">è©¦è©¦çœ‹</button>
          </div>
          <div class="product-card">
            <div class="product-image">ğŸ¥˜</div>
            <h4>æ¢ä»¶æŸ¥è©¢</h4>
            <button class="stall-btn" onclick="demonstrateSelect('where')">è©¦è©¦çœ‹</button>
          </div>
        </div>
        <div class="result-display" id="select-result"></div>
      </div>
    </section>
    
    <!-- JOIN é—œè¯æ”¤ä½ -->
    <section class="market-stall stall-animation">
      <div class="stall-canopy"></div>
      <h2>ğŸ² é—œè¯é¤é¤¨</h2>
      <div class="sql-learning-area">
        <h3>JOIN æŸ¥è©¢</h3>
        <div class="sql-code">
          SELECT a.column1, b.column2<br>
          FROM table1 a<br>
          JOIN table2 b ON a.id = b.id;
        </div>
        <div class="product-grid">
          <div class="product-card">
            <div class="product-image">ğŸ¤</div>
            <h4>INNER JOIN</h4>
            <button class="stall-btn" onclick="demonstrateJoin('inner')">è©¦è©¦çœ‹</button>
          </div>
          <div class="product-card">
            <div class="product-image">ğŸ”„</div>
            <h4>LEFT JOIN</h4>
            <button class="stall-btn" onclick="demonstrateJoin('left')">è©¦è©¦çœ‹</button>
          </div>
        </div>
        <div class="result-display" id="join-result"></div>
      </div>
    </section>
    
    <!-- å…¶ä»–åŠŸèƒ½å¯ç”¨ action-buttons æ¨¡æ“¬ï¼ˆä¸é‡è¤‡æ”¤ä½å¤–è§€ï¼‰ -->
    <section class="market-stall stall-animation">
      <div class="stall-canopy"></div>
      <h2>ğŸ”§ é€²éšæ“ä½œæ”¤</h2>
      <div class="sql-learning-area">
        <h3>é€²éšåŠŸèƒ½å±•ç¤º</h3>
        <div class="product-grid">
          <div class="product-card">
            <div class="product-image">â†•ï¸</div>
            <h4>æ’åº (ORDER BY)</h4>
            <button class="stall-btn" onclick="demonstrateSort()">è©¦è©¦çœ‹</button>
          </div>
          <div class="product-card">
            <div class="product-image">ğŸ“Š</div>
            <h4>éŠ·é‡æ’è¡Œæ¦œ</h4>
            <button class="stall-btn" onclick="demonstrateGroupBy()">è©¦è©¦çœ‹</button>
          </div>
          <div class="product-card">
            <div class="product-image">ğŸ”</div>
            <h4>å­æŸ¥è©¢</h4>
            <button class="stall-btn" onclick="demonstrateSubQuery()">è©¦è©¦çœ‹</button>
          </div>
          <div class="product-card">
            <div class="product-image">ğŸ†</div>
            <h4>æ’ååŠŸèƒ½</h4>
            <button class="stall-btn" onclick="demonstrateWindowFunc()">è©¦è©¦çœ‹</button>
          </div>
          <div class="product-card">
            <div class="product-image">ğŸ’°</div>
            <h4>äº¤æ˜“æ§åˆ¶</h4>
            <button class="stall-btn" onclick="demonstrateTransaction()">è©¦è©¦çœ‹</button>
          </div>
          <div class="product-card">
            <div class="product-image">âš™ï¸</div>
            <h4>è‡ªå‹•ä¿ƒéŠ·</h4>
            <button class="stall-btn" onclick="demonstrateProcTrigger()">è©¦è©¦çœ‹</button>
          </div>
          <div class="product-card">
            <div class="product-image">ğŸ”‘</div>
            <h4>ç´¢å¼•èˆ‡æ¬Šé™</h4>
            <button class="stall-btn" onclick="demonstrateIndexPerm()">è©¦è©¦çœ‹</button>
          </div>
        </div>
        <div class="result-display" id="advanced-result"></div>
      </div>
    </section>
  </div>
  
  <!-- åŠ‡æƒ…å°è©±å€ -->
  <div class="dialogue" id="dialogueBox">
    <strong>å°ç‹¼</strong>ï¼šå—¨å—¨ï½å„ä½è³‡æ–™åº«ç‹‚äººï¼Œæ­¡è¿ä¾†åˆ° SQL å¤œå¸‚ï¼<br>
    <strong>å°å…”</strong>ï¼šé å¤­ï½å°ç‹¼ï¼Œä½ é€™è©±èªªå¾—è·Ÿæˆ‘åª½çš„å¤œå¸‚æ”¤ä½ä¸€æ¨£æœ‰å‘³é“ï¼
  </div>
  
  <script>
    // æ¨¡æ“¬è³‡æ–™åº«ç‰©ä»¶
    let db = {
      name: "",
      tables: {}
    };

    function logOutput(selector, text) {
      document.querySelector(selector).innerHTML = `
        <h4>SQLèªæ³•ï¼š</h4>
        <div class="sql-code">${text}</div>
      `;
      document.querySelector(selector).classList.add('show');
    }

    function updateDialogue(speaker, message) {
      document.getElementById('dialogueBox').innerHTML = `<strong>${speaker}</strong>ï¼š${message}`;
    }

    function updateDBStructure() {
      // å¯æ“´å……å·¦å´è³‡æ–™åº«çµæ§‹å±•ç¤ºï¼ˆæ­¤è™•ç•¥ï¼‰
    }

    // SELECT æŸ¥è©¢ç¤ºç¯„
    function demonstrateSelect(type) {
      const queryResult = document.getElementById('select-result');
      let query = '', explanation = '';
      if (type === 'basic') {
        query = `SELECT dish_name, price FROM menu;`;
        explanation = 'æŸ¥è©¢èœå–®ä¸­çš„èœåå’Œåƒ¹æ ¼';
      } else if (type === 'where') {
        query = `SELECT dish_name, price FROM menu WHERE price < 100;`;
        explanation = 'æŸ¥è©¢åƒ¹æ ¼ 100 å…ƒä»¥ä¸‹çš„èœå“';
      }
      queryResult.innerHTML = `
        <h4>SQLèªæ³•ï¼š</h4>
        <div class="sql-code">${query}</div>
        <p>${explanation}</p>
        <div class="sample-result">
          <table border="1" cellpadding="5">
            <tr><th>èœå</th><th>åƒ¹æ ¼</th></tr>
            <tr><td>ç‚’éºµ</td><td>80</td></tr>
            <tr><td>æ»·è‚‰é£¯</td><td>60</td></tr>
          </table>
        </div>
      `;
      queryResult.classList.add('show');
      updateDialogue("å°ç‹¼", "SELECT æŸ¥è©¢å®Œæˆï¼çœ‹ä¾†èœå–®è³‡è¨Šéƒ½å¾ˆæ¸…æ¥šäº†ã€‚");
    }

    // JOIN æŸ¥è©¢ç¤ºç¯„
    function demonstrateJoin(type) {
      const joinResult = document.getElementById('join-result');
      let query = '', explanation = '';
      if (type === 'inner') {
        query = `SELECT m.dish_name, c.category_name
FROM menu m
INNER JOIN categories c ON m.category_id = c.id;`;
        explanation = 'æŸ¥è©¢æ‰€æœ‰èœå“åŠå…¶åˆ†é¡ï¼ˆINNER JOINï¼‰';
      } else if (type === 'left') {
        query = `SELECT m.dish_name, o.order_count
FROM menu m
LEFT JOIN orders o ON m.id = o.menu_id;`;
        explanation = 'æŸ¥è©¢æ‰€æœ‰èœå“çš„è¨‚å–®æ•¸é‡ï¼ŒåŒ…æ‹¬æœªè¢«è¨‚è³¼çš„èœå“ï¼ˆLEFT JOINï¼‰';
      }
      joinResult.innerHTML = `
        <h4>SQLèªæ³•ï¼š</h4>
        <div class="sql-code">${query}</div>
        <p>${explanation}</p>
        <div class="sample-result">
          <table border="1" cellpadding="5">
            <tr><th>èœå</th><th>åˆ†é¡/è¨‚å–®æ•¸</th></tr>
            <tr><td>ç‚’éºµ</td><td>ä¸»é£Ÿ / 25</td></tr>
            <tr><td>æ»·è‚‰é£¯</td><td>ä¸»é£Ÿ / 30</td></tr>
          </table>
        </div>
      `;
      joinResult.classList.add('show');
      updateDialogue("å°ç‹¼", "JOIN æŸ¥è©¢å®Œæˆï¼æ”¤ä½åˆä½œï¼Œå¥—é¤çµ„åˆæå®šã€‚");
    }

    // æ’åºåŠŸèƒ½ç¤ºç¯„ï¼ˆORDER BYï¼‰
    function demonstrateSort() {
      const advResult = document.getElementById('advanced-result');
      const query = `SELECT * FROM menu ORDER BY price ASC;`;
      const explanation = 'ä¾åƒ¹æ ¼å‡å†ªæ’åºï¼Œè®“ä½ ä¸€çœ¼çœ‹å‡ºæœ€åˆ’ç®—çš„èœå“';
      advResult.innerHTML = `
        <h4>SQLèªæ³•ï¼š</h4>
        <div class="sql-code">${query}</div>
        <p>${explanation}</p>
        <div class="sample-result">
          <table border="1" cellpadding="5">
            <tr><th>èœå</th><th>åƒ¹æ ¼</th></tr>
            <tr><td>æ»·è‚‰é£¯</td><td>60</td></tr>
            <tr><td>ç‚’éºµ</td><td>80</td></tr>
            <tr><td>ç‰›è‚‰éºµ</td><td>120</td></tr>
          </table>
        </div>
      `;
      advResult.classList.add('show');
      updateDialogue("å°ç‹¼", "æ’åºå®Œæˆï¼é€™æ’åˆ—å°±åƒå¤œå¸‚ç‡ˆç®±ï¼Œå…‰å½©å¥ªç›®ã€‚");
    }

    // ç¾¤çµ„çµ±è¨ˆèˆ‡ç¯©é¸ç¤ºç¯„ï¼ˆGROUP BY / HAVINGï¼‰
    function demonstrateGroupBy() {
      const advResult = document.getElementById('advanced-result');
      const query = `SELECT category, COUNT(*) AS dish_count
FROM menu
GROUP BY category
HAVING COUNT(*) > 0;`;
      const explanation = 'çµ±è¨ˆå„åˆ†é¡èœå“æ•¸é‡ï¼Œè£½ä½œéŠ·é‡æ’è¡Œæ¦œ';
      advResult.innerHTML = `
        <h4>SQLèªæ³•ï¼š</h4>
        <div class="sql-code">${query}</div>
        <p>${explanation}</p>
        <div class="sample-result">
          <table border="1" cellpadding="5">
            <tr><th>åˆ†é¡</th><th>èœå“æ•¸é‡</th></tr>
            <tr><td>ä¸»é£Ÿ</td><td>10</td></tr>
            <tr><td>å°åƒ</td><td>8</td></tr>
          </table>
        </div>
      `;
      advResult.classList.add('show');
      updateDialogue("å°ç‹¼", "éŠ·é‡æ’è¡Œæ¦œå‡ºçˆï¼æ”¤ä½äººæ°£ä¸€è¦½ç„¡éºã€‚");
    }

    // å­æŸ¥è©¢ç¤ºç¯„
    function demonstrateSubQuery() {
      const advResult = document.getElementById('advanced-result');
      const query = `SELECT dish_name, price
FROM menu
WHERE price > (SELECT AVG(price) FROM menu);`;
      const explanation = 'æŸ¥è©¢åƒ¹æ ¼é«˜æ–¼å¹³å‡å€¼çš„èœå“ï¼Œæ‰¾å‡ºé«˜ç«¯é¸æ“‡';
      advResult.innerHTML = `
        <h4>SQLèªæ³•ï¼š</h4>
        <div class="sql-code">${query}</div>
        <p>${explanation}</p>
        <div class="sample-result">
          <table border="1" cellpadding="5">
            <tr><th>èœå</th><th>åƒ¹æ ¼</th></tr>
            <tr><td>ç‰›è‚‰éºµ</td><td>120</td></tr>
            <tr><td>æ‹›ç‰Œç‚’é£¯</td><td>110</td></tr>
          </table>
        </div>
      `;
      advResult.classList.add('show');
      updateDialogue("å°ç‹¼", "å­æŸ¥è©¢å®Œæˆï¼å…§å¹•æ¶ˆæ¯å·²æ­éœ²ã€‚");
    }

    // Window Functions ç¤ºç¯„
    function demonstrateWindowFunc() {
      const advResult = document.getElementById('advanced-result');
      const query = `SELECT dish_name, price,
       RANK() OVER (ORDER BY price DESC) AS rank
FROM menu;`;
      const explanation = 'ä¾ç…§åƒ¹æ ¼æ’åï¼Œé¡¯ç¤ºå„èœå“çš„å¸‚å ´æ’å';
      advResult.innerHTML = `
        <h4>SQLèªæ³•ï¼š</h4>
        <div class="sql-code">${query}</div>
        <p>${explanation}</p>
        <div class="sample-result">
          <table border="1" cellpadding="5">
            <tr><th>èœå</th><th>åƒ¹æ ¼</th><th>æ’å</th></tr>
            <tr><td>ç‰›è‚‰éºµ</td><td>120</td><td>1</td></tr>
            <tr><td>æ‹›ç‰Œç‚’é£¯</td><td>110</td><td>2</td></tr>
            <tr><td>ç‚’éºµ</td><td>80</td><td>3</td></tr>
          </table>
        </div>
      `;
      advResult.classList.add('show');
      updateDialogue("å°ç‹¼", "å³æ™‚æ’åå±•ç¤ºå®Œç•¢ï¼ä½ çœ‹é€™å¸‚å ´ç«¶çˆ­ï¼Œå¤šæ¿€çƒˆï¼");
    }

    // äº¤æ˜“æ§åˆ¶ç¤ºç¯„ï¼ˆTransactionï¼‰
    function demonstrateTransaction() {
      const advResult = document.getElementById('advanced-result');
      const query = `START TRANSACTION;
    UPDATE accounts SET balance = balance - 500 WHERE user_id = 1;
    UPDATE accounts SET balance = balance + 500 WHERE user_id = 2;
COMMIT;`;
      const explanation = 'æ¨¡æ“¬è½‰å¸³äº¤æ˜“ï¼Œç¢ºä¿æ‰€æœ‰æ“ä½œè¦å˜›å…¨åšï¼Œè¦å˜›å…¨æ’¤';
      advResult.innerHTML = `
        <h4>SQLèªæ³•ï¼š</h4>
        <div class="sql-code">${query}</div>
        <p>${explanation}</p>
      `;
      advResult.classList.add('show');
      updateDialogue("å°ç‹¼", "äº¤æ˜“æ§åˆ¶æˆåŠŸï¼æ“ä½œå°±åƒé»è²¨ä¸€æ¨£ç²¾æº–ã€‚");
    }

    // å„²å­˜ç¨‹åºã€è§¸ç™¼å™¨èˆ‡æª¢è¦–è¡¨ç¤ºç¯„
    function demonstrateProcTrigger() {
      const advResult = document.getElementById('advanced-result');
      const query = `-- å„²å­˜ç¨‹åºï¼šè¨­å®šè‡ªå‹•æŠ˜æ‰£ä¿ƒéŠ·
DELIMITER $$
CREATE PROCEDURE auto_discount()
BEGIN
    UPDATE products SET price = price * 0.9 WHERE stock > 100;
END $$
DELIMITER ;

-- è§¸ç™¼å™¨ï¼šæ–°è¨‚å–®æ’å…¥å¾Œè‡ªå‹•é€šçŸ¥
DELIMITER $$
CREATE TRIGGER after_order_insert
AFTER INSERT ON orders
FOR EACH ROW
BEGIN
    INSERT INTO notifications(message) VALUES (CONCAT('æ–°è¨‚å–®ä¾†äº†ï¼è¨‚å–®ç·¨è™Ÿï¼š', NEW.order_id));
END $$
DELIMITER ;

-- æª¢è¦–è¡¨ï¼šå»ºç«‹äººæ°£æ’è¡Œæ¦œæª¢è¦–è¡¨
CREATE VIEW popular_users AS
SELECT u.name, COUNT(o.order_id) AS orders_count
FROM users u
JOIN orders o ON u.user_id = o.user_id
GROUP BY u.user_id, u.name
HAVING COUNT(o.order_id) > 5;`;
      const explanation = 'è¨­å®šè‡ªå‹•ä¿ƒéŠ·ã€è§¸ç™¼é€šçŸ¥åŠäººæ°£æ’è¡Œæ¦œæª¢è¦–è¡¨';
      advResult.innerHTML = `
        <h4>SQLèªæ³•ï¼š</h4>
        <div class="sql-code">${query}</div>
        <p>${explanation}</p>
      `;
      advResult.classList.add('show');
      updateDialogue("å°ç‹¼", "è‡ªå‹•ä¿ƒéŠ·èˆ‡è§¸ç™¼å™¨è¨­å®šå®Œç•¢ï¼Œå®Œå…¨è‡ªå‹•åŒ–ï¼");
    }

    // ç´¢å¼•èˆ‡æ¬Šé™ç®¡ç†ç¤ºç¯„
    function demonstrateIndexPerm() {
      const advResult = document.getElementById('advanced-result');
      const query = `-- å»ºç«‹ç´¢å¼•ï¼ŒåŠ é€ŸæŸ¥è©¢
CREATE INDEX idx_users_email ON users (email);

-- æ¬Šé™ç®¡ç†ï¼šæˆæ¬Šæ“ä½œ
GRANT SELECT, INSERT, UPDATE ON NightMarket.* TO 'assistant_user'@'localhost' IDENTIFIED BY 'secret';

-- æ”¶å›æ¬Šé™
REVOKE UPDATE ON NightMarket.orders FROM 'assistant_user'@'localhost';`;
      const explanation = 'é€éç´¢å¼•å„ªåŒ–æŸ¥è©¢ï¼Œä¸¦è¨­å®šæ¬Šé™ç®¡ç†ç¢ºä¿å®‰å…¨';
      advResult.innerHTML = `
        <h4>SQLèªæ³•ï¼š</h4>
        <div class="sql-code">${query}</div>
        <p>${explanation}</p>
      `;
      advResult.classList.add('show');
      updateDialogue("å°ç‹¼", "ç´¢å¼•èˆ‡æ¬Šé™ç®¡ç†æå®šï¼Œè³‡æ–™åº«é‹ä½œå¦‚åŒå¤œå¸‚ä¿å®‰èˆ¬åš´å¯†ï¼");
    }

    // DOMContentLoaded äº‹ä»¶ï¼Œæ·»åŠ è¦–è¦ºæ•ˆæœ
    document.addEventListener('DOMContentLoaded', () => {
      // éœ“è™¹ç‡ˆé–ƒçˆæ•ˆæœï¼ˆå·²å…§å»ºæ–¼ CSSï¼‰
      // æ”¤ä½æ‡¸åœæ•ˆæœ
      const stalls = document.querySelectorAll('.market-stall');
      stalls.forEach(stall => {
        stall.addEventListener('mouseenter', () => {
          stall.style.transform = 'scale(1.02)';
        });
        stall.addEventListener('mouseleave', () => {
          stall.style.transform = 'scale(1)';
        });
      });
    });
  </script>
</body>
</html>