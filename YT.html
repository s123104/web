<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>YouTube Super Chat Messages</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --glass-border: rgba(255, 255, 255, 0.2);
        --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        --glass-blur: blur(10px);
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: "Roboto", sans-serif;
        background: radial-gradient(
          ellipse at center,
          #1a1a2e 0%,
          #16213e 50%,
          #0f0f0f 100%
        );
        color: #fff;
        margin: 0;
        padding: 0;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        overflow-x: hidden;
        perspective: 1000px;
      }

      .background-pattern {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: radial-gradient(
            circle at 25% 25%,
            rgba(255, 255, 255, 0.03) 1px,
            transparent 1px
          ),
          radial-gradient(
            circle at 75% 75%,
            rgba(255, 255, 255, 0.03) 1px,
            transparent 1px
          );
        background-size: 50px 50px;
        z-index: -1;
      }

      .highlight {
        position: fixed;
        width: 60%;
        height: 200px;
        background: radial-gradient(
          ellipse at center,
          rgba(103, 58, 183, 0.3) 0%,
          rgba(103, 58, 183, 0) 70%
        );
        top: -100px;
        left: 20%;
        border-radius: 100%;
        filter: blur(20px);
        z-index: -1;
        animation: float 15s ease-in-out infinite;
      }

      .highlight-2 {
        position: fixed;
        width: 40%;
        height: 200px;
        background: radial-gradient(
          ellipse at center,
          rgba(233, 30, 99, 0.2) 0%,
          rgba(233, 30, 99, 0) 70%
        );
        bottom: -100px;
        right: 10%;
        border-radius: 100%;
        filter: blur(20px);
        z-index: -1;
        animation: float 20s ease-in-out infinite reverse;
      }

      @keyframes float {
        0% {
          transform: translateY(0) translateX(0);
        }
        50% {
          transform: translateY(100px) translateX(50px);
        }
        100% {
          transform: translateY(0) translateX(0);
        }
      }

      .live-stream-container {
        position: relative;
        width: 100%;
        max-width: 800px;
        margin: 20px auto;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        overflow: hidden;
      }

      .bubbles {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        overflow: hidden;
      }

      .bubble {
        position: absolute;
        bottom: -100px;
        background: radial-gradient(
          circle at center,
          rgba(255, 255, 255, 0.1) 0%,
          rgba(255, 255, 255, 0.05) 60%,
          transparent 70%
        );
        border-radius: 50%;
        opacity: 0;
        animation: rise var(--rise-duration) ease-in infinite;
        animation-delay: var(--rise-delay);
      }

      @keyframes rise {
        0% {
          transform: translateY(0) scale(1);
          opacity: 0;
        }
        10% {
          opacity: 0.8;
        }
        100% {
          transform: translateY(-1000px) scale(1.5);
          opacity: 0;
        }
      }

      .channel-info {
        display: flex;
        align-items: center;
        width: 100%;
        margin-bottom: 30px;
        padding: 20px;
        background: rgba(30, 30, 45, 0.4);
        backdrop-filter: var(--glass-blur);
        -webkit-backdrop-filter: var(--glass-blur);
        border: 1px solid var(--glass-border);
        border-radius: 20px;
        box-shadow: var(--glass-shadow);
        transform-style: preserve-3d;
        transform: translateZ(0);
        transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }

      .channel-info:hover {
        transform: translateZ(10px) scale(1.02);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
      }

      .channel-avatar {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        margin-right: 20px;
        background: linear-gradient(45deg, #ff416c, #ff4b2b);
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 30px;
        color: white;
        font-weight: bold;
        box-shadow: 0 5px 15px rgba(255, 75, 43, 0.4);
        border: 3px solid rgba(255, 255, 255, 0.1);
        position: relative;
        overflow: hidden;
      }

      .channel-avatar::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle at center,
          rgba(255, 255, 255, 0.8) 0%,
          rgba(255, 255, 255, 0) 70%
        );
        opacity: 0.3;
        transform: rotate(30deg);
        animation: shine 4s infinite;
      }

      @keyframes shine {
        0% {
          transform: rotate(30deg) translateX(-100%);
        }
        20%,
        100% {
          transform: rotate(30deg) translateX(100%);
        }
      }

      .channel-details {
        flex: 1;
      }

      .channel-name {
        font-size: 26px;
        font-weight: bold;
        margin: 0 0 5px 0;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        background: linear-gradient(to right, #ffffff, #e0e0e0);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .channel-stats {
        font-size: 16px;
        color: rgba(255, 255, 255, 0.8);
        margin-bottom: 8px;
      }

      .live-indicator {
        display: inline-flex;
        align-items: center;
        background-color: rgba(255, 0, 0, 0.8);
        border-radius: 4px;
        padding: 2px 8px;
        margin-left: 10px;
        font-size: 12px;
        font-weight: bold;
        text-transform: uppercase;
      }

      .pulse {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background-color: #fff;
        margin-right: 6px;
        position: relative;
      }

      .pulse::before {
        content: "";
        position: absolute;
        width: 100%;
        height: 100%;
        border-radius: 50%;
        background-color: #fff;
        opacity: 0.7;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
          opacity: 0.7;
        }
        50% {
          transform: scale(2);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 0;
        }
      }

      .total-amount {
        font-size: 22px;
        font-weight: bold;
        background: linear-gradient(to right, #ffd700, #ffa500);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        display: flex;
        align-items: center;
      }

      .total-amount::before {
        content: "💰";
        margin-right: 8px;
        font-size: 20px;
      }

      .superchat-container {
        width: 100%;
        max-height: 75vh;
        overflow-y: auto;
        padding: 10px;
        mask-image: linear-gradient(
          to bottom,
          transparent 0%,
          black 5%,
          black 95%,
          transparent 100%
        );
        -webkit-mask-image: linear-gradient(
          to bottom,
          transparent 0%,
          black 5%,
          black 95%,
          transparent 100%
        );
        perspective: 1000px;
      }

      /* Custom scrollbar */
      .superchat-container::-webkit-scrollbar {
        width: 6px;
      }

      .superchat-container::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
      }

      .superchat-container::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 10px;
      }

      .superchat-container::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.3);
      }

      .superchat {
        margin-bottom: 20px;
        border-radius: 18px;
        overflow: hidden;
        box-shadow: var(--glass-shadow);
        position: relative;
        transform-style: preserve-3d;
        transform: translateZ(0px) rotateX(0deg);
        transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        opacity: 0;
        animation: fadeIn 0.5s ease forwards;
        animation-delay: calc(var(--index) * 0.1s);
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateZ(-30px) translateY(20px) rotateX(10deg);
        }
        to {
          opacity: 1;
          transform: translateZ(0) translateY(0) rotateX(0deg);
        }
      }

      .superchat:hover {
        transform: translateZ(20px) scale(1.03) rotateX(2deg);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        z-index: 10;
      }

      .superchat::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 18px;
        padding: 2px;
        background: linear-gradient(
          var(--gradient-angle),
          var(--glass-border),
          transparent 40%,
          transparent 60%,
          var(--glass-border)
        );
        -webkit-mask: linear-gradient(#fff 0 0) content-box,
          linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        pointer-events: none;
        animation: borderRotate 4s linear infinite;
      }

      @keyframes borderRotate {
        0% {
          --gradient-angle: 0deg;
        }
        100% {
          --gradient-angle: 360deg;
        }
      }

      .superchat .header {
        padding: 16px;
        display: flex;
        align-items: center;
        position: relative;
        overflow: hidden;
      }

      .superchat .header::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--header-overlay, rgba(0, 0, 0, 0.2));
        z-index: 0;
      }

      .avatar {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        margin-right: 15px;
        background-size: cover;
        background-position: center;
        border: 2px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        position: relative;
        z-index: 1;
        overflow: hidden;
      }

      .avatar::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
          circle at 30% 30%,
          rgba(255, 255, 255, 0.4) 0%,
          rgba(255, 255, 255, 0) 70%
        );
      }

      .default-avatar {
        display: flex;
        justify-content: center;
        align-items: center;
        font-weight: bold;
        color: white;
        font-size: 18px;
        background: linear-gradient(
          135deg,
          var(--avatar-color-1, #673ab7),
          var(--avatar-color-2, #512da8)
        );
      }

      .user-info {
        flex: 1;
        position: relative;
        z-index: 1;
      }

      .author {
        font-weight: 600;
        margin: 0 0 4px 0;
        font-size: 16px;
        color: #fff;
        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
      }

      .timestamp {
        font-size: 12px;
        color: rgba(255, 255, 255, 0.8);
        display: flex;
        align-items: center;
      }

      .timestamp::before {
        content: "⏱️";
        margin-right: 4px;
        font-size: 10px;
      }

      .amount {
        font-weight: bold;
        font-size: 18px;
        background: var(
          --amount-gradient,
          linear-gradient(to right, #ffffff, #e0e0e0)
        );
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        position: relative;
        z-index: 1;
        display: flex;
        align-items: center;
        padding: 6px 12px;
        border-radius: 12px;
        backdrop-filter: brightness(1.2);
      }

      .content {
        padding: 18px;
        font-size: 15px;
        line-height: 1.5;
        word-break: break-word;
        background: rgba(15, 15, 25, 0.6);
        backdrop-filter: var(--glass-blur);
        -webkit-backdrop-filter: var(--glass-blur);
        position: relative;
        overflow: hidden;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
      }

      .content::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
          circle at bottom right,
          rgba(255, 255, 255, 0.05) 0%,
          rgba(255, 255, 255, 0) 70%
        );
        pointer-events: none;
      }

      /* Tiers styling */
      .tier-1 {
        --avatar-color-1: #1e88e5;
        --avatar-color-2: #1565c0;
      }

      .tier-1 .header {
        background: linear-gradient(
          135deg,
          rgba(33, 150, 243, 0.8) 0%,
          rgba(30, 136, 229, 0.8) 50%,
          rgba(25, 118, 210, 0.8) 100%
        );
      }

      .tier-2 {
        --avatar-color-1: #43a047;
        --avatar-color-2: #2e7d32;
      }

      .tier-2 .header {
        background: linear-gradient(
          135deg,
          rgba(76, 175, 80, 0.8) 0%,
          rgba(67, 160, 71, 0.8) 50%,
          rgba(46, 125, 50, 0.8) 100%
        );
      }

      .tier-3 {
        --avatar-color-1: #ffb300;
        --avatar-color-2: #ffa000;
        --amount-gradient: linear-gradient(to right, #663c00, #331e00);
        --header-overlay: rgba(0, 0, 0, 0.1);
      }

      .tier-3 .header {
        background: linear-gradient(
          135deg,
          rgba(255, 193, 7, 0.8) 0%,
          rgba(255, 179, 0, 0.8) 50%,
          rgba(255, 160, 0, 0.8) 100%
        );
      }

      .tier-3 .author,
      .tier-3 .timestamp {
        color: #4a3800;
        text-shadow: 0 1px 1px rgba(255, 255, 255, 0.3);
      }

      .tier-4 {
        --avatar-color-1: #e53935;
        --avatar-color-2: #c62828;
      }

      .tier-4 .header {
        background: linear-gradient(
          135deg,
          rgba(244, 67, 54, 0.8) 0%,
          rgba(229, 57, 53, 0.8) 50%,
          rgba(198, 40, 40, 0.8) 100%
        );
      }

      .tier-5 {
        --avatar-color-1: #8e24aa;
        --avatar-color-2: #6a1b9a;
      }

      .tier-5 .header {
        background: linear-gradient(
          135deg,
          rgba(156, 39, 176, 0.8) 0%,
          rgba(142, 36, 170, 0.8) 50%,
          rgba(106, 27, 154, 0.8) 100%
        );
      }

      /* Sparkle effect */
      .sparkle {
        position: absolute;
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background-color: white;
        box-shadow: 0 0 10px 2px white;
        opacity: 0;
        pointer-events: none;
        animation: sparkle var(--sparkle-duration) ease-in-out forwards;
      }

      @keyframes sparkle {
        0% {
          transform: scale(0);
          opacity: 0;
        }
        20% {
          transform: scale(1);
          opacity: 1;
        }
        100% {
          transform: scale(0);
          opacity: 0;
        }
      }

      /* Currency icon */
      .currency-icon {
        margin-right: 5px;
        font-size: 16px;
      }

      /* Add some emoji flair to comments based on tiers */
      .emoji-flair {
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 24px;
        opacity: 0.7;
        animation: float-rotate 3s ease-in-out infinite;
        transform-origin: center;
      }

      @keyframes float-rotate {
        0% {
          transform: translateY(0) rotate(0deg);
        }
        50% {
          transform: translateY(-5px) rotate(5deg);
        }
        100% {
          transform: translateY(0) rotate(0deg);
        }
      }

      /* Notification for new donation */
      .notification {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(0, 0, 0, 0.8);
        backdrop-filter: var(--glass-blur);
        border: 1px solid var(--glass-border);
        border-radius: 12px;
        padding: 15px;
        display: flex;
        align-items: center;
        transform: translateX(120%);
        transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        z-index: 1000;
        box-shadow: var(--glass-shadow);
      }

      .notification.show {
        transform: translateX(0);
      }

      .notification-icon {
        margin-right: 10px;
        font-size: 24px;
      }

      .notification-text {
        font-size: 14px;
      }

      .notification-text strong {
        display: block;
        font-size: 16px;
        margin-bottom: 3px;
      }

      /* Confetti for high-tier donations */
      .confetti-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1000;
      }

      .confetti {
        position: absolute;
        width: 10px;
        height: 10px;
        opacity: 0;
      }
    </style>
  </head>
  <body>
    <div class="background-pattern"></div>
    <div class="highlight"></div>
    <div class="highlight-2"></div>

    <div class="live-stream-container">
      <div class="bubbles" id="bubbles"></div>

      <div class="channel-info">
        <div class="channel-avatar">A</div>
        <div class="channel-details">
          <h2 class="channel-name">Andy 老師</h2>
          <div class="channel-stats">
            2.1M 訂閱者
            <span class="live-indicator">
              <span class="pulse"></span>直播中
            </span>
          </div>
          <div class="total-amount">總贊助: $ 198,740 TWD</div>
        </div>
      </div>

      <div class="superchat-container" id="superchats">
        <!-- Generated super chats will appear here -->
      </div>
    </div>

    <div class="confetti-container" id="confetti-container"></div>

    <div class="notification" id="notification">
      <div class="notification-icon">🎁</div>
      <div class="notification-text">
        <strong>新贊助！</strong>
        <span id="notification-detail"></span>
      </div>
    </div>

    <script>
      // Sample data from your input
      const superChatData = [
        {
          id: "hash_-8590991268447361324",
          author: "Unknown",
          currency: "TWD",
          amount: 3290.0,
          timestamp: "1 天前",
          content:
            "Andy 老師這部影片回應的口條、面對鏡頭的眼神和剪輯的速度已經完美詮釋你才是眾量級的真靈魂！",
          raw_amount: "$3,290.00",
          avatar_url: null,
        },
        {
          id: "hash_-5359080178318062844",
          author: "@陳清依",
          currency: "TWD",
          amount: 6590.0,
          timestamp: "9 小時前",
          content:
            "這是我贊助Andy老師第四天\n目前已贊助26360元\n\n最近有人在說我在蹭受害者流量\n我今天打百家樂贏錢要分紅給Andy老師跟你們有關係嗎？是輸到你們的錢嗎？\n還是沒分到你們在不高興？",
          raw_amount: "$6,590.00",
          avatar_url: null,
        },
        {
          id: "hash_717613097724989157",
          author: "@Nissie",
          currency: "TWD",
          amount: 6590.0,
          timestamp: "1 天前",
          content:
            "我曾經花了五年學到\n「最相信的人，教你不要相信別人。」\n-\n而你用了十年，希望你沒有因此對人性失望\n是金子總會發光的 願你未來一切安好.",
          raw_amount: "$6,590.00",
          avatar_url: null,
        },
        {
          id: "hash_1604348676602680649",
          author: "@sw2588",
          currency: "HKD",
          amount: 2500.0,
          timestamp: "3 小時前",
          content:
            "我來自香港，剛訂閱做會員，看了你的影片及新聞，你要加油，你是有能力的，不用擔心害怕，你不是一個人的。我知道法律程序需要金錢，我這是小小心意。緊記多資詢律師意見，祝你生活順利，成功取回你應得的。",
          raw_amount: "HK$2,500.00",
          avatar_url: null,
        },
        {
          id: "hash_-2874814394589802810",
          author: "@陳清依",
          currency: "TWD",
          amount: 6590.0,
          timestamp: "1 天前 (已編輯)",
          content:
            "贊助Andy老師第三天\n雖然幫助不到你什麼，我用百家的一部分收益，將連續六天贊助你39000，希望你能打贏這場惡戰！",
          raw_amount: "$6,590.00",
          avatar_url: null,
        },
        {
          id: "hash_-6638452267977931611",
          author: "@michaels3921",
          currency: "HKD",
          amount: 788.0,
          timestamp: "1 天前 (已編輯)",
          content:
            "來自香港的支援🇭🇰 \n張家人偷了你的200萬頻道,各位兄弟們用三天時間創造奇蹟,幫你個人頻道達成了。律師費,生活費,孝親費你再也不用擔心。Andy老師待事情解決後，努力拍片就是對我們最好的回饋。\n張家人教了我很多四字詞，狼心狗肺, 禽獸不如,豐取刻與, 敲骨吸髓, 剝膚椎髓,喪盡天良, 蛇蝎心腸, 心狠手辣, 歪門邪道。\n善有善報，惡有惡報。若然不報，時辰未到；時辰一到，必然全報。",
          raw_amount: "HK$788.00",
          avatar_url: null,
        },
        {
          id: "hash_8727761135834071137",
          author: "@Happybacon2.0",
          currency: "HKD",
          amount: 118.0,
          timestamp: "4 小時前",
          content:
            "Hi Andy老師 我是一名來自香港的國中生 五天前開始知道這個消息我覺得心痛 被一個以為可以信任的人騙了所有錢 無論如何要記得放鬆 我們都會支持你的 祝你一切順利🫶",
          raw_amount: "HK$118.00",
          avatar_url: null,
        },
        {
          id: "hash_5701559730893919233",
          author: "@china8964",
          currency: "HKD",
          amount: 10.0,
          timestamp: "1 天前 (已編輯)",
          content:
            "Andy老師，我是香港的一個中學生，口袋裡沒什麼錢，沒辦法像其他人一樣用很多錢支持你，但我真的很想寫下這些話，讓你知道你不孤單。看到你這幾天的事，我心裡真的五味雜陳。從22萬訂閱到不到一天就衝破200萬，還有滿滿的超級留言，全都是大家的愛和支持，我坐在螢幕前都忍不住紅了眼眶。你辛苦10年打造的「眾量級」，就因為前女友一家的無理對待差點被搶走，甚至聽到你說自己一個月才拿幾萬塊薪水，我真的好心疼，也好替你不值。\n\n可是你沒有被打倒！你站出來講真相，那種勇氣真的讓我好佩服。看到這麼多人站出來挺你，連大V都幫你發聲，我突然覺得這個世界還是有光亮的。你讓我相信，正義不會永遠沉默。身為學生，我沒什麼能給你的，只能敲下這些字，希望你看到時能感受到一點溫暖。你不只是個YouTuber，你是個讓人想追隨的人。Andy老師，謝謝你沒放棄，未來不管多難，我都會在這裡默默支持你。加油，你真的值得這一切！",
          raw_amount: "HK$10.00",
          avatar_url: null,
        },
        {
          id: "hash_2115232424583992162",
          author: "@Phoebe88821",
          currency: "HKD",
          amount: 250.0,
          timestamp: "1 天前 (已編輯)",
          content:
            "我是來自香港的大學生，這些年主要是看台灣的Youtuber放鬆解壓，你們都很用心製作，看到這件事發生比電視劇劇情真的還要誇張。\n這錢不多，拿去吃餐好的，記得要好好吃飯生活，才有力量跟張家討回你這十年應有的",
          raw_amount: "HK$250.00",
          avatar_url:
            "https://yt3.ggpht.com/fqduuE5GDdoGquYQTsvqsU0GizIuj2uO1wbr2S6kt-pu8ARxKpnpv3vzBXVGVlh21r1VnsGI=s88-c-k-c0x00ffffff-no-rj",
        },
        {
          id: "hash_7792555258798301229",
          author: "@安德森-b5v",
          currency: "TWD",
          amount: 3290.0,
          timestamp: "1 天前",
          content:
            "我只是一個路人粉\n但是很高興能看到你的眼神變得如此堅定\n加油啊！！ 別放過她們",
          raw_amount: "$3,290.00",
          avatar_url:
            "https://yt3.ggpht.com/ytc/AIdro_lKBmHu75F4fQYUzZG5NbJI8MzKDZfgKw2wYf6WT13b3qI=s88-c-k-c0x00ffffff-no-rj",
        },
      ];

      // Additional synthetic data based on your example data
      const additionalData = [
        {
          id: "hash_new1",
          author: "@王小明",
          currency: "TWD",
          amount: 2000.0,
          timestamp: "2 分鐘前",
          content:
            "Andy老師加油！我從你創立頻道就開始追蹤了，看到你被背叛的消息真的很心痛。希望你能重新振作起來，相信公道自在人心！",
          raw_amount: "$2,000.00",
          avatar_url: null,
        },
        {
          id: "hash_new2",
          author: "@李曉華",
          currency: "TWD",
          amount: 10000.0,
          timestamp: "剛剛",
          content:
            "來自馬來西亞的支持！老師不要氣餒，正義可能會遲到但不會缺席。我們會一直支持你到底！",
          raw_amount: "$10,000.00",
          avatar_url: null,
        },
        {
          id: "hash_new3",
          author: "@Jason_Lin",
          currency: "USD",
          amount: 100.0,
          timestamp: "5 分鐘前",
          content:
            "從美國矽谷看到你的故事，令人心痛。但看到台灣網友團結起來支持你，真的很感動。加油！Justice will prevail!",
          raw_amount: "$100.00",
          avatar_url: null,
        },
        {
          id: "hash_new4",
          author: "@小莉莉",
          currency: "TWD",
          amount: 5000.0,
          timestamp: "10 分鐘前",
          content:
            "Andy老師，我是你的長期粉絲，平時很少看直播，但這次一定要出來支持你！希望你能堅強面對，我們都在！",
          raw_amount: "$5,000.00",
          avatar_url: null,
        },
        {
          id: "hash_new5",
          author: "@台南阿伯",
          currency: "TWD",
          amount: 1500.0,
          timestamp: "15 分鐘前",
          content:
            "雖然我已經60歲了，平常不太看YouTube，但看到你的故事，覺得很不公平。這點錢不多，希望能幫上忙。老人家挺你！",
          raw_amount: "$1,500.00",
          avatar_url: null,
        },
        {
          id: "hash_new6",
          author: "@StellaWong",
          currency: "HKD",
          amount: 1000.0,
          timestamp: "7 分鐘前",
          content:
            "香港觀眾支持你！你的影片總是充滿正能量，現在換我們來給你力量。加油加油！不要放棄！",
          raw_amount: "HK$1,000.00",
          avatar_url: null,
        },
        {
          id: "hash_new7",
          author: "@林大明",
          currency: "TWD",
          amount: 8888.0,
          timestamp: "3 分鐘前",
          content:
            "八八八八，發發發發！Andy老師發達啦！打贏官司，拿回屬於你的一切！我們挺你！",
          raw_amount: "$8,888.00",
          avatar_url: null,
        },
        {
          id: "hash_new8",
          author: "@小學生小明",
          currency: "TWD",
          amount: 100.0,
          timestamp: "12 分鐘前",
          content:
            "這是我存了三個月的零用錢，雖然不多，但希望能表達我的支持！Andy老師的影片陪伴我度過很多快樂時光！",
          raw_amount: "$100.00",
          avatar_url: null,
        },
        {
          id: "hash_new9",
          author: "@黃教授",
          currency: "TWD",
          amount: 3000.0,
          timestamp: "20 分鐘前",
          content:
            "作為一個大學教授，我很欣賞你的堅持和創作熱情。這次事件顯示了台灣網路社群的力量，也提醒我們知識產權的重要性。支持你！",
          raw_amount: "$3,000.00",
          avatar_url: null,
        },
        {
          id: "hash_new10",
          author: "@阿華師",
          currency: "TWD",
          amount: 12000.0,
          timestamp: "1 分鐘前",
          content:
            "老兄，我在夜市擺攤20年，看到你這麼認真做內容卻被這樣對待，實在看不下去。這是我一天的收入，希望能幫你度過難關！",
          raw_amount: "$12,000.00",
          avatar_url: null,
        },
      ];

      // Combine existing and new data
      const allData = [...superChatData, ...additionalData];

      // Function to get the appropriate tier based on amount
      function getTier(amount) {
        if (amount < 100) return 1;
        if (amount < 500) return 2;
        if (amount < 2000) return 3;
        if (amount < 5000) return 4;
        return 5;
      }

      // Function to get initials for default avatar
      function getInitials(name) {
        if (!name || name === "Unknown") return "?";
        const cleanName = name.replace(/@/g, "").trim();
        if (!cleanName) return "?";

        const parts = cleanName.split(/[\s-_]/);
        if (parts.length > 1) {
          return (parts[0][0] + parts[1][0]).toUpperCase();
        }
        return cleanName[0].toUpperCase();
      }

      // Function to get currency icon
      function getCurrencyIcon(currency) {
        switch (currency) {
          case "TWD":
            return "🇹🇼";
          case "HKD":
            return "🇭🇰";
          case "USD":
            return "🇺🇸";
          default:
            return "💰";
        }
      }

      // Function to get emoji flair based on tier
      function getEmojiFlair(tier, content) {
        const tier1Emojis = ["👍", "😊", "💫"];
        const tier2Emojis = ["🙌", "✨", "💯"];
        const tier3Emojis = ["🔥", "⭐", "💪"];
        const tier4Emojis = ["🎉", "💖", "👑"];
        const tier5Emojis = ["🌟", "💎", "🏆"];

        let emojis;
        switch (tier) {
          case 1:
            emojis = tier1Emojis;
            break;
          case 2:
            emojis = tier2Emojis;
            break;
          case 3:
            emojis = tier3Emojis;
            break;
          case 4:
            emojis = tier4Emojis;
            break;
          case 5:
            emojis = tier5Emojis;
            break;
          default:
            emojis = tier1Emojis;
        }

        // Check for specific keywords to customize emoji
        if (content.includes("加油")) return "💪";
        if (content.includes("支持")) return "🤝";
        if (content.includes("香港")) return "🇭🇰";
        if (content.includes("愛") || content.includes("喜歡")) return "❤️";
        if (content.includes("感謝") || content.includes("謝謝")) return "🙏";

        return emojis[Math.floor(Math.random() * emojis.length)];
      }

      // Create bubbles for background effect
      function createBubbles() {
        const bubblesContainer = document.getElementById("bubbles");
        bubblesContainer.innerHTML = "";

        for (let i = 0; i < 50; i++) {
          const bubble = document.createElement("div");
          bubble.className = "bubble";

          const size = Math.random() * 30 + 10;
          const left = Math.random() * 100;

          bubble.style.width = `${size}px`;
          bubble.style.height = `${size}px`;
          bubble.style.left = `${left}%`;
          bubble.style.setProperty(
            "--rise-duration",
            `${Math.random() * 15 + 10}s`
          );
          bubble.style.setProperty("--rise-delay", `${Math.random() * 5}s`);

          bubblesContainer.appendChild(bubble);
        }
      }

      // Create sparkle effect
      function createSparkle(element) {
        const sparkle = document.createElement("div");
        sparkle.className = "sparkle";

        const x = Math.random() * element.offsetWidth;
        const y = Math.random() * element.offsetHeight;

        sparkle.style.left = `${x}px`;
        sparkle.style.top = `${y}px`;
        sparkle.style.setProperty(
          "--sparkle-duration",
          `${Math.random() * 1 + 0.5}s`
        );

        element.appendChild(sparkle);

        setTimeout(() => {
          sparkle.remove();
        }, 1500);
      }

      // Add sparkles to an element
      function addSparkles(element, count = 3) {
        for (let i = 0; i < count; i++) {
          setTimeout(() => {
            createSparkle(element);
          }, i * 200);
        }
      }

      // Show notification
      function showNotification(author, amount, currency) {
        const notification = document.getElementById("notification");
        const notificationDetail = document.getElementById(
          "notification-detail"
        );

        notificationDetail.textContent = `${author} 贊助了 ${amount} ${currency}`;
        notification.classList.add("show");

        setTimeout(() => {
          notification.classList.remove("show");
        }, 3000);
      }

      // Create confetti for high donations
      function createConfetti(tier) {
        if (tier < 4) return; // Only for high tier donations

        const confettiContainer = document.getElementById("confetti-container");
        const colors = [
          "#ff0000",
          "#00ff00",
          "#0000ff",
          "#ffff00",
          "#ff00ff",
          "#00ffff",
        ];

        for (let i = 0; i < 100; i++) {
          const confetti = document.createElement("div");
          confetti.className = "confetti";

          const size = Math.random() * 8 + 5;
          const type = Math.floor(Math.random() * 3);
          const color = colors[Math.floor(Math.random() * colors.length)];

          confetti.style.width = `${size}px`;
          confetti.style.height = type === 0 ? `${size}px` : `${size * 0.4}px`;
          confetti.style.backgroundColor = color;

          confetti.style.left = `${Math.random() * 100}%`;
          confetti.style.top = "-20px";

          confetti.style.transform = `rotate(${Math.random() * 360}deg)`;

          if (type === 0) {
            confetti.style.borderRadius = "50%";
          } else if (type === 1) {
            confetti.style.width = `${size}px`;
            confetti.style.height = `${size}px`;
            confetti.style.borderRadius = "0";
          }

          confettiContainer.appendChild(confetti);

          const animationDuration = Math.random() * 3 + 2;
          const animations = [
            `confettiDrop ${animationDuration}s ease-in forwards`,
            `confettiSpin ${animationDuration * 0.5}s linear infinite`,
          ];

          confetti.style.opacity = "1";
          confetti.animate(
            [
              { transform: `translate(0, 0) rotate(0deg)`, opacity: 1 },
              {
                transform: `translate(${Math.random() * 200 - 100}px, ${
                  window.innerHeight
                }px) rotate(${Math.random() * 1000}deg)`,
                opacity: 0,
              },
            ],
            {
              duration: animationDuration * 1000,
              easing: "cubic-bezier(0.1, 0.8, 0.3, 1)",
              fill: "forwards",
            }
          );

          setTimeout(() => {
            confetti.remove();
          }, animationDuration * 1000);
        }
      }

      // Function to render super chats with delay
      function renderSuperChats() {
        const container = document.getElementById("superchats");
        container.innerHTML = ""; // Clear existing content

        // Sort by amount (highest first) and then by timestamp (newest first)
        const sortedData = [...allData].sort((a, b) => {
          if (b.amount !== a.amount) return b.amount - a.amount;

          // Convert timestamps to comparable values
          const timeA =
            a.timestamp.includes("小時前") ||
            a.timestamp.includes("分鐘前") ||
            a.timestamp === "剛剛"
              ? 1
              : 0;
          const timeB =
            b.timestamp.includes("小時前") ||
            b.timestamp.includes("分鐘前") ||
            b.timestamp === "剛剛"
              ? 1
              : 0;

          return timeB - timeA;
        });

        sortedData.forEach((chat, index) => {
          setTimeout(() => {
            const tier = getTier(chat.amount);
            const superchatElement = document.createElement("div");
            superchatElement.className = `superchat tier-${tier}`;
            superchatElement.style.setProperty("--index", index);

            const avatarInitials = getInitials(chat.author);
            const avatarStyle = chat.avatar_url
              ? `background-image: url('${chat.avatar_url}');`
              : "";

            const avatarClass = chat.avatar_url
              ? "avatar"
              : "avatar default-avatar";
            const currencyIcon = getCurrencyIcon(chat.currency);
            const emojiFlair = getEmojiFlair(tier, chat.content);

            superchatElement.innerHTML = `
            <div class="header">
              <div class="${avatarClass}" style="${avatarStyle}">${
              !chat.avatar_url ? avatarInitials : ""
            }</div>
              <div class="user-info">
                <p class="author">${chat.author}</p>
                <p class="timestamp">${chat.timestamp}</p>
              </div>
              <div class="amount"><span class="currency-icon">${currencyIcon}</span>${
              chat.raw_amount
            }</div>
              <div class="emoji-flair">${emojiFlair}</div>
            </div>
            <div class="content">${chat.content.replace(/\n/g, "<br>")}</div>
          `;

            container.appendChild(superchatElement);

            // Add sparkle effect for tier 3+
            if (tier >= 3) {
              setTimeout(() => {
                addSparkles(superchatElement.querySelector(".amount"), tier);
              }, 300);
            }

            // Create confetti for tier 5
            if (tier === 5 && index < 3) {
              createConfetti(tier);
            }

            // Show notification for new donations (only first few to avoid spam)
            if (
              index < 2 &&
              (chat.timestamp.includes("分鐘前") || chat.timestamp === "剛剛")
            ) {
              setTimeout(() => {
                showNotification(chat.author, chat.raw_amount, chat.currency);
              }, 1000 + index * 3000);
            }
          }, index * 150); // Stagger the appearance
        });
      }

      // Render initially
      createBubbles();
      renderSuperChats();

      // Names, messages, and amounts for random superchats
      const names = [
        "@台灣之光",
        "@香港飛人",
        "@小資族林小姐",
        "@熱血工程師",
        "@夜市老闆娘",
        "@海外留學生",
        "@退休阿公",
        "@年輕創業家",
        "@理工科技男",
        "@美食部落客",
        "@鄉下農夫",
        "@街頭藝人",
        "@程式設計師",
        "@醫學系學生",
        "@社區阿姨",
        "@北部上班族",
      ];

      const currencies = ["TWD", "HKD", "USD"];

      const amounts = {
        TWD: [100, 200, 500, 1000, 2000, 5000, 10000],
        HKD: [100, 200, 500, 1000, 2000],
        USD: [5, 10, 20, 50, 100],
      };

      const timeAgo = ["剛剛", "1 分鐘前", "2 分鐘前", "5 分鐘前"];

      const messages = [
        "Andy老師加油！正義永遠站在你這邊！",
        "來自新加坡的支持！我們都是你的後盾！",
        "第一次捐款就給了你，因為你值得被支持！",
        "雖然我只是學生，但還是想盡一份心力，加油！",
        "看到你的故事很心疼，但也被大家的團結感動，台灣人真好！",
        "我會一直支持你到底，別放棄！",
        "希望你能走出這個陰霾，未來一定會更好！",
        "你的堅持和努力，值得更好的回報！加油！",
        "這次事件讓我看到台灣網友的團結，真的很感動！",
        "雖然我們素不相識，但你的故事打動了我，希望這點小錢能幫上忙。",
        "希望你能拿回應得的一切！我們都挺你！",
        "正義可能會遲到，但絕不會缺席！加油！",
        "我從來沒有贊助過任何YouTuber，但你的遭遇讓我忍不住想支持你！",
        "看了你的故事後輾轉難眠，希望這點心意能幫助你渡過難關。",
        "你不是一個人在戰鬥，我們都在你背後！",
        "我是一個普通上班族，雖然錢不多，但還是想表達我的支持！",
      ];

      // Function to add a new random superchat
      function addRandomSuperChat() {
        const randomName = names[Math.floor(Math.random() * names.length)];
        const randomCurrency =
          currencies[Math.floor(Math.random() * currencies.length)];
        const randomAmount =
          amounts[randomCurrency][
            Math.floor(Math.random() * amounts[randomCurrency].length)
          ];
        const randomTime = timeAgo[Math.floor(Math.random() * timeAgo.length)];
        const randomMessage =
          messages[Math.floor(Math.random() * messages.length)];

        const rawAmount =
          randomCurrency === "TWD"
            ? `$${randomAmount.toLocaleString()}`
            : randomCurrency === "HKD"
            ? `HK$${randomAmount.toLocaleString()}`
            : `$${randomAmount.toLocaleString()}`;

        const newChat = {
          id: `hash_random_${Date.now()}`,
          author: randomName,
          currency: randomCurrency,
          amount: randomAmount,
          timestamp: randomTime,
          content: randomMessage,
          raw_amount: rawAmount,
          avatar_url: null,
        };

        allData.unshift(newChat); // Add to the beginning
        if (allData.length > 25) allData.pop(); // Keep the list manageable

        renderSuperChats();

        // Show notification for new donation
        showNotification(randomName, rawAmount, randomCurrency);

        // Create confetti for high tier donations
        const tier = getTier(randomAmount);
        if (tier >= 4) {
          createConfetti(tier);
        }
      }

      // Add new superchats every 4-8 seconds
      function scheduleNextSuperchat() {
        const nextTime = Math.random() * 4000 + 4000; // 4-8 seconds
        setTimeout(() => {
          addRandomSuperChat();
          scheduleNextSuperchat();
        }, nextTime);
      }

      scheduleNextSuperchat();

      // Recreate bubbles periodically
      setInterval(createBubbles, 20000);

      // Update total donation amount periodically
      setInterval(() => {
        const totalElement = document.querySelector(".total-amount");
        const currentTotal = parseInt(
          totalElement.textContent.replace(/[^0-9]/g, "")
        );
        const increase = Math.floor(Math.random() * 5000) + 1000;
        totalElement.textContent = `總贊助: $ ${(
          currentTotal + increase
        ).toLocaleString()} TWD`;

        // Add sparkles to the total amount
        addSparkles(totalElement, 2);
      }, 10000);

      // Add interaction with the cards - mouse tracking effect
      document.addEventListener("mousemove", (e) => {
        const cards = document.querySelectorAll(".superchat");
        const channelInfo = document.querySelector(".channel-info");

        // Mouse position relative to viewport
        const mouseX = e.clientX;
        const mouseY = e.clientY;

        // Calculate rotation based on mouse position
        const centerX = window.innerWidth / 2;
        const centerY = window.innerHeight / 2;

        const rotateX = (mouseY - centerY) / 50;
        const rotateY = (centerX - mouseX) / 50;

        // Apply to channel info
        channelInfo.style.transform = `translateZ(10px) rotateX(${
          rotateX * 0.2
        }deg) rotateY(${rotateY * 0.2}deg)`;

        // Apply to cards with a smaller effect
        cards.forEach((card) => {
          const rect = card.getBoundingClientRect();
          const cardCenterX = rect.left + rect.width / 2;
          const cardCenterY = rect.top + rect.height / 2;

          const distanceX = mouseX - cardCenterX;
          const distanceY = mouseY - cardCenterY;

          // Only apply effect to cards near the mouse
          const distance = Math.sqrt(
            distanceX * distanceX + distanceY * distanceY
          );
          if (distance < 300) {
            const factor = 1 - distance / 300;
            card.style.transform = `translateZ(${10 * factor}px) rotateX(${
              rotateX * factor * 0.1
            }deg) rotateY(${rotateY * factor * 0.1}deg)`;
          }
        });
      });
    </script>
  </body>
</html>
